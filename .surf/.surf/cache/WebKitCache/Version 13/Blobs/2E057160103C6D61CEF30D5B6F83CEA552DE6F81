if (self.CavalryLogger) { CavalryLogger.start_js(["x\/HU8"]); }

__d("PlatformDialog",["cx","CSS","DOMEvent","DOMEventListener"],(function(a,b,c,d,e,f,g){__p&&__p();var h;a.getInstance=function(){"use strict";return h};function a(a,c,d){"use strict";h=this,this.$1=a,this.$2=c,this.$3=!1,b("DOMEventListener").add(this.$1,"submit",function(c){if(this.$3){new(b("DOMEvent"))(c).kill();return}this.$3=!0;d&&b("CSS").addClass(a,"_32qa")}.bind(this))}a.prototype.getForm=function(){"use strict";return this.$1};a.prototype.getDisplay=function(){"use strict";return this.$2};a.prototype.hasBeenSubmitted=function(){"use strict";return this.$3};a.RESPONSE="platform/dialog/response";e.exports=a}),null);
__d("StrSet",[],(function(a,b,c,d,e,f){__p&&__p();function g(a){"use strict";this.$2={},this.$1=0,a&&this.addAll(a)}g.prototype.add=function(a){"use strict";Object.prototype.hasOwnProperty.call(this.$2,a)||(this.$2[a]=!0,this.$1++);return this};g.prototype.addAll=function(a){"use strict";a.forEach(this.add,this);return this};g.prototype.remove=function(a){"use strict";Object.prototype.hasOwnProperty.call(this.$2,a)&&(delete this.$2[a],this.$1--);return this};g.prototype.removeAll=function(a){"use strict";a.forEach(this.remove,this);return this};g.prototype.toArray=function(){"use strict";return Object.keys(this.$2)};g.prototype.toMap=function(a){"use strict";var b={};Object.keys(this.$2).forEach(function(c){b[c]=typeof a==="function"?a(c):a||!0});return b};g.prototype.contains=function(a){"use strict";return Object.prototype.hasOwnProperty.call(this.$2,a)};g.prototype.count=function(){"use strict";return this.$1};g.prototype.clear=function(){"use strict";this.$2={};this.$1=0;return this};g.prototype.clone=function(){"use strict";return new g(this)};g.prototype.forEach=function(a,b){"use strict";Object.keys(this.$2).forEach(a,b)};g.prototype.map=function(a,b){"use strict";return Object.keys(this.$2).map(a,b)};g.prototype.some=function(a,b){"use strict";return Object.keys(this.$2).some(a,b)};g.prototype.every=function(a,b){"use strict";return Object.keys(this.$2).every(a,b)};g.prototype.filter=function(a,b){"use strict";return new g(Object.keys(this.$2).filter(a,b))};g.prototype.union=function(a){"use strict";return this.clone().addAll(a)};g.prototype.intersect=function(a){"use strict";return this.filter(function(b){return a.contains(b)})};g.prototype.difference=function(a){"use strict";return a.filter(function(a){return!this.contains(a)}.bind(this))};g.prototype.equals=function(a){"use strict";__p&&__p();var b=function(a,b){return a===b?0:a<b?-1:1},c=this.toArray();a=a.toArray();if(c.length!==a.length)return!1;var d=c.length;c=c.sort(b);a=a.sort(b);while(d--)if(c[d]!==a[d])return!1;return!0};e.exports=g}),null);
__d("PlatformBaseVersioning",["invariant","PlatformVersions","StrSet","getObjectValues"],(function(a,b,c,d,e,f,g){__p&&__p();var h=new(b("StrSet"))(b("getObjectValues")(b("PlatformVersions").versions));c=location.pathname;d=c.substring(1,c.indexOf("/",1));var i=h.contains(d)?d:b("PlatformVersions").versions.UNVERSIONED;function j(a,c){if(c==b("PlatformVersions").versions.UNVERSIONED)return a;h.contains(c)||g(0,3769);a.indexOf("/")!==0&&(a="/"+a);return"/"+c+a}function a(a){return h.contains(a.substring(1,a.indexOf("/",1)))?a.substring(a.indexOf("/",1)):a}f={addVersionToPath:j,getLatestVersion:function(){return b("PlatformVersions").LATEST},versionAwareURI:function(a){return a.setPath(j(a.getPath(),i))},versionAwarePath:function(a){return j(a,i)},getUnversionedPath:a};e.exports=f}),null);
__d("PlatformDialogClient",["Arbiter","AsyncDialog","AsyncRequest","DOMEventListener","PlatformBaseVersioning","PlatformDialog","PopupWindow","QueryString","URI","UserAgent_DEPRECATED","guid"],(function(a,b,c,d,e,f){__p&&__p();var g=575,h="FB_DIALOG_RESPONSE";b("AsyncDialog").getLoadingDialog().setWidth(g);b("DOMEventListener").add(window,"message",function(a){/\.facebook\.com$/.test(a.origin)&&new RegExp("^"+h+":").test(a.data)&&b("Arbiter").inform(b("PlatformDialog").RESPONSE,JSON.parse(a.data.substr(h.length+1)))});var i={};b("Arbiter").subscribe(b("PlatformDialog").RESPONSE,function(a,b){a=b.state;i[a]&&(i[a].callback(b),b.state=i[a].state,delete i[a])},"new");function j(a){return function(){b("Arbiter").inform(b("PlatformDialog").RESPONSE,babelHelpers["extends"]({state:a},k.REQUEST_ABORTED_ERROR))}}var k={REQUEST_ABORTED_ERROR:{error_code:-200,error_message:"Request aborted."},async:function(a,c,d){var e=b("guid")(),f=c.state;c.state=e;c.redirect_uri=new(b("URI"))("/dialog/return/arbiter").setSubdomain("www").setFragment(b("QueryString").encode({origin:c.redirect_uri})).getQualifiedURI().toString();c.display="async";i[e]={callback:d||function(){},state:f};b("AsyncDialog").send(new(b("AsyncRequest"))(this.getURI(a,c)).setMethod("GET").setReadOnly(!0).setAbortHandler(j(e)))},popup:function(a,c,d,e,f){__p&&__p();var h=b("guid")(),j=d.state;d.state=h;d.client_id=d.app_id=c;d.redirect_uri=new(b("URI"))("/dialog/return/arbiter").setSecure(b("URI").getRequestURI().isSecure()).setSubdomain("www").setFragment(b("QueryString").encode({origin:d.redirect_uri})).addQueryData(e||{}).addQueryData({relation:"opener",close:!0}).toString();d.display=b("UserAgent_DEPRECATED").mobile()?"touch":"popup";i[h]={callback:f||function(){},state:j};c=b("URI").getRequestURI();e=c.getDomain();h=e.replace("developers","www");b("PopupWindow").open(new(b("URI"))(this.getURI(a,d)).setDomain(h).setProtocol("https").toString(),210,g)},getURI:function(a,c){if(c.version){var d=new(b("URI"))("/"+c.version+"/dialog/"+a);delete c.version;return d.addQueryData(c)}return b("PlatformBaseVersioning").versionAwareURI(new(b("URI"))("/dialog/"+a).addQueryData(c))}};e.exports=k}),null);
__d("GraphQLStoryCreateSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MOBILE:"mobile",TABLET:"tablet",MESSENGER:"messenger",PROFILE_PHOTO_SHIELD:"profile_photo_shield",WWW:"www"})}),null);
__d("MessengerCreateTemporaryPhotoMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1371416706263221"};c.getQueryID=function(){"use strict";return"635334346677399"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerGameDialogErrorMessage.react",["ix","cx","Image.react","React","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return b("React").createElement("div",{className:"_1e1n"},b("React").createElement(b("Image.react"),{src:g("141787")}),b("React").createElement("span",{className:"_3-99"},a.error))};e.exports=a}),null);
__d("MessengerGameDialogSendingSpinner.react",["cx","fbt","MessengerSpinner.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){return b("React").createElement("div",null,b("React").createElement(b("MessengerSpinner.react"),null),b("React").createElement("span",{className:"_1e1n _3-99"},h._("Sending")))};e.exports=a}),null);
__d("MessengerGameScoreShareMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1056902241080709"};c.getQueryID=function(){"use strict";return"403785339972039"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("dataUriToBlob",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){__p&&__p();var b=a.split(",")[0].indexOf("base64")>=0,c=a.split(",")[0].split(":")[1].split(";")[0];a=b?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]);if(b){b=new Uint8Array(a.length);for(var d=0;d<a.length;d++)b[d]=a.charCodeAt(d);d=[b]}else d=[a];return new Blob(d,{type:c})}e.exports=a}),null);
__d("MessengerGameScoreShareDialog.react",["cx","fbt","AsyncRequest","AsyncUploadRequest","CurrentUser","GraphQLStoryCreateSource","Image.react","LayerFadeOnHide","MessengerComposeViewHeader.react","MessengerCreateTemporaryPhotoMutationWebGraphQLMutation","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerDialogTitleReact.re","MessengerGameDialogErrorMessage.react","MessengerGameDialogSendingSpinner.react","MessengerGameScoreShareMutationWebGraphQLMutation","React","dataUriToBlob","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component,l=b("MessengerDialogTitleReact.re").component;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={recipients:b("immutable").List(),sendError:null,sending:!1},this.mounted=!0,this.$3=function(a){this.setState({recipients:this.state.recipients.push(a)})}.bind(this),this.$4=function(a){var b=this.state.recipients;this.setState({recipients:b["delete"](b.indexOf(a))})}.bind(this),this.$2=function(){this.setState({recipients:b("immutable").List()})}.bind(this),this.$5=function(){var a=this.props.screenshot;a=new(b("AsyncUploadRequest"))(b("MessengerCreateTemporaryPhotoMutationWebGraphQLMutation").getURI({photo:null,source:b("GraphQLStoryCreateSource").MESSENGER})).setFiles({photo:b("dataUriToBlob")(a)});a.subscribe("success",this.$6);a.send();this.setState({sending:!0,sendError:null})}.bind(this),this.$6=function(a,c){c=(a=c.getResponse())!=null?(a=a.payload)!=null?(a=a.data)!=null?(a=a.viewer_create_temporary_photo)!=null?(a=a.photo)!=null?a.id:a:a:a:a:a;if(c&&this.state.recipients.size>0){a=this.state.recipients.map(function(a){return a.getUniqueID()}).toArray();new(b("AsyncRequest"))(b("MessengerGameScoreShareMutationWebGraphQLMutation").getURI({thread_id:a,game_id:this.props.gameID,score:this.props.score,screenshot:c})).setHandler(this.$7).send()}}.bind(this),this.$7=function(a){if(this.mounted){if(!a.error){this.setState({recipients:b("immutable").List(),sending:!1},function(){return this.$8()}.bind(this));return}this.setState({sending:!1,sendError:a.error})}}.bind(this),this.$1=function(a){a||this.$8()}.bind(this),c}a.prototype.componentWillUnmount=function(){"use strict";this.mounted=!1};a.prototype.render=function(){"use strict";var a=h._("Send"),c;this.state.sending?c=b("React").createElement(b("MessengerGameDialogSendingSpinner.react"),null):this.state.sendError&&(c=b("React").createElement(b("MessengerGameDialogErrorMessage.react"),{error:this.state.sendError}));return b("React").createElement(b("MessengerDialog.react"),{shown:this.props.shown,behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$1},b("React").createElement(k,null,b("React").createElement(l,null,this.props.title)),b("React").createElement(j,null,b("React").createElement("div",{className:"_4pel"},b("React").createElement(b("MessengerComposeViewHeader.react"),{className:"_4pen",forceHideClearButton:!1,onClear:this.$2,onAddRecipient:this.$3,onRemoveRecipient:this.$4,onResize:b("emptyFunction"),recipients:this.state.recipients,viewer:b("CurrentUser").getID()}),b("React").createElement(b("Image.react"),{className:"_4peo",src:this.props.screenshot}))),b("React").createElement(b("MessengerDialogFooter.react"),{leftContent:c},b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(b("MessengerDialogButton.react"),{action:"confirm",disabled:!this.state.recipients.size||this.state.sending,label:a,onClick:this.$5,type:"primary"})))};a.prototype.$8=function(){"use strict";b("MessengerDialogs.bs").removeDialog(),this.props.onClose&&this.props.onClose()};a.propTypes={gameID:c.string.isRequired,onClose:c.func,score:c.number,screenshot:c.string.isRequired,shown:c.bool.isRequired,title:c.node.isRequired};e.exports=a}),null);
__d("MessengerGameShareMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1096845470442042"};c.getQueryID=function(){"use strict";return"1395239747186826"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerGameShareDialog.react",["cx","fbt","AsyncRequest","CurrentUser","LayerFadeOnHide","MessengerComposeViewHeader.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerDialogTitleReact.re","MessengerGameDialogErrorMessage.react","MessengerGameDialogSendingSpinner.react","MessengerGameShareMutationWebGraphQLMutation","React","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component,l=b("MessengerDialogTitleReact.re").component;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={recipients:b("immutable").List(),sendError:null,sending:!1},this.$2=function(a){this.setState({recipients:this.state.recipients.push(a)})}.bind(this),this.$3=function(a){var b=this.state.recipients;this.setState({recipients:b["delete"](b.indexOf(a))})}.bind(this),this.$1=function(){this.setState({recipients:b("immutable").List()})}.bind(this),this.$4=function(){var a=this.state.recipients.map(function(a){return a.getUniqueID()}).toArray();new(b("AsyncRequest"))(b("MessengerGameShareMutationWebGraphQLMutation").getURI({thread_id:a,game_id:this.props.gameID})).setHandler(this.$5).send();this.setState({sending:!0,sendError:null})}.bind(this),this.$5=function(a){if(!a.error){this.setState({recipients:b("immutable").List(),sending:!1},function(){return b("MessengerDialogs.bs").removeDialog()});return}this.setState({sending:!1,sendError:a.error})}.bind(this),c}a.prototype.render=function(){"use strict";var a=h._("Send"),c;this.state.sending?c=b("React").createElement(b("MessengerGameDialogSendingSpinner.react"),null):this.state.sendError&&(c=b("React").createElement(b("MessengerGameDialogErrorMessage.react"),{error:this.state.sendError}));return b("React").createElement(b("MessengerDialog.react"),{shown:this.props.shown,behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0},b("React").createElement(k,null,b("React").createElement(l,null,this.props.title)),b("React").createElement(j,null,b("React").createElement(b("MessengerComposeViewHeader.react"),{className:"_1e1o",forceHideClearButton:!1,onClear:this.$1,onAddRecipient:this.$2,onRemoveRecipient:this.$3,onResize:b("emptyFunction"),recipients:this.state.recipients,viewer:b("CurrentUser").getID()})),b("React").createElement(b("MessengerDialogFooter.react"),{leftContent:c},b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Cancel"),onClick:b("MessengerDialogs.bs").removeDialog,type:"secondary",use:"default"}),b("React").createElement(b("MessengerDialogButton.react"),{action:"confirm",disabled:!this.state.recipients.size||this.state.sending,label:a,onClick:this.$4,type:"primary",use:"default"})))};a.propTypes={gameID:c.string.isRequired,shown:c.bool.isRequired,title:c.node.isRequired};e.exports=a}),null);
__d("InstantGamesCrossSiteUtils",["Arbiter","AsyncDialog","AsyncRequest","CloseButton.react","FantaTabActions","InstantGamesGateKeepers","Link.react","MessengerDialogs.bs","MessengerEnvironment","MessengerGameScoreShareDialog.react","MessengerGameShareDialog.react","PlatformDialogClient","SimpleXUIDialog","Tooltip.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUISpinner.react"],(function(a,b,c,d,e,f){"use strict";a={subscribeOnce:function(a,c){return b("Arbiter").subscribeOnce([a],c)},subscribe:function(a,c){return b("Arbiter").subscribe([a],c)},unsubscribe:function(a){b("Arbiter").unsubscribe(a)},inform:function(a){b("Arbiter").inform([a])}};c={LoadingSpinner:b("XUISpinner.react"),CloseButton:b("CloseButton.react"),EventHandler:a,MessengerEnvironment:b("MessengerEnvironment"),MessengerDialogs:b("MessengerDialogs.bs"),MessengerGameScoreShareDialog:b("MessengerGameScoreShareDialog.react"),MessengerGameShareDialog:b("MessengerGameShareDialog.react"),SimpleXUIDialog:b("SimpleXUIDialog"),XUIDialogButton:b("XUIDialogButton.react"),XUIDialogCancelButton:b("XUIDialogCancelButton.react"),FantaTabActions:b("FantaTabActions"),InstantGamesGateKeepers:b("InstantGamesGateKeepers"),PlatformDialogClient:b("PlatformDialogClient"),IsMobile:function(){return!1},ResizePlayerToFitScreen:function(){},ResizeToFullScreen:function(){},Link:b("Link.react"),AsyncRequest:b("AsyncRequest"),AsyncDialog:b("AsyncDialog"),Tooltip:b("Tooltip.react")};e.exports=c}),null);