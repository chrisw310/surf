var lp_premium_exp=0,lp_enterpriseuser=0,lp_wote=0,lp_fete=0,lp_trueapi_trial_exp=0,lp_captcha_regexp=null,lp_shared_folder_keys_upload="",lp_shared_folder_keys_upload_counter=0,lp_look_for_invalid_types=!1,lp_found_invalid_type=!1;globalkey="";
function parsemobile(a,b,c,d,f,h,k,e,l,n,t,r,p,y,q,x,A,B,J,L,F,N,H,G,R,z,I,u,Q,C,O,W,P,X,V,Y,fa,Z,ba,ca,da,U){lp_look_for_invalid_types&&(lp_found_invalid_type=!1);msfids=[];r&&("undefined"==typeof r.neveraccounts&&(r.neveraccounts=[]),"undefined"==typeof r.nevergenerates&&(r.nevergenerates=[]),"undefined"==typeof r.neverformfills&&(r.neverformfills=[]),"undefined"==typeof r.neverautologins&&(r.neverautologins=[]),"undefined"==typeof r.nevershowicons&&(r.nevershowicons=[]),"undefined"==typeof r.onlyaccounts&&
(r.onlyaccounts=[]),"undefined"==typeof r.onlygenerates&&(r.onlygenerates=[]),"undefined"==typeof r.onlyformfills&&(r.onlyformfills=[]),"undefined"==typeof r.onlyautologins&&(r.onlyautologins=[]),"undefined"==typeof r.onlyshowicons&&(r.onlyshowicons=[]),"undefined"==typeof r.neverenablelp&&(r.neverenablelp=[]),"undefined"==typeof r.onlyenablelp&&(r.onlyenablelp=[]),"undefined"==typeof r.onlympwreuse&&(r.onlympwreuse=[]),"undefined"==typeof r.nevermpwreuse&&(r.nevermpwreuse=[]));0==d&&(lp_fete=lp_wote=
lp_trueapi_trial_exp=0,lp_shared_folder_keys_upload="",lp_shared_folder_keys_upload_counter=0);if(null==G||"undefined"==typeof G){G=g_local_key;if("undefined"==typeof g_local_key_hex||null==g_local_key_hex||0==g_local_key_hex.length)g_local_key_hex=AES.bin2hex(g_local_key);R=g_local_key_hex}var ka=0,S=h&&0<h.length?h.length-1:-1,la=l&&0<l.length?l.length-1:0,ma=!1;void 0!==W&&!W||"LPAV"==a.substring(0,4)||(d=b);B||(B=[]);B.maxid=0;Q||(Q=[]);var ha="";try{for(;d<b;){var D=a.substring(d,d+4),w=unserialize_num(a.substring(d+
4,d+8));if("ACCT"==D&&"error"!=z){var g=d+8,v={};g+=mget(a,g,v,"aid");g+=mget(a,g,v,"encname");v.name="undefined"==typeof parsedonotdecryptnames?lpmdec(v.encname,1,G,R,v.aid):v.encname;v.isHidden=z?z.isHidden:!1;g+=mget(a,g,v,"encgroup");v.group=lpmdec(v.encgroup,1,G,R,v.aid);z&&G!=g_local_key&&(v.group=""==v.group?z.decsharename:z.decsharename+"\\"+v.group);g+=mget(a,g,v,"url");g+=mget(a,g,v,"extra");g+=mget(a,g,v,"fav");g+=mget(a,g,v,"sharedfromaid");g+=mget(a,g,v,"username");g+=mget(a,g,v,"password");
g+=mget(a,g,v,"pwprotect");v.pwprotect="1"==v.pwprotect;g+=mget(a,g,v,"genpw");v.genpw="1"==v.genpw;g+=mget(a,g,v,"sn");v.sn="1"==v.sn;g+=mget(a,g,v,"last_touch");g+=mget(a,g,v,"autologin");v.autologin="1"==v.autologin;g+=mget(a,g,v,"never_autofill");v.never_autofill="1"==v.never_autofill;g+=mget(a,g,v,"realm_data");g+=mget(a,g,v,"fiid");g+=mget(a,g,v,"custom_js");g<d+w+8&&(g+=mget(a,g,v,"submit_id"));g<d+w+8&&(g+=mget(a,g,v,"captcha_id"));g<d+w+8&&(g+=mget(a,g,v,"urid"));g<d+w+8&&(g+=mget(a,g,v,
"basic_auth"));g<d+w+8&&(g+=mget(a,g,v,"method"));g<d+w+8&&(g+=mget(a,g,v,"action"));g<d+w+8&&(g+=mget(a,g,v,"groupid"));g<d+w+8&&(g+=mget(a,g,v,"deleted"));g<d+w+8&&(g+=mget(a,g,v,"attachkey"),g+=mget(a,g,v,"attachpresent"));g<d+w+8?(g+=mget(a,g,v,"individualshare"),v.individualshare="1"==v.individualshare):v.individualshare=!1;g<d+w+8?g+=mget(a,g,v,"notetype"):v.notetype="";g<d+w+8?g+=mget(a,g,v,"noalert"):v.noalert="";g<d+w+8?g+=mget(a,g,v,"last_modified_gmt"):v.last_modified_gmt="";g<d+w+8?g+=
mget(a,g,v,"hasbeenshared"):v.hasbeenshared="";g<d+w+8?g+=mget(a,g,v,"last_pwchange_gmt"):v.last_pwchange_gmt="";g<d+w+8?g+=mget(a,g,v,"created_gmt"):v.created_gmt="";g<d+w+8?g+=mget(a,g,v,"vulnerable"):v.vulnerable="";g<d+w+8?g+=mget(a,g,v,"pwch"):v.pwch="0";g<d+w+8?g+=mget(a,g,v,"breached"):v.breached="0";g<d+w+8?g+=mget(a,g,v,"template"):v.template="";v.fields=[];"undefined"!=typeof z&&null!=z&&G!=g_local_key&&(v.sharefolderid=z.id,0==z.give&&(v.sharedfromaid=1));if(O&&v.aid&&(v.aid==O||v.aid==
O.toString()))return v;v.sn?!k||O||v.isHidden?!O&&v.isHidden&&"undefined"!=typeof da&&null!=da&&da.push(v):k.push(v):h&&!O&&(S=h.length,h.push(v));ka++}else if("SPMT"==D)e&&(g=d+8,g+=mget(a,g,e,"login_site_prompt"),e.login_site_prompt="1"==e.login_site_prompt,g+=mget(a,g,e,"edit_site_prompt"),e.edit_site_prompt="1"==e.edit_site_prompt,g+=mget(a,g,e,"edit_sn_prompt"),e.edit_sn_prompt="1"==e.edit_sn_prompt,g+=mget(a,g,e,"view_pw_prompt"),e.view_pw_prompt="1"==e.view_pw_prompt,g+=mget(a,g,e,"view_ff_prompt"),
e.view_ff_prompt="1"==e.view_ff_prompt,g+=mget(a,g,e,"improve"),e.improve="1"==e.improve,g+=mget(a,g,e,"switch_identity_prompt"),e.switch_identity_prompt="1"==e.switch_identity_prompt,g+=mget(a,g,e,"switch_f_prompt"),e.switch_f_prompt="1"==e.switch_f_prompt,g<d+w+8?(g+=mget(a,g,e,"multifactor_reprompt"),e.multifactor_reprompt="1"==e.multifactor_reprompt):e.multifactor_reprompt=!1,g<d+w+8?(g+=mget(a,g,e,"company_login_site_prompt"),e.company_login_site_prompt="1"==e.company_login_site_prompt):e.company_login_site_prompt=
!1,g<d+w+8?(g+=mget(a,g,e,"company_copyview_site_prompt"),e.company_copyview_site_prompt="1"==e.company_copyview_site_prompt):e.company_copyview_site_prompt=!1);else if("PREF"==D)F&&(g=d+8,g+=mget(a,g,F,"allowmasterpasswordsave"),g+=mget(a,g,F,"logoffclosebrowser"),g+=mget(a,g,F,"logoffidle"),g<d+w+8&&(g+=mget(a,g,F,"noexport")),g<d+w+8&&(g+=mget(a,g,F,"logofflock")),g<d+w+8&&(g+=mget(a,g,F,"logoffscreen")),g<d+w+8&&(g+=mget(a,g,F,"logoffshutdown")),g<d+w+8&&(g+=mget(a,g,F,"sitepwlen")),g<d+w+8&&
(g+=mget(a,g,F,"hideidentities")),g<d+w+8&&(g+=mget(a,g,F,"savesitestopersonal")),g<d+w+8&&(g+=mget(a,g,F,"import")),g<d+w+8&&(g+=mget(a,g,F,"share")),g<d+w+8&&(g+=mget(a,g,F,"shareout")),g<d+w+8&&(g+=mget(a,g,F,"share_onlyfolders")),g<d+w+8&&(g+=mget(a,g,F,"sharedomain_allowed")),g<d+w+8&&(g+=mget(a,g,F,"revert")),g<d+w+8&&(g+=mget(a,g,F,"show_notes")),g<d+w+8&&(g+=mget(a,g,F,"show_fingerprint")),g<d+w+8&&(g+=mget(a,g,F,"bookmarklets")),g<d+w+8&&(g+=mget(a,g,F,"hint")),g<d+w+8&&(g+=mget(a,g,F,"account_recovery")),
g<d+w+8&&(g+=mget(a,g,F,"link_personal")),g<d+w+8&&(g+=mget(a,g,F,"multifactor_disable")),g<d+w+8&&(g+=mget(a,g,F,"show_reprompt_on_copy")),g<d+w+8&&(g+=mget(a,g,F,"requirechangereuse")),g<d+w+8&&(g+=mget(a,g,F,"logname")),g<d+w+8&&(g+=mget(a,g,F,"show_formfills")),g<d+w+8&&(g+=mget(a,g,F,"accountselectionbasedonemail")));else if("LPFF"==D&&"error"!=z){if(l){g=d+8;var m={};g+=mget(a,g,m,"ffid");g+=mget(a,g,m,"profiletype");g+=mget(a,g,m,"profilename");g+=mget(a,g,m,"profilelanguage");g+=mget(a,g,
m,"firstname");g+=mget(a,g,m,"middlename");g+=mget(a,g,m,"lastname");g+=mget(a,g,m,"email");g+=mget(a,g,m,"company");g+=mget(a,g,m,"ssn");g+=mget(a,g,m,"birthday");g+=mget(a,g,m,"address1");g+=mget(a,g,m,"address2");g+=mget(a,g,m,"city");g+=mget(a,g,m,"state");g+=mget(a,g,m,"state_name");g+=mget(a,g,m,"zip");g+=mget(a,g,m,"country");g+=mget(a,g,m,"country_cc3l");g+=mget(a,g,m,"country_name");g+=mget(a,g,m,"mobilephone");g+=mget(a,g,m,"mobilephone3lcc");g+=mget(a,g,m,"mobileext");g+=mget(a,g,m,"evephone");
g+=mget(a,g,m,"evephone3lcc");g+=mget(a,g,m,"eveext");g+=mget(a,g,m,"phone");g+=mget(a,g,m,"phone3lcc");g+=mget(a,g,m,"phoneext");g+=mget(a,g,m,"fax");g+=mget(a,g,m,"fax3lcc");g+=mget(a,g,m,"faxext");g+=mget(a,g,m,"ccnum");g+=mget(a,g,m,"ccexp");g+=mget(a,g,m,"cccsc");g+=mget(a,g,m,"username");g+=mget(a,g,m,"address3");g+=mget(a,g,m,"title");g+=mget(a,g,m,"gender");g+=mget(a,g,m,"driverlicensenum");g+=mget(a,g,m,"taxid");g+=mget(a,g,m,"pwprotect");m.pwprotect="1"==m.pwprotect;g+=mget(a,g,m,"bankname");
g+=mget(a,g,m,"bankacctnum");g+=mget(a,g,m,"bankroutingnum");g+=mget(a,g,m,"timezone");g+=mget(a,g,m,"county");g+=mget(a,g,m,"ccstart");g+=mget(a,g,m,"ccname");g+=mget(a,g,m,"ccissuenum");g+=mget(a,g,m,"notes");g<d+w+8&&(g+=mget(a,g,m,"lastname2"));g<d+w+8&&(g+=mget(a,g,m,"mobileemail"),g+=mget(a,g,m,"firstname2"),g+=mget(a,g,m,"firstname3"),g+=mget(a,g,m,"lastname3"));m.creditmon=0;g<d+w+8&&(g+=mget(a,g,m,"creditmon"),m.creditmon="1"==m.creditmon?1:0);m.custom_fields=[];"undefined"!=typeof z&&null!=
z&&G!=g_local_key?(m.sharefolderid=z.id,0==z.give&&(m.sharedfromaid=1),m.group=z.decsharename):m.group="";la=l.length;l.push(m)}}else if("IDNT"==D)n&&(g=d+8,m={},g+=mget(a,g,m,"iid"),g+=mget(a,g,m,"iname"),g+=mget(a,g,m,"aids"),g+=mget(a,g,m,"ffids"),g+=mget(a,g,m,"pw_prompt"),m.pw_prompt="1"==m.pw_prompt,g<d+w+8?g+=mget(a,g,m,"appaids"):m.appaids="",n.push(m));else if("PNDG"==D){if(x){g=d+8;m={};g+=mget(a,g,m,"id");g+=mget(a,g,m,"fiid");g+=mget(a,g,m,"sharerusername");g+=mget(a,g,m,"sharedfromaid");
g+=mget(a,g,m,"sharemessage");g+=mget(a,g,m,"sharekeyenchex");g+=mget(a,g,m,"sharekeyenchexsig");g+=mget(a,g,m,"sharename");g+=mget(a,g,m,"sharegroup");g+=mget(a,g,m,"username");g+=mget(a,g,m,"password");g+=mget(a,g,m,"extra");g+=mget(a,g,m,"shareautoaccept");m.shareafids={};var aa=[];g+=mget(a,g,aa,"numafids");for(var M=0;M<aa.numafids;M++){var T=[];g+=mget(a,g,T,"afid");g+=mget(a,g,T,"value");m.shareafids[T.afid]=T.value}g+=mget(a,g,m,"attachkey");g+=mget(a,g,m,"save_all");g<d+w+8?g+=mget(a,g,m,
"template"):m.template="";g<d+w+8?g+=mget(a,g,m,"emailverified"):m.emailverified="-1";m.save_all="1"===m.save_all;x.push(m)}}else if("SHAP"==D){if(A){g=d+8;m=[];for(g+=mget(a,g,m,"aid");g<d+w+8;)T=[],g+=mget(a,g,T,"name"),g+=mget(a,g,T,"value"),m[T.name]=T.value;A.push(m)}}else if("FFCF"==D&&"error"!=z)l&&(g=d+8,m={},g+=mget(a,g,m,"cfid"),g+=mget(a,g,m,"text"),g+=mget(a,g,m,"value"),g+=mget(a,g,m,"alttext"),l[la].custom_fields.push(m));else if("EQDN"==D)t&&(g=d+8,m=[],g+=mget(a,g,m,"edid"),g+=mget(a,
g,m,"domain"),m.domain=AES.hex2url(m.domain),"undefined"==typeof t[m.edid]&&(t[m.edid]=[]),t[m.edid][t[m.edid].length]=m.domain,t[m.domain]=m.edid);else if("URUL"==D)J&&(g=d+8,m=[],g+=mget(a,g,m,"url"),g+=mget(a,g,m,"exacthost"),g<d+w+8?g+=mget(a,g,m,"exactport"):m.exactport="0",g<d+w+8?g+=mget(a,g,m,"case_insensitive"):m.case_insensitive="0",m.url=AES.hex2url(m.url),"1"==m.case_insensitive&&(m.url=m.url.toLowerCase()),J.push(m));else if("GRPI"!=D)if("NEVR"==D)r&&(g=d+8,m=[],g+=mget(a,g,m,"type"),
g+=mget(a,g,m,"url"),m.url=AES.hex2url(m.url),"0"==m.type?r.neveraccounts.push(m.url):"1"==m.type?r.nevergenerates.push(m.url):"2"==m.type?r.neverformfills.push(m.url):"3"==m.type?r.neverautologins.push(m.url):"6"==m.type?r.nevershowicons.push(m.url):"8"==m.type?r.neverenablelp.push(m.url):"9"==m.type?r.nevermpwreuse.push(m.url):"10000"==m.type?r.onlyaccounts.push(m.url):"10001"==m.type?r.onlygenerates.push(m.url):"10002"==m.type?r.onlyformfills.push(m.url):"10003"==m.type?r.onlyautologins.push(m.url):
"10006"==m.type?r.onlyshowicons.push(m.url):"10008"==m.type&&r.onlyenablelp.push(m.url));else if(("ACFL"==D||"ACOF"==D)&&"error"!=z){if(p){g=d+8;var K={};K.otherfield="ACOF"==D;g+=mget(a,g,K,"name");K.name=AES._utf8_decode(K.name);g+=mget(a,g,K,"type");g+=mget(a,g,K,"value");"select-one"==K.type&&(K.value=AES._utf8_decode(K.value));g+=mget(a,g,K,"checked");K.checked="1"==K.checked;g+=mget(a,g,K,"formname");K.formname=AES._utf8_decode(K.formname);g<d+w+8&&(g+=mget(a,g,K,"urid"));g<d+w+8&&(g+=mget(a,
g,K,"otherlogin"));g<d+w+8&&(g+=mget(a,g,K,"url"));0<=S&&S<h.length&&("undefined"!=typeof lp_captcha_regexp&&lp_captcha_regexp&&("undefined"==typeof h[S].captcha_id||""==h[S].captcha_id)&&"text"==K.type&&lp_captcha_regexp.exec(K.name)&&(h[S].captcha_id=K.name),h[S].save_all=K.otherfield&&0==h[S].username.length&&0==h[S].password.length,h[S].fields.push(K))}}else if("PREM"==D)lp_premium_exp=response_substring(a,d+8,d+8+w);else if("TATE"==D)lp_trueapi_trial_exp=response_substring(a,d+8,d+8+w);else if("WOTE"==
D)lp_wote=response_substring(a,d+8,d+8+w);else if("FETE"==D)lp_fete=response_substring(a,d+8,d+8+w);else if("ENCU"==D)q=response_substring(a,d+8,d+8+w);else if("PRIK"==D)g_rsaprivatekeyenchex=response_substring(a,d+8,d+8+w);else if("MXID"==D){var na=parseInt(response_substring(a,d+8,d+8+w));na>B.maxid&&(B.maxid=na)}else if("ATVR"==D){var ta=parseInt(response_substring(a,d+8,d+8+w));Q||(Q=[]);Q.attachversion=ta}else if("SHAR"==D||"SHAL"==D||"HSHR"==D){m="HSHR"==D;g=d+8;aa="undefined"!=typeof N&&null!=
N&&""!=N;if(null!=H){var E={};g+=mget(a,g,E,"id");g+=mget(a,g,E,"sharekey");g+=mget(a,g,E,"sharename");g+=mget(a,g,E,"readonly");g+=mget(a,g,E,"give");g<d+w+8?g+=mget(a,g,E,"sharekeyaes"):E.sharekeyaes="";g<d+w+8?g+=mget(a,g,E,"associative"):E.associative="0";g<d+w+8?g+=mget(a,g,E,"accepted"):E.accepted="1";if("0"===E.accepted)fa&&fa.push(E);else if("function"==typeof lpdbg&&lpdbg("sharedfolders","Attempting to add shared folder: "+E.id),aa||""!=E.sharekeyaes){M=null;try{"SHAL"==D&&null==M&&""!=E.sharekeyaes?
(M=lpmdec(E.sharekeyaes,!0,ha),E.linkedshare="1"):null==M&&""!=E.sharekeyaes&&(M=lpmdec(E.sharekeyaes,!0),"1"==E.associative&&(ha=AES.hex2bin(M)));if((null==M||""==M)&&aa){"function"==typeof lpusexpcomencrypt&&lpusexpcomencrypt()&&"function"==typeof lpxpcomobj.xCryptoRSADecrypt&&(M=AES.hex2bin(lpxpcomobj.xCryptoRSADecrypt(N,E.sharekey)),null!=M&&""!=M||"function"!=typeof lpdbg||(logMissingSharedFolder(Error("Share key decrypt failed"),g_uid,E.id),lpdbg("sharedfolders","Share key decrypt failed")));
null==M&&"function"==typeof have_nplastpass&&have_nplastpass()&&"undefined"!=typeof g_nplastpass&&"function"==typeof g_nplastpass.xCryptoRSADecrypt&&(M=AES.hex2bin(g_nplastpass.xCryptoRSADecrypt(N,E.sharekey)));if(null==M||""==M){var oa=new RSAKey;parse_private_key(oa,N)&&(M=oa.decrypt(E.sharekey),"1"==E.associative&&(ha=AES.hex2bin(M)))}null!=M&&""!=M&&"function"==typeof crypto_btoa&&(E.sharekeyaes=lpmenc(M,!0),lp_shared_folder_keys_upload+="&shareid"+lp_shared_folder_keys_upload_counter+"="+encodeURIComponent(E.id),
lp_shared_folder_keys_upload+="&sharekey"+lp_shared_folder_keys_upload_counter+"="+encodeURIComponent(E.sharekey),lp_shared_folder_keys_upload+="&sharekeyaes"+lp_shared_folder_keys_upload_counter+"="+encodeURIComponent(crypto_btoa(E.sharekeyaes)),lp_shared_folder_keys_upload_counter++)}if(null!=M&&""!=M){var ia=AES.hex2bin(M),ja=lpmdec(E.sharename,0,ia,M);E.key=ia;E.decsharename=ja;v={};v.aid=E.id;v.name="";v.group=ja;v.url=AES.url2hex("http://group");v.sharefolderid=E.id;v.fields=[];v.otherfields=
[];if(O&&v.aid&&(v.aid==O||v.aid==O.toString()))return v;O||m?!O&&m&&"undefined"!=typeof ba&&null!=ba&&ba.push(v):h.push(v);G=ia;R=M;z=E;z.isHidden=m;O||m?!O&&m&&"undefined"!=typeof ca&&null!=ca&&ca.push(E):H.push(E);"function"==typeof lpdbg&&lpdbg("sharedfolders","Added shared folder: "+ja+" ("+E.id+")")}else z="error",logMissingSharedFolder(Error("Cannot decrypt share key",g_uid,E.id)),"function"==typeof lpdbg&&lpdbg("sharedfolders","Cannot decrypt share key: "+E.sharekey)}catch(ea){logMissingSharedFolder(ea,
g_uid,E.id),"undefined"!=typeof console&&"function"==typeof console.error?console.error(ea):"function"==typeof lpdbg&&lpdbg("sharedfolders",ea),z="error"}}else z="error"}else z="error";"error"==z&&(logMissingSharedFolder(Error("SHARE ERROR"),g_uid,E.id),"function"==typeof lpdbg&&lpdbg("sharedfolders","SHARE ERROR"),S=-1);"undefined"!=typeof N&&null!=N&&""!=N||null==H||0!=H.length||(E=[],E.id=0,H.push(E))}else if("MSFI"==D)g=d+8,"undefined"==typeof g_msfi_count&&(g_msfi_count=0),m=[],g+=mget(a,g,m,
"shareid"),g+=mget(a,g,m,"uid"),g+=mget(a,g,m,"key"),foundmsfi=!0,msfids[g_msfi_count]=m,g_msfi_count++;else if("ENDM"==D)ma=!0;else if("ATTA"==D)u&&(g=d+8,m={},g+=mget(a,g,m,"id"),g+=mget(a,g,m,"parent"),g+=mget(a,g,m,"mimetype"),g+=mget(a,g,m,"storagekey"),g+=mget(a,g,m,"size"),g+=mget(a,g,m,"filename"),m.mimetype=m.mimetype.toLowerCase(),u.push(m));else if("AACT"==D&&"error"!=z)I&&(g=d+8,m={},g+=mget(a,g,m,"appaid"),g+=mget(a,g,m,"appname"),g+=mget(a,g,m,"extra"),g+=mget(a,g,m,"encname"),m.name=
lpmdec(m.encname,1,G,R),g+=mget(a,g,m,"encgroup"),m.group=lpmdec(m.encgroup,1,G,R),z&&G!=g_local_key&&(m.group=""==m.group?z.decsharename:z.decsharename+"\\"+m.group),g+=mget(a,g,m,"last_touch"),g+=mget(a,g,m,"fiid"),g+=mget(a,g,m,"pwprotect"),m.pwprotect="1"==m.pwprotect,g+=mget(a,g,m,"fav"),g+=mget(a,g,m,"script"),g+=mget(a,g,m,"wintitle"),g+=mget(a,g,m,"wininfo"),g+=mget(a,g,m,"exeversion"),g+=mget(a,g,m,"autologin"),g+=mget(a,g,m,"warnversion"),m.warnversion="1"==m.warnversion,g+=mget(a,g,m,"exehash"),
m.fields=[],m.logins=[],"undefined"!=typeof z&&null!=z&&G!=g_local_key&&(m.sharefolderid=z.id,0==z.give&&(m.sharedfromaid=1)),I.push(m));else if("AACF"==D&&"error"!=z)I&&0<I.length&&(g=d+8,K={},g+=mget(a,g,K,"id"),g+=mget(a,g,K,"value"),g+=mget(a,g,K,"type"),I[I.length-1].fields.push(K));else if("ENTU"==D)g_enterpriseuser=lp_enterpriseuser=response_substring(a,d+8,d+8+w);else if("ENTM"==D)g_enterprisemodel=response_substring(a,d+8,d+8+w);else if("ILPR"==D)g_is_legacy_premium=response_substring(a,
d+8,d+8+w);else if("ENTR"==D)g_enterpriseuserrole=response_substring(a,d+8,d+8+w);else if("ENTA"==D)g_iscompanyadmin="1"===response_substring(a,d+8,d+8+w);else if("PSHD"==D||"PSHE"==D)C&&(g=d+8,m=[],g+=mget(a,g,m,"ppsid"),g+=mget(a,g,m,"data"),C.push(m));else if("EMER"===D||"EMEE"===D){if(P||X)m={},g=d+8,g+=mget(a,g,m,"username"),g+=mget(a,g,m,"accepted"),g+=mget(a,g,m,"confirmed"),g+=mget(a,g,m,"hours_to_override"),g+=mget(a,g,m,"override_date"),g+=mget(a,g,m,"allowed_access"),g+=mget(a,g,m,"linked"),
"EMER"===D&&P?P.push(m):"EMEE"===D&&X&&X.push(m)}else if("TOTP"==D)V&&(g=d+8,g+=mget(a,g,V,"multifactorenabled"),g+=mget(a,g,V,"lastpassauthenabled"),g+=mget(a,g,V,"domains"),V.domains=JSON.parse(V.domains));else if("TMPL"==D){if(Y){m={data:[]};g=d+4;g+=mget(a,g,m,"data",!1);var qa=JSON.parse(AES._utf8_decode(m.data));qa&&qa.forEach(function(a){a.fields=JSON.parse(a.fields);Y.push(a)})}}else if("RMDS"==D){m={data:[]};g=d+4;g+=mget(a,g,m,"data",!1);var ra=JSON.parse(m.data);ra&&ra.forEach(function(a){Z&&
"function"==typeof Z.filter&&0===Z.filter(function(b){return b.id===a.id}).length&&(a.content=JSON.parse(a.content),Z.push(a))})}else if("BVER"==D)U&&(U.version=parseInt(response_substring(a,d+8,d+8+w)),U.version||(U.version=0));else if(lp_look_for_invalid_types&&!D.match(/^[A-Z]{4}$/)){lp_found_invalid_type=!0;return}d+=w+8;if(-1!=c&&ka>=c){setTimeout(function(){parsemobile(a,b,c,d,f,h,k,e,l,n,t,r,p,y,q,x,A,B,J,L,F,N,H,G,R,z,I,u,Q,C,O,W,P,X,V,Y,fa,Z,ba,ca,da)},0);return}}}catch(ea){}0<lp_shared_folder_keys_upload_counter&&
"undefined"!=typeof LP&&"function"==typeof LP.lpMakeRequest&&"string"==typeof LP.lp_base&&LP.lpMakeRequest(LP.lp_base+"shared_folder_keys_upload.php",lp_shared_folder_keys_upload);P&&P.forEach&&P.forEach(function(a){"1"===a.allowed_access&&"1"!==a.linked&&BackgroundServer.emergencyAccess.requestAccess({params:{sharer:a}})});var sa;f&&(sa=f(h,k,e,l,n,t,r,ma,a,y,q,x,A,B,J,L,F,H,I,u,Q,C,Y));U=get_version(a);-1!==U&&("undefined"!=typeof g_local_accts_version&&-1===g_local_accts_version&&"undefined"!=
typeof Topics&&Topics.get(Topics.ACCTS_VERSION_UPDATED).publish(U),"undefined"!=typeof Topics&&Topics.get(Topics.BLOB_UPDATED).publish(),g_local_accts_version=U);"undefined"!==typeof LPServer&&"undefined"!==typeof g_emer_sharees&&g_emer_sharees.length&&LPServer.emergencyAccess.checkEmergencyAccessHealth();return sa}
function search_backup_for_aid(a,b){lpReadAcctsData&&lpReadAcctsData(!1,null,!0,function(c){c=parsemobile(c,c.length,100,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,g_shares,null,null,null,null,null,null,null,a);b&&"function"==typeof b&&b(c)})}function response_substring(a,b,c){return(" "+a.substring(b,c)).substring(1)}
function mget(a,b,c,d,f,h,k){var e=unserialize_num(a.substring(b,b+4));c[d]=response_substring(a,b+4,b+4+e);f&&(c[d]=lpmdec(c[d],1,h,k));return 4+e}var mdec_cache={},mdec_cache_key=null;
function lpmdec(a,b,c,d,f){if("undefined"==typeof a||null==a||0==a.length)return"";if("undefined"!=typeof c&&c!=g_local_key){"undefined"!=typeof d&&d||(d=AES.bin2hex(c));if(f&&"undefined"!=typeof mdec_cache[f+a])return mdec_cache[f+a];b=mdec(a,b,c,d);f&&(mdec_cache[f+a]=b);return b}"undefined"!=typeof g_local_key&&mdec_cache_key!=g_local_key&&(mdec_cache={},mdec_cache_key=g_local_key);if("undefined"!=typeof mdec_cache[f+a])return mdec_cache[f+a];b=mdec(a,b);f&&(mdec_cache[f+a]=b);return b}
function mdec(a,b,c,d){if("undefined"==typeof a||null==a||0==a.length)return"";if("string"!=typeof g_local_key||0==g_local_key.length){if("undefined"==typeof ischrome||lploggedin)alert("No encryption key found, forcing logout!"),window.location.href="../logout.php?nk_dec=1&mobile=1";return""}var f=g_local_key;if("undefined"==typeof g_local_key_hex||null==g_local_key_hex||0==g_local_key_hex.length)g_local_key_hex=AES.bin2hex(g_local_key);var h=g_local_key_hex;"undefined"!=typeof c&&null!=c&&"undefined"!=
typeof d&&null!=d&&(f=c,h=d);try{if(b?"!"==a.charAt(0)&&1==a.length%16&&32<a.length:"!"==a.charAt(0)){if("function"==typeof lpusexpcomencrypt&&lpusexpcomencrypt()&&"function"==typeof lpxpcomobj.decryptcbc)return b&&(a="!"+btoa(a.substring(1,17))+"|"+btoa(a.substring(17))),lpxpcomobj.decryptcbc(h,a);if("function"==typeof have_nplastpass&&have_nplastpass()&&"undefined"!=typeof g_nplastpass&&"function"==typeof g_nplastpass.decryptcbc)return b&&(a="!"+btoa(a.substring(1,17))+"|"+btoa(a.substring(17))),
g_nplastpass.decryptcbc(h,a);if("undefined"!=typeof document&&document.getElementById("lpplugin")&&"function"==typeof document.getElementById("lpplugin").decrypt)return b&&(a="!"+btoa(a.substring(1,17))+"|"+btoa(a.substring(17))),document.getElementById("lpplugin").decrypt(h,a);var k=AES.StringToKeyIv(f,256);c=[];for(var e=0;e<k.key.length;++e)c[e]=k.key[e];k=[];if(b){for(e=1;17>e;++e)k[e-1]=a.charCodeAt(e);var l=[];for(e=17;e<a.length;e++)l[e-17]=a.charCodeAt(e)}else{var n=a.indexOf("|");if(-1!=
n){var t=atob(a.substring(1,n));for(e=0;16>e;++e)k[e]=t.charCodeAt(e);l=a.substring(n+1)}}return AES.Decrypt({key:c,iv:k,data:l,b64:!b,bits:256,mode:"cbc"})}if("function"==typeof lpusexpcomencrypt&&lpusexpcomencrypt())return lpxpcomobj.decrypt(h,b?btoa(a):a);if("function"==typeof have_nplastpass&&have_nplastpass()&&"undefined"!=typeof g_nplastpass&&"function"==typeof g_nplastpass.decrypt)return g_nplastpass.decrypt(h,b?btoa(a):a);if("undefined"!=typeof document&&document.getElementById("lpplugin")&&
"function"==typeof document.getElementById("lpplugin").decrypt)return document.getElementById("lpplugin").decrypt(h,b?btoa(a):a);if(b){l=[];for(e=0;e<a.length;e++)l[e]=a.charCodeAt(e);var r=!1}else l=a,r=!0;return AES.Decrypt({pass:f,data:l,b64:r,mode:"ecb",bits:256})}catch(p){return"ERROR: AES mobile bug 2"}}function unserialize_num(a){for(var b=0,c=0,d=3;0<=d;d--){var f=a.charCodeAt(d);b+=f<<c;c+=8}return b}
function get_version(a,b){b||(b="LPAV");var c=-1;a&&0===a.indexOf(b)&&(b=unserialize_num(a.substring(4,8)),c=response_substring(a,8,8+b));return parseInt(c)}function lpmenc(a,b,c){return"undefined"==typeof a||null==a||0==a.length?"":menc(a,b,c?c:g_local_key)}
function menc(a,b,c){c=c?c:g_local_key;if("undefined"==typeof a||null==a||0==a.length||"string"!=typeof c||0==c.length)return"";try{if("function"==typeof lpusexpcomencrypt&&lpusexpcomencrypt()&&"function"==typeof lpxpcomobj.encryptcbc){a=lpxpcomobj.encryptcbc(lp_bin2hex(c),a);if(b){var d=a.indexOf("|");-1!=d&&(a="!"+atob(a.substring(1,d))+atob(a.substring(d+1)))}return a}if("function"==typeof have_nplastpass&&have_nplastpass()&&"undefined"!=typeof g_nplastpass&&"function"==typeof g_nplastpass.encryptcbc)return a=
g_nplastpass.encryptcbc(AES.bin2hex(c),a),b&&(d=a.indexOf("|"),-1!=d&&(a="!"+atob(a.substring(1,d))+atob(a.substring(d+1)))),a;var f=AES.StringToKeyIv(c,256);c=[];for(d=0;d<f.key.length;++d)c[d]=f.key[d];var h=AES.CreateIV(16);a=AES.Encrypt({key:c,iv:h.arr,data:a,b64:!b,bits:256,mode:"cbc"});f="!";if(b)for(f+=h.str,d=0;d<a.length;d++){var k=a[d];0>k&&(k+=256);f+=String.fromCharCode(k)}else f+=btoa(h.str)+"|"+a;return f}catch(e){return"ERROR: AES mobile bug"}}
function serialize_num(a){for(var b="",c=1;4>=c;c++)b=String.fromCharCode(a%256)+b,a>>=8;return b}function serialize_str(a){null==a&&(a="");"number"==typeof a&&(a=""+a);return serialize_num(a.length)+a}function get_digits(a){return"string"==typeof a?a.replace(/\D/g,""):parseInt(a)}
function flattenshare(a){a=serialize_str(a.id)+serialize_str(a.sharekey)+serialize_str(a.sharename)+serialize_str(a.readonly)+serialize_str(a.give)+serialize_str(a.sharekeyaes)+serialize_str(a.associative)+serialize_str(a.accepted);return"SHAR"+serialize_str(a)}var g_maxid;
function flattendata(a,b,c,d,f,h,k,e,l,n,t,r,p,y,q,x,A,B,J,L,F,N,H,G,R){g_maxid=p;"number"!=typeof g_maxid&&(g_maxid="undefined"!=typeof g_maxid?parseInt(g_maxid):0);a="LPAV"+serialize_str(a);l&&0!=l&&(a+="PREM"+serialize_str(l));lp_trueapi_trial_exp&&0!=lp_trueapi_trial_exp&&(a+="TATE"+serialize_str(lp_trueapi_trial_exp));lp_wote&&0!=lp_wote&&(a+="WOTE"+serialize_str(lp_wote));lp_fete&&0!=lp_fete&&(a+="FETE"+serialize_str(lp_fete));"undefined"!=typeof n&&""!=n&&(a+="ENCU"+serialize_str(n));a+="CBCU"+
serialize_str("1");B&&0!=B&&(a+="ENTU"+serialize_str(B));"undefined"!=typeof g_enterprisemodel&&g_enterprisemodel&&0!==g_enterprisemodel&&(a+="ENTM"+serialize_str(g_enterprisemodel));"undefined"!=typeof g_is_legacy_premium&&1==g_is_legacy_premium&&(a+="ILPR"+serialize_str("1"));"undefined"!=typeof g_enterpriseuserrole&&g_enterpriseuserrole&&""!=g_enterpriseuserrole&&(a+="ENTR"+serialize_str(g_enterpriseuserrole));g_iscompanyadmin&&(a+="ENTA"+serialize_str("1"));var z={},I=0;l=[];n=[];B=[];for(var u in b)get_digits(u)==
u&&("undefined"!=typeof b[u].sharefolderid?(p=b[u].sharefolderid,"undefined"==typeof l[p]&&(l[p]=[]),l[p].push(b[u])):(p="undefined"!=typeof b[u].group?b[u].group:"",""!=p&&("undefined"==typeof z[p]&&(z[p]=I,++I),b[u].groupid=z[p]),a+=flattensite(b[u])));for(u in c)get_digits(u)==u&&("undefined"!=typeof c[u].sharefolderid?(p=c[u].sharefolderid,"undefined"==typeof l[p]&&(l[p]=[]),l[p].push(c[u])):(p="undefined"!=typeof c[u].group?c[u].group:"",""!=p&&("undefined"==typeof z[p]&&(z[p]=I,++I),c[u].groupid=
z[p]),a+=flattensite(c[u])));b=""+serialize_str(d.login_site_prompt?"1":"0");b+=serialize_str(d.edit_site_prompt?"1":"0");b+=serialize_str(d.edit_sn_prompt?"1":"0");b+=serialize_str(d.view_pw_prompt?"1":"0");b+=serialize_str(d.view_ff_prompt?"1":"0");b+=serialize_str(d.improve?"1":"0");b+=serialize_str(d.switch_identity_prompt?"1":"0");b+=serialize_str(d.switch_f_prompt?"1":"0");b+=serialize_str(d.multifactor_reprompt?"1":"0");b+=serialize_str(d.company_login_site_prompt?"1":"0");b+=serialize_str(d.company_copyview_site_prompt?
"1":"0");a+="SPMT"+serialize_str(b);if(q){d=!1;for(u in q){d=!0;break}d&&(b=""+serialize_str(q.allowmasterpasswordsave),b+=serialize_str(q.logoffclosebrowser),b+=serialize_str(q.logoffidle),"undefined"==typeof q.noexport&&(q.noexport="0"),b+=serialize_str(q.noexport),"undefined"==typeof q.logofflock&&(q.logofflock="0"),b+=serialize_str(q.logofflock),"undefined"==typeof q.logoffscreen&&(q.logoffscreen="0"),b+=serialize_str(q.logoffscreen),"undefined"==typeof q.logoffshutdown&&(q.logoffshutdown="0"),
b+=serialize_str(q.logoffshutdown),"undefined"==typeof q.sitepwlen&&(q.sitepwlen=""),b+=serialize_str(q.sitepwlen),"undefined"==typeof q.hideidentities&&(q.hideidentities="0"),b+=serialize_str(q.hideidentities),"undefined"==typeof q.savesitestopersonal&&(q.savesitestopersonal=""),b+=serialize_str(q.savesitestopersonal),"undefined"==typeof q["import"]&&(q["import"]=""),b+=serialize_str(q["import"]),"undefined"==typeof q.share&&(q.share=""),b+=serialize_str(q.share),"undefined"==typeof q.shareout&&
(q.shareout=""),b+=serialize_str(q.shareout),"undefined"==typeof q.share_onlyfolders&&(q.share_onlyfolders=""),b+=serialize_str(q.share_onlyfolders),"undefined"==typeof q.sharedomain_allowed&&(q.sharedomain_allowed=""),b+=serialize_str(q.sharedomain_allowed),"undefined"==typeof q.revert&&(q.revert=""),b+=serialize_str(q.revert),"undefined"==typeof q.show_notes&&(q.show_notes=""),b+=serialize_str(q.show_notes),"undefined"==typeof q.show_fingerprint&&(q.show_fingerprint=""),b+=serialize_str(q.show_fingerprint),
"undefined"==typeof q.bookmarklets&&(q.bookmarklets=""),b+=serialize_str(q.bookmarklets),"undefined"==typeof q.hint&&(q.hint=""),b+=serialize_str(q.hint),"undefined"==typeof q.account_recovery&&(q.account_recovery=""),b+=serialize_str(q.account_recovery),"undefined"==typeof q.link_personal&&(q.link_personal=""),b+=serialize_str(q.link_personal),"undefined"==typeof q.multifactor_disable&&(q.multifactor_disable=""),b+=serialize_str(q.multifactor_disable),"undefined"==typeof q.show_reprompt_on_copy&&
(q.show_reprompt_on_copy=""),b+=serialize_str(q.show_reprompt_on_copy),"undefined"==typeof q.requirechangereuse&&(q.requirechangereuse=""),b+=serialize_str(q.requirechangereuse),"undefined"==typeof q.logname&&(q.logname="0"),b+=serialize_str(q.logname),b+=serialize_str(q.show_formfills),"undefined"==typeof q.accountselectionbasedonemail&&(q.accountselectionbasedonemail=""),b+=serialize_str(q.accountselectionbasedonemail),a+="PREF"+serialize_str(b))}if(f)for(q=f.length,u=0;u<q;u++)d=f[u],b="","undefined"!=
typeof d.sharefolderid?(p=d.sharefolderid,"undefined"==typeof B[p]&&(B[p]=[]),B[p].push(d)):a+=flattenff(d);if(k)for(var Q in k)"function"==typeof k[Q]||Q.match(/^[0-9]+$/)||(f=k[Q],b="",b+=serialize_str(f),b+=serialize_str(AES.url2hex(Q)),a+="EQDN"+serialize_str(b));if(h)for(q=h.length,u=0;u<q;u++)k=h[u],b="",b+=serialize_str(k.iid),b+=serialize_str(k.iname),b+=serialize_str(k.aids),b+=serialize_str(k.ffids),b+=serialize_str(("undefined"!=typeof k.pw_prompt?k.pw_prompt:"undefined"!=typeof k.pwprotect&&
k.pwprotect)?"1":"0"),b+=serialize_str(k.appaids),a+="IDNT"+serialize_str(b);if(t)for(h=t.length,u=0;u<h;u++){k=t[u];b="";b+=serialize_str(k.id);b+=serialize_str(k.fiid);b+=serialize_str(k.sharerusername);b+=serialize_str(k.sharedfromaid);b+=serialize_str(k.sharemessage);b+=serialize_str(k.sharekeyenchex);b+=serialize_str(k.sharekeyenchexsig);b+=serialize_str(k.sharename);b+=serialize_str(k.sharegroup);b+=serialize_str(k.username);b+=serialize_str(k.password);b+=serialize_str(k.extra);b+=serialize_str(k.shareautoaccept);
b+=serialize_str(k.emailverified);Q=0;f="";for(var C in k.shareafids)Q++,f+=serialize_str(C),f+=serialize_str(k.shareafids[C]);b+=serialize_str(Q);b+=f;a+="PNDG"+serialize_str(b)}try{if(r)for(var O in r){var W=r[O][0];b="";b+=serialize_str(O);for(var P in W)"aid"!=P&&(b+=serialize_str(P),b+=serialize_str(W[P]));a+="SHAP"+serialize_str(b)}}catch(X){}if(e){for(u=0;"undefined"!=typeof e.neveraccounts&&u<e.neveraccounts.length;u++)C=serialize_str("0")+serialize_str(AES.url2hex(e.neveraccounts[u])),a+=
"NEVR"+serialize_str(C);for(u=0;"undefined"!=typeof e.nevergenerates&&u<e.nevergenerates.length;u++)C=serialize_str("1")+serialize_str(AES.url2hex(e.nevergenerates[u])),a+="NEVR"+serialize_str(C);for(u=0;"undefined"!=typeof e.neverformfills&&u<e.neverformfills.length;u++)C=serialize_str("2")+serialize_str(AES.url2hex(e.neverformfills[u])),a+="NEVR"+serialize_str(C);for(u=0;"undefined"!=typeof e.neverautologins&&u<e.neverautologins.length;u++)C=serialize_str("3")+serialize_str(AES.url2hex(e.neverautologins[u])),
a+="NEVR"+serialize_str(C);for(u=0;"undefined"!=typeof e.nevershowicons&&u<e.nevershowicons.length;u++)C=serialize_str("6")+serialize_str(AES.url2hex(e.nevershowicons[u])),a+="NEVR"+serialize_str(C);for(u=0;"undefined"!=typeof e.onlyaccounts&&u<e.onlyaccounts.length;u++)C=serialize_str("10000")+serialize_str(AES.url2hex(e.onlyaccounts[u])),a+="NEVR"+serialize_str(C);for(u=0;"undefined"!=typeof e.onlygenerates&&u<e.onlygenerates.length;u++)C=serialize_str("10001")+serialize_str(AES.url2hex(e.onlygenerates[u])),
a+="NEVR"+serialize_str(C);for(u=0;"undefined"!=typeof e.onlyformfills&&u<e.onlyformfills.length;u++)C=serialize_str("10002")+serialize_str(AES.url2hex(e.onlyformfills[u])),a+="NEVR"+serialize_str(C);for(u=0;"undefined"!=typeof e.onlyautologins&&u<e.onlyautologins.length;u++)C=serialize_str("10003")+serialize_str(AES.url2hex(e.onlyautologins[u])),a+="NEVR"+serialize_str(C);for(u=0;"undefined"!=typeof e.onlyshowicons&&u<e.onlyshowicons.length;u++)C=serialize_str("10006")+serialize_str(AES.url2hex(e.onlyshowicons[u])),
a+="NEVR"+serialize_str(C)}if(y)for(C=y.length,u=0;u<C;u++)e=y[u],b="",b+=serialize_str(AES.url2hex(e.url)),b+=serialize_str(e.exacthost),b+=serialize_str(e.exactport),b+=serialize_str("undefined"!=typeof e.case_insensitive?e.case_insensitive:"0"),a+="URUL"+serialize_str(b);if(A)for(u in A)get_digits(u)==u&&("undefined"!=typeof A[u].sharefolderid?(p=A[u].sharefolderid,"undefined"==typeof n[p]&&(n[p]=[]),n[p].push(A[u])):a+=flattenapplication(A[u]));if(J)for(u in J)get_digits(u)==u&&(b="",b+=serialize_str(J[u].id),
b+=serialize_str(J[u].parent),b+=serialize_str(J[u].mimetype),b+=serialize_str(J[u].storagekey),b+=serialize_str(J[u].size),b+=serialize_str(J[u].filename),a+="ATTA"+serialize_str(b));if(x&&0<x.length)for("string"==typeof lp_rsaprivatekeyenchex&&0<lp_rsaprivatekeyenchex.length&&(a+="PRIK"+serialize_str(lp_rsaprivatekeyenchex)),u=0;u<x.length;u++){y=x[u];a+=flattenshare(y);A=y.key;p=y.id;for(C=0;"undefined"!=typeof l[p]&&C<l[p].length;C++)J=l[p][C].group,l[p][C].group=l[p][C].group.substr(y.decsharename.length+
1),a+=flattensite(l[p][C],A),l[p][C].group=J;for(C=0;"undefined"!=typeof n[p]&&C<n[p].length;C++)J=n[p][C].group,n[p][C].group=n[p][C].group.substr(y.decsharename.length+1),a+=flattenapplication(n[p][C],A),n[p][C].group=J;for(C=0;"undefined"!=typeof B[p]&&C<B[p].length;C++)a+=flattenff(B[p][C],A)}if(G&&0<G.length)for(u=0,x=G.length;u<x;++u)a+=flattenshare(G[u]);if(L&&0<L.length)for(u=0,x=L.length;u<x;++u)G=L[u],b="",b+=serialize_str(G.username),b+=serialize_str(G.accepted),b+=serialize_str(G.confirmed),
b+=serialize_str(G.hours_to_override),b+=serialize_str(G.override_date),b+=serialize_str(G.allowed_access),a+="EMER"+serialize_str(b);if(F&&0<F.length)for(u=0,x=F.length;u<x;++u)G=F[u],b="",b+=serialize_str(G.username),b+=serialize_str(G.accepted),b+=serialize_str(G.confirmed),b+=serialize_str(G.hours_to_override),b+=serialize_str(G.override_date),b+=serialize_str(G.allowed_access),a+="EMEE"+serialize_str(b);N&&(b=""+serialize_str(N.multifactorenabled),b+=serialize_str(N.lastpassauthenabled),b+=serialize_str(JSON.stringify(N.domains)),
a+="TOTP"+serialize_str(b));H&&(H.forEach(function(a){a.fields=JSON.stringify(a.fields)}),a+="TMPL"+serialize_str(AES._utf8_encode(JSON.stringify(H))),H.forEach(function(a){a.fields=JSON.parse(a.fields)}));R&&(R.forEach(function(a){a.content=JSON.stringify(a.content)}),a+="RMDS"+serialize_str(AES._utf8_encode(JSON.stringify(R))),R.forEach(function(a){a.content=JSON.parse(a.content)}));a+="MXID"+serialize_str(g_maxid);return a+="ENDM"+serialize_str("OK")}
function flattensite(a,b){var c=""+serialize_str(a.aid);var d="undefined"!=typeof a.encname&&lpmdec(a.encname,!0,b,null,a.aid)==a.name?a.encname:lpmenc(a.name,!0,b);c+=serialize_str(d);b="undefined"!=typeof a.encgroup&&lpmdec(a.encgroup,!0,b,null,a.aid)==a.group?a.encgroup:lpmenc(a.group,!0,b);c+=serialize_str(b);c+=serialize_str("undefined"!=typeof lp_no_url_bin2hex&&lp_no_url_bin2hex?a.url:AES.url2hex(a.url));c+=serialize_str(a.extra);c+=serialize_str(a.fav);c+=serialize_str(a.sharedfromaid);c+=
serialize_str(a.username);c+=serialize_str(a.password);c+=serialize_str(a.pwprotect?"1":"0");c+=serialize_str(a.genpw?"1":"0");c+=serialize_str(a.sn?"1":"0");c+=serialize_str(a.last_touch);c+=serialize_str(a.autologin?"1":"0");c+=serialize_str(a.never_autofill?"1":"0");c+=serialize_str(a.realm_data);c+=serialize_str(a.fiid);c+=serialize_str(a.custom_js);"undefined"==typeof a.submit_id&&(a.submit_id="");c+=serialize_str(a.submit_id);"undefined"==typeof a.captcha_id&&(a.captcha_id="");c+=serialize_str(a.captcha_id);
"undefined"==typeof a.urid&&(a.urid="0");c+=serialize_str(a.urid);"undefined"==typeof a.basic_auth&&(a.basic_auth="0");c+=serialize_str(a.basic_auth);"undefined"==typeof a.method&&(a.method="");c+=serialize_str(a.method);"undefined"==typeof a.action&&(a.action="");c+=serialize_str(a.action);"undefined"==typeof a.groupid&&(a.groupid="");c+=serialize_str(a.groupid);"undefined"==typeof a.deleted&&(a.deleted="");c+=serialize_str(a.deleted);"undefined"==typeof a.attachkey&&(a.attachkey="");c+=serialize_str(a.attachkey);
"undefined"==typeof a.attachpresent&&(a.attachpresent="");c+=serialize_str(a.attachpresent);"undefined"==typeof a.individualshare&&(a.individualshare=!1);c+=serialize_str(a.individualshare?"1":"0");"undefined"==typeof a.notetype&&(a.notetype="");c+=serialize_str(a.notetype);"undefined"==typeof a.noalert&&(a.noalert="");c+=serialize_str(a.noalert);"undefined"==typeof a.last_modified_gmt&&(a.last_modified_gmt="");c+=serialize_str(a.last_modified_gmt);"undefined"==typeof a.hasbeenshared&&(a.hasbeenshared=
"");c+=serialize_str(a.hasbeenshared);"undefined"==typeof a.last_pwchange_gmt&&(a.last_pwchange_gmt="");c+=serialize_str(a.last_pwchange_gmt);"undefined"==typeof a.created_gmt&&(a.created_gmt="");c+=serialize_str(a.created_gmt);"undefined"==typeof a.vulnerable&&(a.vulnerable="");c+=serialize_str(a.vulnerable);"undefined"==typeof a.pwch&&(a.pwch="0");c+=serialize_str(a.pwch);"undefined"==typeof a.breached&&(a.breached="0");c+=serialize_str(a.breached);"undefined"==typeof a.template&&(a.template="");
c+=serialize_str(a.template);c="ACCT"+serialize_str(c);if("undefined"!=typeof a.fields)for(b=0;b<a.fields.length;b++){d=a.fields[b];var f=serialize_str(AES._utf8_encode(d.name));f+=serialize_str(d.type);var h=d.value;"select-one"==d.type&&(h=AES._utf8_encode(h));f+=serialize_str(h);f+=serialize_str(d.checked?"1":"0");f+=serialize_str(AES._utf8_encode(d.formname));"undefined"==typeof d.urid&&(d.urid="0");f+=serialize_str(d.urid);"undefined"==typeof d.otherlogin&&(d.otherlogin="0");f+=serialize_str(d.otherlogin);
"undefined"==typeof d.url&&(d.url="");f+=serialize_str(d.url);c+=(d.otherfield?"ACOF":"ACFL")+serialize_str(f)}return c}
function flattenapplication(a,b){var c="";var d=""+serialize_str(a.appaid);d+=serialize_str(AES.url2hex(a.appname));d+=serialize_str(a.extra);var f="undefined"!=typeof a.encname&&lpmdec(a.encname,!0,b)==a.name?a.encname:lpmenc(a.name,!0,b);d+=serialize_str(f);b="undefined"!=typeof a.encgroup&&lpmdec(a.encgroup,!0,b)==a.group?a.encgroup:lpmenc(a.group,!0,b);d+=serialize_str(b);d+=serialize_str(a.last_touch);d+=serialize_str(a.fiid);d+=serialize_str(a.pwprotect?"1":"0");d+=serialize_str(a.fav);d+=serialize_str(a.script);
d+=serialize_str(a.wintitle);d+=serialize_str(a.wininfo);d+=serialize_str(a.exeversion);d+=serialize_str(a.autologin);d+=serialize_str(a.warnversion?"1":"0");d+=serialize_str(a.exehash);c+="AACT"+serialize_str(d);for(b=0;b<a.fields.length;b++)d="",d+=serialize_str(a.fields[b].id),d+=serialize_str(a.fields[b].value),d+=serialize_str(a.fields[b].type),c+="AACF"+serialize_str(d);return c}
function flattenff(a,b){b="";var c=""+serialize_str(a.ffid);c+=serialize_str(a.profiletype);c+=serialize_str(a.profilename);c+=serialize_str(a.profilelanguage);c+=serialize_str(a.firstname);c+=serialize_str(a.middlename);c+=serialize_str(a.lastname);c+=serialize_str(a.email);c+=serialize_str(a.company);c+=serialize_str(a.ssn);c+=serialize_str(a.birthday);c+=serialize_str(a.address1);c+=serialize_str(a.address2);c+=serialize_str(a.city);c+=serialize_str(a.state);c+=serialize_str(a.state_name);c+=serialize_str(a.zip);
c+=serialize_str(a.country);c+=serialize_str(a.country_cc3l);c+=serialize_str(a.country_name);c+=serialize_str(a.mobilephone);c+=serialize_str(a.mobilephone3lcc);c+=serialize_str(a.mobileext);c+=serialize_str(a.evephone);c+=serialize_str(a.evephone3lcc);c+=serialize_str(a.eveext);c+=serialize_str(a.phone);c+=serialize_str(a.phone3lcc);c+=serialize_str(a.phoneext);c+=serialize_str(a.fax);c+=serialize_str(a.fax3lcc);c+=serialize_str(a.faxext);c+=serialize_str(a.ccnum);c+=serialize_str(a.ccexp);c+=serialize_str(a.cccsc);
c+=serialize_str(a.username);c+=serialize_str(a.address3);c+=serialize_str(a.title);c+=serialize_str(a.gender);c+=serialize_str(a.driverlicensenum);c+=serialize_str(a.taxid);c+=serialize_str(a.pwprotect?"1":"0");c+=serialize_str(a.bankname);c+=serialize_str(a.bankacctnum);c+=serialize_str(a.bankroutingnum);c+=serialize_str(a.timezone);c+=serialize_str(a.county);c+=serialize_str(a.ccstart);c+=serialize_str(a.ccname);c+=serialize_str(a.ccissuenum);c+=serialize_str(a.notes);c+=serialize_str(a.lastname2);
c+=serialize_str(a.mobileemail);c+=serialize_str(a.firstname2);c+=serialize_str(a.firstname3);c+=serialize_str(a.lastname3);c+=serialize_str(a.creditmon?"1":"0");b+="LPFF"+serialize_str(c);for(var d=a.custom_fields.length,f=0;f<d;f++){var h=a.custom_fields[f];c="";c+=serialize_str(h.cfid);c+=serialize_str(h.text);c+=serialize_str(h.value);c+=serialize_str(h.alttext);b+="FFCF"+serialize_str(c)}return b}
function logMissingSharedFolder(a,b,c){Raven&&Raven.captureException(a,{extra:{uid:b,shareId:c}})};function lp_init_tlds(){if("undefined"==typeof lp_all_tlds||null==lp_all_tlds)lp_all_tlds=[],lp_all_tlds.hu="2000 agrar blogspot bolt casino city co com erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news nui org priv reklam sex shop sport suli szex tm tozsde utazas video".split(" "),lp_all_tlds.nl="*.transurl 752 blogspot bv co virtueeldomein".split(" "),lp_all_tlds.ca="ab bc blogspot co gc mb nb nf nl no-ip ns nt nu on pe qc sk yk".split(" "),lp_all_tlds.pa="abo ac com edu gob ing med net nom org sld".split(" "),
lp_all_tlds.se="a ab ac b bd blogspot brand c com d e f fh fhsk fhv g h i k komforb kommunalforbund komvux l lanarb lanbib m mil n naturbruksgymn net o org p parti pp press r s sshn t tm u w x y z".split(" "),lp_all_tlds.ac="ac co com edu gov gv mil net or org".split(" "),lp_all_tlds.ae="ac blogspot co com gov mil name net org pro sch".split(" "),lp_all_tlds.at="*.ex.ortsinfo *.kunden.ortsinfo blogspot.co ac biz co futurehosting futuremailing gv info or priv".split(" "),lp_all_tlds.be="*.transurl ac ap blogspot co com fgov to xa".split(" "),
lp_all_tlds.cn="cn-north-1.compute.amazonaws.com s3.cn-north-1.amazonaws.com cn-north-1.compute.amazonaws compute.amazonaws.com compute.amazonaws ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hk hl hn jl js jx ln mil mo net nm nx org qh sc sd sh sn sx tj tw xj xn--55qx5d xn--io0a7i xn--od0alg xz yn zj".split(" "),lp_all_tlds.cr="ac co ed fi go or sa".split(" "),lp_all_tlds.cy="blogspot.com * ac biz com ekloges gov info ltd name net org parliament press pro tm".split(" "),lp_all_tlds.fj="* ac biz com gov id info mil name net org pro school".split(" "),
lp_all_tlds.fk="* ac co gov net nom org".split(" "),lp_all_tlds.gg="ac alderney co gov guernsey ind ltd net org sark sch".split(" "),lp_all_tlds.gn="ac com edu gov net org".split(" "),lp_all_tlds.gt="com edu gob ind mil net org".split(" "),lp_all_tlds.id="blogspot.co ac biz co desa go mil my net or sch web".split(" "),lp_all_tlds.il="blogspot.co * ac co gov idf k12 muni net org".split(" "),lp_all_tlds.im="ltd.co plc.co ac co com gov net nic org ro tt tv".split(" "),lp_all_tlds["in"]="ac blogspot cloudns co edu ernet firm gen gov ind mil net nic org res".split(" "),
lp_all_tlds.ir="ac co gov id net org sch xn--mgba3a4f16a xn--mgba3a4fra".split(" "),lp_all_tlds.is="ac blogspot com cupcake edu gov int net org".split(" "),lp_all_tlds.je="ac co gov ind jersey ltd net org sch".split(" "),lp_all_tlds.jp="ac ad aichi akita aomori blogspot chiba co ed ehime fukui fukuoka fukushima gifu go gov gr gunma hiroshima hokkaido hyogo ibaraki ishikawa iwate kagawa kagoshima kanagawa kawasaki kitakyushu kobe kochi kumamoto kyoto lg mie miyagi miyazaki nagano nagasaki nagoya nara ne net niigata oita okayama okinawa or org osaka saga saitama sapporo sendai shiga shimane shizuoka tochigi tokushima tokyo tottori toyama wakayama xn--0trq7p7nn xn--1ctwo xn--1lqs03n xn--1lqs71d xn--2m4a15e xn--32vp30h xn--4it168d xn--4it797k xn--4pvxs xn--5js045d xn--5rtp49c xn--5rtq34k xn--6btw5a xn--6orx2r xn--7t0a264c xn--8ltr62k xn--8pvr4u xn--c3s14m xn--d5qv7z876c xn--djrs72d6uy xn--djty4k xn--efvn9s xn--ehqz56n xn--elqq16h xn--f6qx53a xn--k7yn95e xn--kbrq7o xn--klt787d xn--kltp7d xn--kltx9a xn--klty5x xn--mkru45i xn--nit225k xn--ntso0iqx3a xn--ntsq17g xn--pssu33l xn--qqqt11m xn--rht27z xn--rht3d xn--rht61e xn--rny31h xn--tor131o xn--uist22h xn--uisz3g xn--uuwu58a xn--vgu402c xn--zbx025d yamagata yamaguchi yamanashi yokohama".split(" "),
lp_all_tlds.kr="ac blogspot busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam kg mil ms ne nm or pe re sc seoul ulsan".split(" "),lp_all_tlds.mw="ac biz co com coop edu gov int museum net org".split(" "),lp_all_tlds.nz="blogspot.co * ac co cri geek gen govt health iwi kiwi maori mil net org parliament school xn--mori-qsa".split(" "),lp_all_tlds.ru="ac adygeya altai amur amursk arkhangelsk astrakhan baikal bashkiria belgorod bir blogspot bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia cmw com dagestan dudinka e-burg edu fareast gov grozny int irkutsk ivanovo izhevsk jamal jar joshkar-ola k-uralsk kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov kms koenig komi kostroma krasnoyarsk kuban kurgan kursk kustanai kuzbass lipetsk magadan magnitka mari mari-el marine mil mordovia mosreg msk murmansk mytis nakhodka nalchik net nkz nnov norilsk nov novosibirsk nsk omsk orenburg org oryol oskol palana penza perm pp pskov ptz pyatigorsk rnd rubtsovsk ryazan sakhalin samara saratov simbirsk smolensk snz spb stavropol stv surgut syzran tambov tatarstan test tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vdonsk vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yaroslavl yekaterinburg yuzhno-sakhalinsk zgrad".split(" "),
lp_all_tlds.rw="ac co com edu gouv gov int mil net".split(" "),lp_all_tlds.au="act.edu blogspot.com nsw.edu nt.edu qld.edu qld.gov sa.edu sa.gov tas.edu tas.gov vic.edu vic.gov wa.edu wa.gov act asn com conf csiro edu gov id info net nsw nt org oz qld sa tas telememo vic wa".split(" "),lp_all_tlds.th="ac co go in mi net or".split(" "),lp_all_tlds.tj="ac biz co com edu go gov int mil name net nic org test web".split(" "),lp_all_tlds.tz="ac co go hotel info me mil mobi ne or sc tv".split(" "),lp_all_tlds.ug=
"ac blogspot co com go ne or org sc".split(" "),lp_all_tlds.uk="*.sch blogspot.co no-ip.co service.gov wellbeingzone.co !bl !british-library !jet !mod !national-library-scotland !nel !nic !nls !parliament * ac co com gov icnet ltd me mil net nhs org plc police sch".split(" "),lp_all_tlds.vn="ac biz blogspot com edu gov health info int name net org pro".split(" "),lp_all_tlds.yu=["ac","co","edu","org"],lp_all_tlds.za="blogspot.co * ac agric agrica alt city co com edu gov grondar law mil net ngo nis nom org school tm web".split(" "),
lp_all_tlds.zm="* ac biz co com edu gov info mil net org sch".split(" "),lp_all_tlds.zw=["*","ac","co","gov","org"],lp_all_tlds.br="*.nom ac.leg al.leg am.leg ap.leg ba.leg blogspot.com ce.leg df.leg es.leg go.leg ma.leg mg.leg ms.leg mt.leg pa.leg pb.leg pe.leg pi.leg pr.leg rj.leg rn.leg ro.leg rr.leg rs.leg sc.leg se.leg sp.leg to.leg sp.gov adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop dpn ecn eco edu emp eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus leg lel mat med mil mp mus net nom not ntr odo org ppg pro psc psi qsl radio rec slg srv taxi teo tmp trd tur tv vet vlog wiki zlg".split(" "),
lp_all_tlds.ht="adult art asso com coop edu firm gouv info med net org perso pol pro rel shop".split(" "),lp_all_tlds.mv="aero biz com coop edu gov info int mil museum name net org pro".split(" "),lp_all_tlds.pl="ap.gov griw.gov ic.gov is.gov kmpsp.gov konsulat.gov kppsp.gov kwp.gov kwpsp.gov mup.gov mw.gov oirm.gov oum.gov pa.gov pinb.gov piw.gov po.gov psp.gov psse.gov pup.gov rzgw.gov sa.gov sdn.gov sko.gov so.gov sr.gov starostwo.gov ug.gov ugim.gov um.gov umig.gov upow.gov uppo.gov us.gov uw.gov uzs.gov wif.gov wiih.gov winb.gov wios.gov witd.gov wiw.gov wsa.gov wskr.gov wuoz.gov wzmiuw.gov zp.gov 6bone agro aid art atm augustow auto babia-gora bedzin beep beskidy bialowieza bialystok bielawa bieszczady biz boleslawiec bydgoszcz bytom cieszyn co com czeladz czest dlugoleka edu elblag elk gda gdansk gdynia gliwice glogow gmina gniezno gorlice gov grajewo gsm ilawa info irc jaworzno jelenia-gora jgora kalisz karpacz kartuzy kaszuby katowice kazimierz-dolny kepno ketrzyn klodzko kobierzyce kolobrzeg konin konskowola krakow kutno lapy lebork legnica lezajsk limanowa lodz lomza lowicz lubin lublin lukow mail malbork malopolska mazowsze mazury mbone med media miasta mielec mielno mil mragowo naklo net ngo nieruchomosci nom nowaruda nysa olawa olecko olkusz olsztyn opoczno opole org ostroda ostroleka ostrowiec ostrowwlkp pc pila pisz podhale podlasie polkowice pomorskie pomorze powiat poznan priv prochowice pruszkow przeworsk pulawy radom rawa-maz realestate rel rybnik rzeszow sanok sejny sex shop siedlce sklep skoczow slask slupsk sopot sos sosnowiec stalowa-wola starachowice stargard suwalki swidnica swiebodzin swinoujscie szczecin szczytno szkola targi tarnobrzeg tgory tm torun tourism travel turek turystyka tychy usenet ustka walbrzych warmia warszawa waw wegrow wielun wlocl wloclawek wodzislaw wolomin wroc wroclaw zachpomor zagan zakopane zarow zgora zgorzelec".split(" "),
lp_all_tlds.us="chtr.k12.ma paroch.k12.ma pvt.k12.ma cc.ak cc.al cc.ar cc.as cc.az cc.ca cc.co cc.ct cc.dc cc.de cc.fl cc.ga cc.gu cc.hi cc.ia cc.id cc.il cc.in cc.ks cc.ky cc.la cc.ma cc.md cc.me cc.mi cc.mn cc.mo cc.ms cc.mt cc.nc cc.nd cc.ne cc.nh cc.nj cc.nm cc.nv cc.ny cc.oh cc.ok cc.or cc.pa cc.pr cc.ri cc.sc cc.sd cc.tn cc.tx cc.ut cc.va cc.vi cc.vt cc.wa cc.wi cc.wv cc.wy k12.ak k12.al k12.ar k12.as k12.az k12.ca k12.co k12.ct k12.dc k12.de k12.fl k12.ga k12.gu k12.ia k12.id k12.il k12.in k12.ks k12.ky k12.la k12.ma k12.md k12.me k12.mi k12.mn k12.mo k12.ms k12.mt k12.nc k12.ne k12.nh k12.nj k12.nm k12.nv k12.ny k12.oh k12.ok k12.or k12.pa k12.pr k12.ri k12.sc k12.tn k12.tx k12.ut k12.va k12.vi k12.vt k12.wa k12.wi k12.wy lib.ak lib.al lib.ar lib.as lib.az lib.ca lib.co lib.ct lib.dc lib.de lib.fl lib.ga lib.gu lib.hi lib.ia lib.id lib.il lib.in lib.ks lib.ky lib.la lib.ma lib.md lib.me lib.mi lib.mn lib.mo lib.ms lib.mt lib.nc lib.nd lib.ne lib.nh lib.nj lib.nm lib.nv lib.ny lib.oh lib.ok lib.or lib.pa lib.pr lib.ri lib.sc lib.sd lib.tn lib.tx lib.ut lib.va lib.vi lib.vt lib.wa lib.wi lib.wy ak al ar as az ca cloudns co com ct dc de dni drud fed fl ga golffan gu hi ia id il in is-by isa kids ks ky la land-4-sale ma md me mi mn mo ms mt nc nd ne nh nj nm noip nsn nv ny oh ok or pa pointto pr ri sc sd stuff-4-sale tn tx ut va vi vt wa wi wv wy".split(" "),
lp_all_tlds.fi=["aland","blogspot","dy","iki"],lp_all_tlds.mil=["army","navy"],lp_all_tlds["do"]="art com edu gob gov mil net org sld web".split(" "),lp_all_tlds.dz="art asso com edu gov net org pol".split(" "),lp_all_tlds.co="blogspot.com arts com edu firm gov info int mil net nom org rec store uk web".split(" "),lp_all_tlds.ro="arts blogspot com firm info nom nt org rec shop store tm www".split(" "),lp_all_tlds.ve="arts bib co com e12 edu firm gob gov info int mil net nom org rec store tec web".split(" "),
lp_all_tlds.lv="asn com conf edu eu gov id mil net org".split(" "),lp_all_tlds.lk="ac assn com edu gov grp hotel int ltd net ngo org sch soc web".split(" "),lp_all_tlds.fr="aeroport assedic asso avocat avoues blogspot cci chambagri chirurgiens-dentistes chirurgiens-dentistes-en-france com experts-comptables fbx-os fbxos freebox-os freeboxos geometre-expert gouv greta huissier-justice medecin nom notaires pharmacien port prd presse tm veterinaire".split(" "),lp_all_tlds.gp="asso com edu mobi net org".split(" "),
lp_all_tlds.mc=["asso","tm"],lp_all_tlds.tr="blogspot.com gov.nc !nic * av bbs bel biz com dr edu gen gov info k12 kep mil name nc net org pol tel tv web".split(" "),lp_all_tlds.az="biz com edu gov info int mil name net org pp pro".split(" "),lp_all_tlds.et="* biz com edu gov info name net org".split(" "),lp_all_tlds.nr="biz co com edu gov info net org".split(" "),lp_all_tlds.om="!mediaphone !nawras !nawrastelecom !omanmobile !omanpost !omantel !rakpetroleum !siemens !songfest !statecouncil * biz co com edu gov med mil museum net org pro sch".split(" "),
lp_all_tlds.pk="biz com edu fam gob gok gon gop gos gov info net org web".split(" "),lp_all_tlds.pr="ac biz com edu est gov info isla name net org pro prof".split(" "),lp_all_tlds.tt="aero biz co com coop edu gov info int jobs mobi museum name net org pro travel us".split(" "),lp_all_tlds.ua="biz cherkassy cherkasy chernigov chernihiv chernivtsi chernovtsy ck cn co com cr crimea cv dn dnepropetrovsk dnipropetrovsk dominic donetsk dp edu gov if in ivano-frankivsk kh kharkiv kharkov kherson khmelnitskiy khmelnytskyi kiev kirovograd km kr krym ks kv kyiv lg lt lugansk lutsk lv lviv mk mykolaiv net nikolaev od odesa odessa org pl poltava pp rivne rovno rv sb sebastopol sevastopol sm sumy te ternopil uz uzhgorod vinnica vinnytsia vn volyn yalta zaporizhzhe zaporizhzhia zhitomir zhytomyr zp zt".split(" "),
lp_all_tlds.tw="blogspot club com ebiz edu game gov gove idv mil net org xn--czrw28b xn--uc0atv xn--zf0ao64a".split(" "),lp_all_tlds.ag=["co","com","net","nom","org"],lp_all_tlds.ao="co ed gv it og pb".split(" "),lp_all_tlds.bw=["co","org"],lp_all_tlds.ck=["!www","*","co"],lp_all_tlds.ls=["co","org"],lp_all_tlds.ma="ac co gov net org press".split(" "),lp_all_tlds.af=["com","edu","gov","net","org"],lp_all_tlds.ai=["com","net","off","org"],lp_all_tlds.al="blogspot com edu gov inima mil net org soros tirana uniti upt".split(" "),
lp_all_tlds.an=["com","edu","net","org"],lp_all_tlds.ar="blogspot.com !congresodelalengua3 !educ !gobiernoelectronico !mecon !nacion !nic !promocion !retina !uba * com edu gob gov int mil net org tur".split(" "),lp_all_tlds.aw=["com"],lp_all_tlds.bb="biz co com edu gov info net org store tv".split(" "),lp_all_tlds.bd="* com edu gov mil net org".split(" "),lp_all_tlds.bm=["com","edu","gov","net","org"],lp_all_tlds.bn=["*","com","edu","net","org"],lp_all_tlds.bo="com edu gob gov int mil net org tv".split(" "),
lp_all_tlds.bs=["com","edu","gov","net","org"],lp_all_tlds.bt=["com","edu","gov","net","org"],lp_all_tlds.cd=["com","gov","net","org"],lp_all_tlds.ch="blogspot com gotdns gov net org".split(" "),lp_all_tlds.cu="com edu gov inf net org".split(" "),lp_all_tlds.dm=["com","edu","gov","net","org"],lp_all_tlds.ec="com edu fin gob gov info k12 med mil net org pro".split(" "),lp_all_tlds.ee="blogspot.com aip com edu fie gov lib med org pri riik".split(" "),lp_all_tlds.eg="blogspot.com com edu eun gov mil name net org sci".split(" "),
lp_all_tlds.es="blogspot.com com edu gob nom org".split(" "),lp_all_tlds.eu="*.transurl cloudns com mycd spdns wellbeingzone".split(" "),lp_all_tlds.gb=["com","net"],lp_all_tlds.ge="com edu gov mil net org pvt".split(" "),lp_all_tlds.gh=["com","edu","gov","mil","org"],lp_all_tlds.gi="com edu gov ltd mod org".split(" "),lp_all_tlds.gr="blogspot com edu gov net org".split(" "),lp_all_tlds.gu="* com edu gov mil net org".split(" "),lp_all_tlds.hk="blogspot com edu gov idv inc ltd net org xn--55qx5d xn--ciqpn xn--gmq050i xn--gmqw5a xn--io0a7i xn--lcvr32d xn--mk0axi xn--mxtq1m xn--od0alg xn--od0aq3b xn--tn0ag xn--uc0atv xn--uc0ay4a xn--wcvs22d xn--zf0avx".split(" "),
lp_all_tlds.hn="com edu gob mil net org".split(" "),lp_all_tlds.hr=["blogspot","com","from","iz","name"],lp_all_tlds.jm="* com edu gov net org".split(" "),lp_all_tlds.jo="com edu gov mil name net org sch".split(" "),lp_all_tlds.kh="* com edu gov mil net org per".split(" "),lp_all_tlds.kw="* com edu gov mil net org".split(" "),lp_all_tlds.ky=["com","edu","gov","net","org"],lp_all_tlds.kz="com edu gov mil net org".split(" "),lp_all_tlds.la="bnr c com edu gov info int net org per".split(" "),lp_all_tlds.lb=
"com edu gov mil net org".split(" "),lp_all_tlds.lc="co com edu gov net org oy".split(" "),lp_all_tlds.li=["blogspot","com","gov","net","org"],lp_all_tlds.lr=["com","edu","gov","net","org"],lp_all_tlds.ly="com edu gov id med net org plc sch".split(" "),lp_all_tlds.mg="co com edu gov mil nom org prd tm".split(" "),lp_all_tlds.mk="blogspot com edu gov inf name net org".split(" "),lp_all_tlds.mm="* com edu gov net org".split(" "),lp_all_tlds.mo=["com","edu","gov","net","org"],lp_all_tlds.mt="blogspot.com * com edu gov net org".split(" "),
lp_all_tlds.mu="ac co com gov net or org".split(" "),lp_all_tlds.mx="blogspot com edu gob gov net org".split(" "),lp_all_tlds.my="blogspot com edu gov mil name net org".split(" "),lp_all_tlds.na="ca cc co com dr in info mobi mx name net or org pro school tv us ws".split(" "),lp_all_tlds.nc=["asso","com","net","org"],lp_all_tlds.ng="blogspot.com ac com edu gov i mil mobi name net org sch".split(" "),lp_all_tlds.ni="* ac biz co com edu gob in info int mil net nom org web".split(" "),lp_all_tlds.no=
"bo.nordland bo.telemark gs.aa gs.ah gs.bu gs.fm gs.hl gs.hm gs.jan-mayen gs.mr gs.nl gs.nt gs.of gs.ol gs.oslo gs.rl gs.sf gs.st gs.svalbard gs.tm gs.tr gs.va gs.vf heroy.more-og-romsdal heroy.nordland nes.akershus nes.buskerud os.hedmark os.hordaland sande.more-og-romsdal sande.vestfold sande.xn--mre-og-romsdal-qqb valer.hedmark valer.ostfold xn--b-5ga.nordland xn--b-5ga.telemark xn--hery-ira.nordland xn--hery-ira.xn--mre-og-romsdal-qqb xn--vler-qoa.hedmark xn--vler-qoa.xn--stfold-9xa aa aarborte aejrie afjord agdenes ah aknoluokta akrehamn al alaheadju alesund algard alstahaug alta alvdal amli amot andasuolo andebu andoy ardal aremark arendal arna aseral asker askim askoy askvoll asnes audnedaln aukra aure aurland aurskog-holand austevoll austrheim averoy badaddja bahcavuotna bahccavuotna baidar bajddar balat balestrand ballangen balsfjord bamble bardu barum batsfjord bearalvahki beardu beiarn berg bergen berlevag bievat bindal birkenes bjarkoy bjerkreim bjugn blogspot bodo bokn bomlo bremanger bronnoy bronnoysund brumunddal bryne bu budejju bygland bykle cahcesuolo co com davvenjarga davvesiida deatnu dep dielddanuorri divtasvuodna divttasvuotna donna dovre drammen drangedal drobak dyroy egersund eid eidfjord eidsberg eidskog eidsvoll eigersund elverum enebakk engerdal etne etnedal evenassi evenes evje-og-hornnes farsund fauske fedje fet fetsund fhs finnoy fitjar fjaler fjell fla flakstad flatanger flekkefjord flesberg flora floro fm folkebibl folldal forde forsand fosnes frana fredrikstad frei frogn froland frosta froya fuoisku fuossko fusa fylkesbibl fyresdal gaivuotna galsa gamvik gangaviika gaular gausdal giehtavuoatna gildeskal giske gjemnes gjerdrum gjerstad gjesdal gjovik gloppen gol gran grane granvin gratangen grimstad grong grue gulen guovdageaidnu ha habmer hadsel hagebostad halden halsa hamar hamaroy hammarfeasta hammerfest hapmir haram hareid harstad hasvik hattfjelldal haugesund hemne hemnes hemsedal herad hitra hjartdal hjelmeland hl hm hobol hof hokksund hol hole holmestrand holtalen honefoss hornindal horten hoyanger hoylandet hurdal hurum hvaler hyllestad ibestad idrett inderoy iveland ivgu jan-mayen jessheim jevnaker jolster jondal jorpeland kafjord karasjohka karasjok karlsoy karmoy kautokeino kirkenes klabu klepp kommune kongsberg kongsvinger kopervik kraanghke kragero kristiansand kristiansund krodsherad krokstadelva kvafjord kvalsund kvam kvanangen kvinesdal kvinnherad kviteseid kvitsoy laakesvuemie lahppi langevag lardal larvik lavagis lavangen leangaviika lebesby leikanger leirfjord leirvik leka leksvik lenvik lerdal lesja levanger lier lierne lillehammer lillesand lindas lindesnes loabat lodingen lom loppa lorenskog loten lund lunner luroy luster lyngdal lyngen malatvuopmi malselv malvik mandal marker marnardal masfjorden masoy matta-varjjat meland meldal melhus meloy meraker midsund midtre-gauldal mil mjondalen mo-i-rana moareke modalen modum molde mosjoen moskenes moss mosvik mr muosat museum naamesjevuemie namdalseid namsos namsskogan nannestad naroy narviika narvik naustdal navuotna nedre-eiker nesna nesodden nesoddtangen nesseby nesset nissedal nittedal nl nord-aurdal nord-fron nord-odal norddal nordkapp nordre-land nordreisa nore-og-uvdal notodden notteroy nt odda of oksnes ol omasvuotna oppdal oppegard orkanger orkdal orland orskog orsta osen oslo osoyro osteroy ostre-toten overhalla ovre-eiker oyer oygarden oystre-slidre porsanger porsangu porsgrunn priv rade radoy rahkkeravju raholt raisa rakkestad ralingen rana randaberg rauma rendalen rennebu rennesoy rindal ringebu ringerike ringsaker risor rissa rl roan rodoy rollag romsa romskog roros rost royken royrvik ruovat rygge salangen salat saltdal samnanger sandefjord sandnes sandnessjoen sandoy sarpsborg sauda sauherad sel selbu selje seljord sf siellak sigdal siljan sirdal skanit skanland skaun skedsmo skedsmokorset ski skien skierva skiptvet skjak skjervoy skodje slattum smola snaase snasa snillfjord snoasa sogndal sogne sokndal sola solund somna sondre-land songdalen sor-aurdal sor-fron sor-odal sor-varanger sorfold sorreisa sortland sorum spjelkavik spydeberg st stange stat stathelle stavanger stavern steigen steinkjer stjordal stjordalshalsen stokke stor-elvdal stord stordal storfjord strand stranda stryn sula suldal sund sunndal surnadal svalbard sveio svelvik sykkylven tana tananger time tingvoll tinn tjeldsund tjome tm tokke tolga tonsberg torsken tr trana tranby tranoy troandin trogstad tromsa tromso trondheim trysil tvedestrand tydal tynset tysfjord tysnes tysvar ullensaker ullensvang ulvik unjarga utsira va vaapste vadso vaga vagan vagsoy vaksdal valle vang vanylven vardo varggat varoy vefsn vega vegarshei vennesla verdal verran vestby vestnes vestre-slidre vestre-toten vestvagoy vevelstad vf vgs vik vikna vindafjord voagat volda voss vossevangen xn--andy-ira xn--asky-ira xn--aurskog-hland-jnb xn--avery-yua xn--bdddj-mrabd xn--bearalvhki-y4a xn--berlevg-jxa xn--bhcavuotna-s4a xn--bhccavuotna-k7a xn--bidr-5nac xn--bievt-0qa xn--bjarky-fya xn--bjddar-pta xn--blt-elab xn--bmlo-gra xn--bod-2na xn--brnny-wuac xn--brnnysund-m8ac xn--brum-voa xn--btsfjord-9za xn--davvenjrga-y4a xn--dnna-gra xn--drbak-wua xn--dyry-ira xn--eveni-0qa01ga xn--finny-yua xn--fjord-lra xn--fl-zia xn--flor-jra xn--frde-gra xn--frna-woa xn--frya-hra xn--ggaviika-8ya47h xn--gildeskl-g0a xn--givuotna-8ya xn--gjvik-wua xn--gls-elac xn--h-2fa xn--hbmer-xqa xn--hcesuolo-7ya35b xn--hgebostad-g3a xn--hmmrfeasta-s4ac xn--hnefoss-q1a xn--hobl-ira xn--holtlen-hxa xn--hpmir-xqa xn--hyanger-q1a xn--hylandet-54a xn--indery-fya xn--jlster-bya xn--jrpeland-54a xn--karmy-yua xn--kfjord-iua xn--klbu-woa xn--koluokta-7ya57h xn--krager-gya xn--kranghke-b0a xn--krdsherad-m8a xn--krehamn-dxa xn--krjohka-hwab49j xn--ksnes-uua xn--kvfjord-nxa xn--kvitsy-fya xn--kvnangen-k0a xn--l-1fa xn--laheadju-7ya xn--langevg-jxa xn--ldingen-q1a xn--leagaviika-52b xn--lesund-hua xn--lgrd-poac xn--lhppi-xqa xn--linds-pra xn--loabt-0qa xn--lrdal-sra xn--lrenskog-54a xn--lt-liac xn--lten-gra xn--lury-ira xn--mely-ira xn--merker-kua xn--mjndalen-64a xn--mlatvuopmi-s4a xn--mli-tla xn--mlselv-iua xn--moreke-jua xn--mosjen-eya xn--mot-tla xn--msy-ula0h xn--mtta-vrjjat-k7af xn--muost-0qa xn--nmesjevuemie-tcba xn--nry-yla5g xn--nttery-byae xn--nvuotna-hwa xn--oppegrd-ixa xn--ostery-fya xn--osyro-wua xn--porsgu-sta26f xn--rady-ira xn--rdal-poa xn--rde-ula xn--rdy-0nab xn--rennesy-v1a xn--rhkkervju-01af xn--rholt-mra xn--risa-5na xn--risr-ira xn--rland-uua xn--rlingen-mxa xn--rmskog-bya xn--rros-gra xn--rskog-uua xn--rst-0na xn--rsta-fra xn--ryken-vua xn--ryrvik-bya xn--s-1fa xn--sandnessjen-ogb xn--sandy-yua xn--seral-lra xn--sgne-gra xn--skierv-uta xn--skjervy-v1a xn--skjk-soa xn--sknit-yqa xn--sknland-fxa xn--slat-5na xn--slt-elab xn--smla-hra xn--smna-gra xn--snase-nra xn--sndre-land-0cb xn--snes-poa xn--snsa-roa xn--sr-aurdal-l8a xn--sr-fron-q1a xn--sr-odal-q1a xn--sr-varanger-ggb xn--srfold-bya xn--srreisa-q1a xn--srum-gra xn--stjrdal-s1a xn--stjrdalshalsen-sqb xn--stre-toten-zcb xn--tjme-hra xn--tnsberg-q1a xn--trany-yua xn--trgstad-r1a xn--trna-woa xn--troms-zua xn--tysvr-vra xn--unjrga-rta xn--vads-jra xn--vard-jra xn--vegrshei-c0a xn--vestvgy-ixa6o xn--vg-yiab xn--vgan-qoa xn--vgsy-qoa0j xn--vre-eiker-k8a xn--vrggt-xqad xn--vry-yla5g xn--yer-zna xn--ygarden-p1a xn--ystre-slidre-ujb".split(" "),
lp_all_tlds.np="* com edu gov mil net org ort".split(" "),lp_all_tlds.pe="blogspot com edu gob mil net nom org".split(" "),lp_all_tlds.pf=["com","edu","org"],lp_all_tlds.pg=["*","com","net"],lp_all_tlds.ph="com edu gov i mil net ngo org".split(" "),lp_all_tlds.ps="com edu gov net org plo sec".split(" "),lp_all_tlds.pt="blogspot com edu gov int net nome org publ".split(" "),lp_all_tlds.py="com coop edu gov mil net org".split(" "),lp_all_tlds.qc=["com"],lp_all_tlds.sa="com edu gov med net org pub sch".split(" "),
lp_all_tlds.sb=["com","edu","gov","net","org"],lp_all_tlds.sc=["com","edu","gov","net","org"],lp_all_tlds.sd="com edu gov info med net org tv".split(" "),lp_all_tlds.sg="blogspot com edu gov idn net org per".split(" "),lp_all_tlds.sh="*.platform com edu gov hashbang mil net now org".split(" "),lp_all_tlds.sv="* co com edu gob org red".split(" "),lp_all_tlds.sy="com edu gov mil net org".split(" "),lp_all_tlds.tn="agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism turen".split(" "),
lp_all_tlds.uy="blogspot.com com edu gub mil net org".split(" "),lp_all_tlds.vi="co com edu gov k12 net org".split(" "),lp_all_tlds.ye=["*","com","net"],lp_all_tlds.pro="aaa aca acct avocat bar cloudns cpa eng jur law med recht".split(" "),lp_all_tlds.arpa="e164 in-addr ip6 iris uri urn".split(" "),lp_all_tlds["int"]=["eu"],lp_all_tlds.bf=["gov"],lp_all_tlds.by=["blogspot.com","com","gov","mil","of"],lp_all_tlds.cx=["ath","gov"],lp_all_tlds.ie=["blogspot","gov"],lp_all_tlds.it="abr;abruzzo;ag;agrigento;al;alessandria;alto-adige;altoadige;an;ancona;andria-barletta-trani;andria-trani-barletta;andriabarlettatrani;andriatranibarletta;ao;aosta;aosta-valley;aostavalley;aoste;ap;aq;aquila;ar;arezzo;ascoli-piceno;ascolipiceno;asti;at;av;avellino;ba;balsan;bari;barletta-trani-andria;barlettatraniandria;bas;basilicata;belluno;benevento;bergamo;bergamo ;bg;bi;biella;bl;blogspot;bn;bo;bologna;bolzano;bozen;br;brescia;brindisi;bs;bt;bz;ca;cagliari;cal;calabria;caltanissetta;cam;campania;campidano-medio;campidanomedio;campobasso;carbonia-iglesias;carboniaiglesias;carrara-massa;carraramassa;caserta;catania;catanzaro;cb;ce;cesena-forli;cesenaforli;ch;chieti;ci;cl;cn;co;como;cosenza;cr;cremona;crotone;cs;ct;cuneo;cz;dell-ogliastra;dellogliastra;edu;emilia-romagna;emiliaromagna;emr;en;enna;fc;fe;fermo;ferrara;fg;fi;firenze;florence;fm;foggia;forli-cesena;forlicesena;fr;friuli-v-giulia;friuli-ve-giulia;friuli-vegiulia;friuli-venezia-giulia;friuli-veneziagiulia;friuli-vgiulia;friuliv-giulia;friulive-giulia;friulivegiulia;friulivenezia-giulia;friuliveneziagiulia;friulivgiulia;frosinone;fvg;ge;genoa;genova;go;gorizia;gov;gr;grosseto;iglesias-carbonia;iglesiascarbonia;im;imperia;is;isernia;kr;la-spezia;laquila;laspezia;latina;laz;lazio;lc;le;lecce;lecco;li;lig;liguria;livorno;lo;lodi;lom;lombardia;lombardy;lt;lu;lucania;lucca;macerata;mantova;mar;marche;massa-carrara;massacarrara;matera;mb;mc;me;medio-campidano;mediocampidano;messina;mi;milan;milano;mn;mo;modena;mol;molise;monza;monza-brianza;monza-e-della-brianza;monzabrianza;monzaebrianza;monzaedellabrianza;ms;mt;na;naples;napoli;no;novara;nu;nuoro;og;ogliastra;olbia-tempio;olbiatempio;or;oristano;ot;pa;padova;padua;palermo;parma;pavia;pc;pd;pe;perugia;pesaro-urbino;pesarourbino;pescara;pg;pi;piacenza;piedmont;piemonte;pisa;pistoia;pmn;pn;po;pordenone;potenza;potenza ;pr;prato;pt;pu;pug;puglia;pv;pz;ra;ragusa;ravenna;rc;re;reggio-calabria;reggio-emilia;reggiocalabria;reggioemilia;rg;ri;rieti;rimini;rm;rn;ro;roma;rome;rovigo;sa;salerno;sar;sardegna;sardinia;sassari;savona;si;sic;sicilia;sicily;siena;siracusa;so;sondrio;sp;sr;ss;suedtirol;sv;ta;taa;taranto;te;tempio-olbia;tempioolbia;teramo;terni;tn;to;torino;tos;toscana;tp;tr;trani-andria-barletta;trani-barletta-andria;traniandriabarletta;tranibarlettaandria;trapani;trentino;trentino-a-adige;trentino-aadige;trentino-alto-adige;trentino-altoadige;trentino-s-tirol;trentino-stirol;trentino-sud-tirol;trentino-sudtirol;trentino-sued-tirol;trentino-suedtirol;trentinoa-adige;trentinoaadige;trentinoalto-adige;trentinoaltoadige;trentinos-tirol;trentinostirol;trentinosud-tirol;trentinosudtirol;trentinosued-tirol;trentinosuedtirol;trento;treviso;trieste;ts;turin;tuscany;tv;ud;udine;umb;umbria;urbino-pesaro;urbinopesaro;va;val-d-aosta;val-daosta;vald-aosta;valdaosta;valle-aosta;valle-d-aosta;valle-daosta;valleaosta;valled-aosta;valledaosta;vallee-aoste;valleeaoste;vao;varese;vb;vc;vda;ve;ven;veneto;venezia;venice;verbania;vercelli;verona;vi;vibo-valentia;vibovalentia;vicenza;viterbo;vr;vs;vt;vv".split(";"),
lp_all_tlds.lt=["blogspot","gov","mil"],lp_all_tlds.lu=["blogspot","gov","mil","net","org"],lp_all_tlds.to="com edu gov mil net org".split(" "),lp_all_tlds.tp=["gov"],lp_all_tlds.tv=["better-than","dyndns","gov","on-the-web","worse-than"],lp_all_tlds.mobi=["dscloud","music","weather"],lp_all_tlds.mh=["net"],lp_all_tlds.ad=["nom"],lp_all_tlds.sr=["rs"],lp_all_tlds.va=["vatican"],lp_all_tlds.aero="accident-investigation accident-prevention aerobatic aeroclub aerodrome agents air-surveillance air-traffic-control aircraft airline airport airtraffic ambulance amusement association author ballooning broker caa cargo catering certification championship charter civilaviation club conference consultant consulting control council crew design dgca educator emergency engine engineer entertainment equipment exchange express federation flight freight fuel gliding government groundhandling group hanggliding homebuilt insurance journal journalist leasing logistics magazine maintenance marketplace media microlight modelling navigation parachuting paragliding passenger-association pilot press production recreation repbody res research rotorcraft safety scientist services show skydiving software student taxi trader trading trainer union workinggroup works".split(" "),
lp_all_tlds.as=["gov"],lp_all_tlds.ba="blogspot co com edu gov mil net org rs unbi unsa".split(" "),lp_all_tlds.bg="0 1 2 3 4 5 6 7 8 9 a b blogspot c d e f g h i j k l m n o p q r s t u v w x y z".split(" "),lp_all_tlds.bh=["com","edu","gov","net","org"],lp_all_tlds.bi=["co","com","edu","or","org"],lp_all_tlds.bj=["asso","barreau","blogspot","gouv"],lp_all_tlds.bz="com edu gov net org za".split(" "),lp_all_tlds.ci="ac asso co com ed edu go gouv int md net or org presse xn--aroport-bya".split(" "),
lp_all_tlds.cl=["blogspot","co","gob","gov","mil"],lp_all_tlds.cm=["co","com","gov","net"],lp_all_tlds.cw=["com","edu","net","org"],lp_all_tlds.er=["*"],lp_all_tlds.gy="co com edu gov net org".split(" "),lp_all_tlds.io="*.stolos apps.lair customer.enonic backplaneapp boxfuse browsersafetymark com dedyn drud enonic github gitlab hasura-app hzc ngrok nid pantheon pantheonsite protonet sandcats shiftedit spacekit".split(" "),lp_all_tlds.iq="com edu gov mil net org".split(" "),lp_all_tlds.ke="blogspot.co co or ne go ac sc me mobi info".split(" "),
lp_all_tlds.kg="com edu gov mil net org".split(" "),lp_all_tlds.ki="biz com edu gov info net org".split(" "),lp_all_tlds.km="ass asso com coop edu gouv gov medecin mil nom notaires org pharmaciens prd presse tm veterinaire".split(" "),lp_all_tlds.kn=["edu","gov","net","org"],lp_all_tlds.kp="com edu gov org rep tra".split(" "),lp_all_tlds.me="ac brasilia co daplie ddns diskstation dnsfor dscloud edu gov hopto i234 its loginto myds net noip org priv synology webhop yombo".split(" "),lp_all_tlds.ml=
"com edu gouv gov net org presse".split(" "),lp_all_tlds.mn=["edu","gov","nyc","org"],lp_all_tlds.mr=["blogspot","gov"],lp_all_tlds.museum="academy agriculture air airguard alabama alaska amber ambulance american americana americanantiques americanart amsterdam and annefrank anthro anthropology antiques aquarium arboretum archaeological archaeology architecture art artanddesign artcenter artdeco arteducation artgallery arts artsandcrafts asmatart assassination assisi association astronomy atlanta austin australia automotive aviation axis badajoz baghdad bahn bale baltimore barcelona baseball basel baths bauern beauxarts beeldengeluid bellevue bergbau berkeley berlin bern bible bilbao bill birdart birthplace bonn boston botanical botanicalgarden botanicgarden botany brandywinevalley brasil bristol british britishcolumbia broadcast brunel brussel brussels bruxelles building burghof bus bushey cadaques california cambridge can canada capebreton carrier cartoonart casadelamoneda castle castres celtic center chattanooga cheltenham chesapeakebay chicago children childrens childrensgarden chiropractic chocolate christiansburg cincinnati cinema circus civilisation civilization civilwar clinton clock coal coastaldefence cody coldwar collection colonialwilliamsburg coloradoplateau columbia columbus communication communications community computer computerhistory contemporary contemporaryart convent copenhagen corporation corvette costume countryestate county crafts cranbrook creation cultural culturalcenter culture cyber cymru dali dallas database ddr decorativearts delaware delmenhorst denmark depot design detroit dinosaur discovery dolls donostia durham eastafrica eastcoast education educational egyptian eisenbahn elburg elvendrell embroidery encyclopedic england entomology environment environmentalconservation epilepsy essex estate ethnology exeter exhibition family farm farmequipment farmers farmstead field figueres filatelia film fineart finearts finland flanders florida force fortmissoula fortworth foundation francaise frankfurt franziskaner freemasonry freiburg fribourg frog fundacio furniture gallery garden gateway geelvinck gemological geology georgia giessen glas glass gorge grandrapids graz guernsey halloffame hamburg handson harvestcelebration hawaii health heimatunduhren hellas helsinki hembygdsforbund heritage histoire historical historicalsociety historichouses historisch historisches history historyofscience horology house humanities illustration imageandsound indian indiana indianapolis indianmarket intelligence interactive iraq iron isleofman jamison jefferson jerusalem jewelry jewish jewishart jfk journalism judaica judygarland juedisches juif karate karikatur kids koebenhavn koeln kunst kunstsammlung kunstunddesign labor labour lajolla lancashire landes lans larsson lewismiller lincoln linz living livinghistory localhistory london losangeles louvre loyalist lucerne luxembourg luzern mad madrid mallorca manchester mansion mansions manx marburg maritime maritimo maryland marylhurst media medical medizinhistorisches meeres memorial mesaverde michigan midatlantic military mill miners mining minnesota missile missoula modern moma money monmouth monticello montreal moscow motorcycle muenchen muenster mulhouse muncie museet museumcenter museumvereniging music national nationalfirearms nationalheritage nativeamerican naturalhistory naturalhistorymuseum naturalsciences nature naturhistorisches natuurwetenschappen naumburg naval nebraska neues newhampshire newjersey newmexico newport newspaper newyork niepce norfolk north nrw nuernberg nuremberg nyc nyny oceanographic oceanographique omaha online ontario openair oregon oregontrail otago oxford pacific paderborn palace paleo palmsprings panama paris pasadena pharmacy philadelphia philadelphiaarea philately phoenix photography pilots pittsburgh planetarium plantation plants plaza portal portland portlligat posts-and-telecommunications preservation presidio press project public pubol quebec railroad railway research resistance riodejaneiro rochester rockart roma russia saintlouis salem salvadordali salzburg sandiego sanfrancisco santabarbara santacruz santafe saskatchewan satx savannahga schlesisches schoenbrunn schokoladen school schweiz science science-fiction scienceandhistory scienceandindustry sciencecenter sciencecenters sciencehistory sciences sciencesnaturelles scotland seaport settlement settlers shell sherbrooke sibenik silk ski skole society sologne soundandvision southcarolina southwest space spy square stadt stalbans starnberg state stateofdelaware station steam steiermark stjohn stockholm stpetersburg stuttgart suisse surgeonshall surrey svizzera sweden sydney tank tcm technology telekommunikation television texas textile theater time timekeeping topology torino touch town transport tree trolley trust trustee uhren ulm undersea university usa usantiques usarts uscountryestate usculture usdecorativearts usgarden ushistory ushuaia uslivinghistory utah uvic valley vantaa versailles viking village virginia virtual virtuel vlaanderen volkenkunde wales wallonie war washingtondc watch-and-clock watchandclock western westfalen whaling wildlife williamsburg windmill workshop xn--9dbhblg6di xn--comunicaes-v6a2o xn--correios-e-telecomunicaes-ghc29a xn--h1aegh xn--lns-qla york yorkshire yosemite youth zoological zoology".split(" "),
lp_all_tlds.mz="!teledata * ac adv co edu gov mil net org".split(" "),lp_all_tlds.nf="arts com firm info net other per rec store web".split(" "),lp_all_tlds.pn=["co","edu","gov","net","org"],lp_all_tlds.pw="belau cloudns co ed go ne or".split(" "),lp_all_tlds.qa="blogspot com edu gov mil name net org sch".split(" "),lp_all_tlds.re=["asso","blogspot","com","nom"],lp_all_tlds.rs="ac blogspot co edu gov in org".split(" "),lp_all_tlds.sl=["com","edu","gov","net","org"],lp_all_tlds.sn="art blogspot com edu gouv org perso univ".split(" "),
lp_all_tlds.so=["com","net","org"],lp_all_tlds.st="co com consulado edu embaixada gov mil net org principe saotome store".split(" "),lp_all_tlds.sx=["gov"],lp_all_tlds.sz=["ac","co","org"],lp_all_tlds.tl=["gov"],lp_all_tlds.tm="co com edu gov mil net nom org".split(" "),lp_all_tlds.uz=["co","com","net","org"],lp_all_tlds.vc="com edu gov mil net org".split(" "),lp_all_tlds.ws="com dyndns edu gov mypets net org".split(" "),lp_all_tlds.net="a.prod.fastly a.ssl.fastly b.ssl.fastly global.prod.fastly global.ssl.fastly *.alwaysdata *.cryptonomic r.cdn77 at-band-camp azure-mobile azurewebsites blogdns bounceme broke-it buyshouses cdn77-ssl cloudapp cloudfront cloudfunctions ddns dnsalias dnsdojo does-it dontexist dsmynas dynalias dynathome dynv6 eating-organic endofinternet familyds feste-ip firewall-gateway from-az from-co from-la from-ny gb gets-it ham-radio-op homeftp homeip homelinux homeunix hu in in-the-band is-a-chef is-a-geek isa-geek jp kicks-ass knx-server mydissent myeffect myfritz mymediapc mypsx mysecuritycamera nhlfan no-ip office-on-the pgafan podzone privatizehealthinsurance rackmaze redirectme scrapper-site se selfip sells-it servebbs serveblog serveftp serveminecraft static-access sytes taleo thruhere uk webhop za".split(" "),
lp_all_tlds.com="*.api.githubcloud *.cns.joyent *.ext.githubcloud ap-northeast-1.compute.amazonaws ap-northeast-2.compute.amazonaws ap-southeast-1.compute.amazonaws ap-southeast-2.compute.amazonaws eu-central-1.compute.amazonaws eu-west-1.compute.amazonaws s3.ap-northeast-2.amazonaws s3.eu-central-1.amazonaws sa-east-1.compute.amazonaws us-gov-west-1.compute.amazonaws us-west-1.compute.amazonaws us-west-2.compute.amazonaws z-1.compute-1.amazonaws z-2.compute-1.amazonaws *.0emm *.githubcloudusercontent alpha.bounty-full apps.fbsbx beta.bounty-full compute-1.amazonaws compute.amazonaws elb.amazonaws eu-1.evennode eu-2.evennode eu.meteorapp gist.githubcloud s3-ap-northeast-1.amazonaws s3-ap-northeast-2.amazonaws s3-ap-southeast-1.amazonaws s3-ap-southeast-2.amazonaws s3-eu-central-1.amazonaws s3-eu-west-1.amazonaws s3-external-1.amazonaws s3-external-2.amazonaws s3-fips-us-gov-west-1.amazonaws s3-sa-east-1.amazonaws s3-us-gov-west-1.amazonaws s3-us-west-1.amazonaws s3-us-west-2.amazonaws s3-website-ap-northeast-1.amazonaws s3-website-ap-southeast-1.amazonaws s3-website-ap-southeast-2.amazonaws s3-website-eu-west-1.amazonaws s3-website-sa-east-1.amazonaws s3-website-us-east-1.amazonaws s3-website-us-gov-west-1.amazonaws s3-website-us-west-1.amazonaws s3-website-us-west-2.amazonaws s3.amazonaws us-1.evennode us-2.evennode us-east-1.amazonaws xen.prgmr 1kapp 3utilities 4u africa alpha-myqnapcloud appchizi applinzi appspot ar betainabox blogdns blogspot blogsyte bloxcms bounty-full br cechire ciscofreak cloudcontrolapp cloudcontrolled cn co codespot damnserver ddnsking de dev-myqnapcloud ditchyourip dnsalias dnsdojo dnsiskinky doesntexist dontexist doomdns dreamhosters dsmynas dyn-o-saur dynalias dyndns-at-home dyndns-at-work dyndns-blog dyndns-free dyndns-home dyndns-ip dyndns-mail dyndns-office dyndns-pics dyndns-remote dyndns-server dyndns-web dyndns-wiki dyndns-work dynns elasticbeanstalk est-a-la-maison est-a-la-masion est-le-patron est-mon-blogueur eu familyds firebaseapp firewall-gateway flynnhub freebox-os freeboxos from-ak from-al from-ar from-ca from-ct from-dc from-de from-fl from-ga from-hi from-ia from-id from-il from-in from-ks from-ky from-ma from-md from-mi from-mn from-mo from-ms from-mt from-nc from-nd from-ne from-nh from-nj from-nm from-nv from-oh from-ok from-or from-pa from-pr from-ri from-sc from-sd from-tn from-tx from-ut from-va from-vt from-wa from-wi from-wv from-wy gb geekgalaxy getmyip githubcloud githubusercontent googleapis googlecode gotdns gotpantheon gr health-carereform herokuapp herokussl hk hobby-site homelinux homesecuritymac homesecuritypc homeunix hu iamallama is-a-anarchist is-a-blogger is-a-bookkeeper is-a-bulls-fan is-a-caterer is-a-chef is-a-conservative is-a-cpa is-a-cubicle-slave is-a-democrat is-a-designer is-a-doctor is-a-financialadvisor is-a-geek is-a-green is-a-guru is-a-hard-worker is-a-hunter is-a-landscaper is-a-lawyer is-a-liberal is-a-libertarian is-a-llama is-a-musician is-a-nascarfan is-a-nurse is-a-painter is-a-personaltrainer is-a-photographer is-a-player is-a-republican is-a-rockstar is-a-socialist is-a-student is-a-teacher is-a-techie is-a-therapist is-an-accountant is-an-actor is-an-actress is-an-anarchist is-an-artist is-an-engineer is-an-entertainer is-certified is-gone is-into-anime is-into-cars is-into-cartoons is-into-games is-leet is-not-certified is-slick is-uberleet is-with-theband isa-geek isa-hockeynut issmarterthanyou jpn kr likes-pie likescandy logoip meteorapp mex myactivedirectory myasustor mydrobo myqnapcloud mysecuritycamera myshopblocks myvnc neat-url net-freaks nfshost no on-aptible onthewifi operaunite outsystemscloud ownprovider pagefrontapp pagespeedmobilizer pgfog point2this publishproxy qa2 qc quicksytes rackmaze rhcloud ro ru sa saves-the-whales se securitytactics selfip sells-for-less sells-for-u servebbs servebeer servecounterstrike serveexchange serveftp servegame servehalflife servehttp servehumour serveirc servemp3 servep2p servepics servequake servesarcasm simple-url sinaapp space-to-rent stufftoread teaches-yoga townnews-staging uk unusualperson us uy vipsinaapp withgoogle withyoutube workisboring writesthisblog xenapponazure yolasite za".split(" "),
lp_all_tlds.org="ssl.origin.cdn77-secure al.eu asso.eu at.eu au.eu be.eu bg.eu c.cdn77 ca.eu cd.eu ch.eu cn.eu cy.eu cz.eu de.eu dk.eu edu.eu ee.eu es.eu fi.eu fr.eu go.dyndns gr.eu home.dyndns hr.eu hu.eu ie.eu il.eu in.eu int.eu is.eu it.eu jp.eu kr.eu lt.eu lu.eu lv.eu mc.eu me.eu mk.eu mt.eu my.eu net.eu ng.eu nl.eu no.eu nz.eu paris.eu pl.eu pt.eu q-a.eu ro.eu rsc.cdn77 ru.eu se.eu si.eu sk.eu tr.eu uk.eu us.eu ae blogdns blogsite bmoattachments boldlygoingnowhere cable-modem certmgr cloudns collegefan couchpotatofries ddnss dnsalias dnsdojo doesntexist dontexist doomdns dsmynas duckdns dvrdns dynalias dyndns endofinternet endoftheinternet eu familyds from-me game-host gotdns hepforge hk hobby-site homedns homeftp homelinux homeunix hopto is-a-bruinsfan is-a-candidate is-a-celticsfan is-a-chef is-a-geek is-a-knight is-a-linux-user is-a-patsfan is-a-soxfan is-found is-lost is-saved is-very-bad is-very-evil is-very-good is-very-nice is-very-sweet isa-geek js kicks-ass misconfused mlbfan my-firewall myfirewall myftp mysecuritycamera nflfan no-ip pimienta podzone poivron potager read-books readmyblog selfip sellsyourhome servebbs serveftp servegame spdns stuff-4-sale sweetpepper tunk tuxfamily ufcfan us webhop wmflabs za zapto".split(" "),
lp_all_tlds.de="dyn.cosidns dyn.ddnss dyn.home-webserver dyndns.ddnss blogspot com ddnss dnshome dnsupdater dyn-ip24 dynamisches-dns dyndns1 firewall-gateway fuettertdasnetz goip home-webserver internet-dns isteingeek istmein keymachine l-o-g-i-n lebtimnetz leitungsen logoip my-gateway my-router myhome-server spdns taifun-dns traeumtgerade".split(" "),lp_all_tlds.biz="cloudns dscloud dyndns for-better for-more for-some for-the mmafan myftp no-ip selfip webhop".split(" "),lp_all_tlds.info="barrel-of-knowledge barrell-of-knowledge cloudns dvrcam dynamic-dns dyndns for-our groks-the groks-this here-for-more ilovecollege knowsitall no-ip nsupdate selfip webhop".split(" "),
lp_all_tlds.cc="cloudns fantasyleague ftpaccess game-server myphotos scrapping".split(" "),lp_all_tlds.nu=["merseine","mine","shacknet"],lp_all_tlds.cf=["blogspot"],lp_all_tlds.cv=["blogspot"],lp_all_tlds.cz=["blogspot","co","e4","realm"],lp_all_tlds.dk="biz blogspot co firm reg store".split(" "),lp_all_tlds.sk=["blogspot"],lp_all_tlds.td=["blogspot"],lp_all_tlds.ms=["com","edu","gov","net","org"],lp_all_tlds.vu=["com","edu","net","org"],lp_all_tlds["xn--90a3ac"]="xn--80au xn--90azh xn--c1avg xn--d1at xn--o1ac xn--o1ach".split(" "),
lp_all_tlds.su="adygeya arkhangelsk balashov bashkiria bryansk dagestan grozny ivanovo kalmykia kaluga karelia khakassia krasnodar kurgan lenug mordovia msk murmansk nalchik nov obninsk penza pokrovsk sochi spb togliatti troitsk tula tuva vladikavkaz vladimir vologda".split(" "),lp_all_tlds.name=["forgot.her","forgot.his"],lp_all_tlds.gl=["co","com","edu","net","org"],lp_all_tlds.am=["blogspot"],lp_all_tlds.md=["blogspot"],lp_all_tlds.si=["blogspot"],lp_all_tlds.link=["cyon","mypep"],lp_all_tlds.site=
["cyon"],lp_all_tlds.estate=["*.compute"],lp_all_tlds.network=["*.alces"],lp_all_tlds.management=["router"],lp_all_tlds.ovh=["nerdpol"],lp_all_tlds.cloud=["*.magentosite","*.statics","myfusion"],lp_all_tlds.xyz=["fhapp"],lp_all_tlds.land=["dev.static","sites.static","static"],lp_all_tlds.space=["stackspace"],lp_all_tlds.zone=["*.triton"],lp_all_tlds.krd=["co","edu"],lp_all_tlds.systems=["knightpoint"],lp_all_tlds.hosting=["opencraft"],lp_all_tlds.fit=["ptplus"],lp_all_tlds.asia=["cloudns"],lp_all_tlds.club=
["cloudns"],lp_all_tlds.faith=["ybo"],lp_all_tlds.one=["homelink"],lp_all_tlds.party=["ybo"],lp_all_tlds.review=["ybo"],lp_all_tlds.science=["ybo"],lp_all_tlds.trade=["ybo"],lp_all_tlds.edu=["*"],lp_all_tlds.gov=["*"]};var lpParseUriCache=[],lpParseUriNumber=0;
function lpParseUri(a){if("string"!=typeof a)return"";if(null!=lpParseUriCache[a])return lpParseUriCache[a];var b=a,c=a.substring(0,8).toLowerCase();0!==c.indexOf("http://")&&0!==c.indexOf("https://")&&0!==c.indexOf("ftp://")&&(a="https://"+a);try{if("function"==typeof URL){var d=new URL(a);if("object"==typeof d&&"string"==typeof d.href&&"undefined"!=typeof d.hostname)var f=d.hostname}}catch(h){}a=lpParseUri_old(a);if("undefined"!=typeof f&&"undefined"!=typeof a.host&&f.toLowerCase()!=a.host.toLowerCase())return"";
"undefined"!=typeof a.host&&(a.host=fix_url_host(a.host));if(500<lpParseUriNumber){for(d in lpParseUriCache){delete lpParseUriCache[d];break}lpParseUriNumber=0}lpParseUriCache[b]=a;lpParseUriNumber++;return a}
function lpParseUri_old(a){var b=null,c=null;-1!=a.indexOf("#")&&(c=a.substring(a.indexOf("#")+1),a=a.substring(0,a.indexOf("#")));-1!=a.indexOf("?")&&(b=a.substring(a.indexOf("?")+1),a=a.substring(0,a.indexOf("?")));for(;;){var d=a.match(/^(.*:\/\/[^\/]+\/.*)@/);if(d)a=a.substring(0,d[1].length)+a.substring(d[1].length).replace(/@/g,"%40");else break}if(2047<a.length)return"";var f=lpParseUri.options;d=null;try{d=f.parser[f.strictMode?"strict":"loose"].exec(a)}catch(k){try{d=500<a.length?f.parser[f.strictMode?
"strict":"loose"].exec(a.substr(0,500)):f.parser[f.strictMode?"strict":"loose"].exec(a.substr(0,floor(a.length/2)))}catch(e){lpReportError("parseuri : failing "+a),d=f.parser[f.strictMode?"strict":"loose"].exec("http://")}}a=d;var h={};for(d=14;d--;)h[f.key[d]]=a[d]||"";h[f.q.name]={};h[f.key[12]].replace(f.q.parser,function(a,b,c){b&&(h[f.q.name][b]=c)});null!=b&&(h.query=b,null!=c&&(h.anchor=c));return h}
lpParseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
var lpCanUrlCache=[],lpCanUrlExNumber=0;
function lpcanonizeUrl(a,b){if("about:blank"==a)return"";if(null!=lpCanUrlCache[a])return lpCanUrlCache[a];null==b&&(b=lpParseUri(a));var c="";""!=b.port&&b.port!=get_default_port(b.protocol)&&(c=":"+b.port);if(b.host)b=b.host.toLowerCase()+c+b.path;else{if(!a)return"";b=a}-1!=b.indexOf(";")&&(b=b.substring(0,b.indexOf(";")));if(500<lpCanUrlExNumber){for(var d in lpCanUrlCache){delete lpCanUrlCache[d];break}lpCanUrlExNumber=0}lpCanUrlCache[a]=b;lpCanUrlExNumber++;return b}
function lp_gettld(a,b){"undefined"!=typeof lp_all_tlds&&null!=lp_all_tlds||lp_init_tlds();if("string"!=typeof a)return"";if(""==a&&"string"==typeof b&&0==b.indexOf("file://"))return"file:";a=a.toLowerCase();a=a.replace(/\.$/,"");b=a.split(".");if(a.match(/^\d+\.\d+\.\d+\.\d+$/))a=4;else if(a=2,3<=b.length){var c=b[b.length-1];if("undefined"!=typeof lp_all_tlds[c]){var d=b[b.length-2];3<=b.length&&lp_in_array(b[b.length-3]+"."+d,lp_all_tlds[c])?a=4:lp_in_array(d,lp_all_tlds[c])&&(a=3)}}for(;b.length>
a;)b.shift();return b.join(".")}function lp_gettld_url(a){var b=lpParseUri(a);return lp_gettld(b.host,a)}function getname_url(a){a=lpParseUri(punycode.URLToUnicode(a));return("string"==typeof a.host?a.host:"").replace(/^www\./,"")}function lptrim(a){return"string"!=typeof a?a:a.replace(/^\s+|\s+$/g,"")}function lp_regexp_quote(a){return(a+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}=!<>\|:])/g,"\\$1")}
function getactiontld(a){return"undefined"==typeof a||null==a||"undefined"==typeof a.action||0==a.action.indexOf("javascript:")?"":lp_gettld_url(punycode.URLToASCII(a.action))}function getname(a,b){if(b&&"undefined"!=typeof a.id&&""!=a.id)return a.id;if("undefined"!=typeof a&&null!=a){if("undefined"!=typeof a.name&&""!=a.name)return a.name;if("undefined"!=typeof a.id)return a.id}return""}
function lpIsVisible(a,b){if(a&&"INPUT"==a.tagName&&"hidden"==a.type)return!1;for(;a&&"BODY"!=a.tagName;a=a.parentNode){if("undefined"!=typeof a.style&&("hidden"==a.style.visibility||"none"==a.style.display))return!1;try{var c=a.ownerDocument.defaultView.getComputedStyle(a,"");if("hidden"==c.visibility||"none"==c.display)return!1}catch(d){}if(b)break}return!0}
function lp_in_array(a,b){if("undefined"==typeof b||null===b)return!1;for(var c=b.length,d=0;d<=c;d++)if("undefined"!=typeof b[d]&&b[d]==a)return lpArrayOffset=d,!0;return!1}function strip(a){if(!a.length)return a;a=a.replace(/\s+/g," ");a=a.replace(/^\s+|\s+$/g,"");a=a.replace(/[\|]+$/g,"");var b=a.match(/\|([^\|]+)$/);b&&(a=b[1],a=a.replace(/^\s+|\s+$/g,""));return a}
function lpxmlescape(a){if("undefined"==typeof a||null===a)return"";"number"==typeof a&&(a=""+a);a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=a.replace(/"/g,"&quot;")}function lpxmlunescape(a){if("undefined"==typeof a||null===a)return"";"number"==typeof a&&(a=""+a);a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/&quot;/g,'"');return a=a.replace(/&amp;/g,"&")}var lpRegExCache=[],lpRegExNumber=0;
function regexp_match_c(a,b){var c=a.toString()+"_"+b;80<c.length&&("function"==typeof fasthash?c=fasthash(c):"function"==typeof SHA256&&(c=SHA256(c)));if(null!=lpRegExCache[c])return"1"==lpRegExCache[c];a=a.exec(b);if(2500<lpRegExNumber){for(var d in lpRegExCache){delete lpRegExCache[d];break}lpRegExNumber=0}lpRegExCache[c]=a?"1":"0";lpRegExNumber++;return a}
function fire_onchange(a,b,c){try{if(a){if(a.ownerDocument&&"function"==typeof a.ownerDocument.createEvent){var d=a.ownerDocument.createEvent("Events");d.initEvent("change",!0,!0);a.dispatchEvent(d);d=a.ownerDocument.createEvent("Events");d.initEvent("input",!0,!0);a.dispatchEvent(d);"undefined"!=typeof ischrome&&ischrome&&"function"==typeof a.onkeyup&&(c&&(d.keyCode=8),a.onkeyup(d))}else"undefined"!=typeof a.fireEvent&&(a.fireEvent("onchange"),a.fireEvent("oninput"));("undefined"==typeof b||null==
b||b)&&"function"==typeof sendKey&&sendKey("SHIFT",a);if("function"==typeof lpGetBrowserForDocument){var f=lpGetBrowserForDocument(a.ownerDocument);f&&(f.lpfieldchanged=!0)}}}catch(h){}}function get_default_port(a){switch(a){case "http":return 80;case "https":return 443;case "ftp":return 21;default:return 0}}function get_port(a){var b=0;"undefined"!=typeof a.port&&a.port?b=a.port:"undefined"!=typeof a.protocol&&a.protocol&&(b=get_default_port(a.protocol));return b}
function compare_ports(a,b){a=""!=a.port?a.port:get_default_port(a.protocol);b=""!=b.port?b.port:get_default_port(b.protocol);return a==b}function array_size(a){var b=a.length?--a.length:-1,c;for(c in a)b++;return b}function lpgetlocalts(){return(new Date).getTime()}function lp_get_gmt_timestamp(){var a=(new Date).getTime();return parseInt(a/1E3)}function lp_get_local_timestamp(){return lp_get_gmt_timestamp()}
function checkurlrules(a,b,c,d,f,h,k){if(0==b.length)return b;for(var e=[],l=[],n=0;n<a.length;n++)if("undefined"==typeof a[n].tld&&(a[n].tld=lp_gettld_url(a[n].url),a[n].parts=lpParseUri(a[n].url),a[n].path="string"==typeof a[n].parts.path?a[n].parts.path:""),c==a[n].tld){var t=d;"undefined"!=typeof a[n].case_insensitive&&"1"==a[n].case_insensitive&&(t=t.toLowerCase());""!=a[n].path&&0!=t.indexOf(a[n].path)?l[l.length]=a[n]:f==a[n].parts.host||1==a[n].exacthost&&-1!=f.indexOf("."+a[n].parts.host)||
0==a[n].exacthost?e[e.length]=a[n]:l[l.length]=a[n]}if(0==e.length&&0==l.length)return b;if(0<e.length){a=b;for(n=0;n<e.length;n++)c=applyurlrule(b,e[n],d,f,k,h),c.length<a.length&&(a=c);return a}for(n=0;n<l.length;n++)removeurlrule(b,l[n],h,f,k);return b}
function applyurlrule(a,b,c,d,f,h){var k="undefined"!=typeof b.case_insensitive&&"1"==b.case_insensitive;k&&(c=c.toLowerCase());var e=b.path;if(""!=e&&0!=c.indexOf(e))return a;for(var l=e.split("/").length,n=[],t=!1,r=0;r<a.length;r++){var p=a[r],y=p.pathlevelmatch,q=p.servermatch,x=p.portmatch;if("undefined"==typeof y||k){y=c.split("/");p="undefined"!=typeof p.url?p.url:h[p.id].url;k&&(p=p.toLowerCase());p=lpParseUri(p);p.path="undefined"!=typeof p.path?p.path:"";q=p.path.split("/");for(x=0;x<y.length&&
x<q.length&&q[x]==y[x];x++);y=x;q=d==p.host;x=f==get_port(p)}""!=e&&y<l||(t=t||1==b.exacthost||1==b.exactport?!0:!1,!q&&0!=b.exacthost||!x&&0!=b.exactport||(t=!0,n[n.length]=a[r]))}return t?n:a}
function removeurlrule(a,b,c,d,f){d="undefined"!=typeof b.case_insensitive&&"1"==b.case_insensitive;f=b.path;for(var h=0;h<a.length;h++){var k="undefined"!=typeof a[h].id?a[h].id:a[h].aid;"undefined"!=typeof c[k]&&(k=c[k].url,d&&(k=k.toLowerCase()),k=lpParseUri(k),k.path="undefined"!=typeof k.path?k.path:"",""!=f&&0!=k.path.indexOf(f)||"0"!=b.exacthost&&b.parts.host!=k.host||"0"!=b.exactport&&get_port(b.parts)!=get_port(k)||(a.splice(h,1),--h))}}
function lpcreaterandomhexstring(a){for(var b="",c=0;c<a;c++){var d=get_random(0,15);b+="0123456789ABCDEF".substring(d,d+1)}return b}
function iso2to3(a){var b={AD:"AND",AE:"ARE",AF:"AFG",AG:"ATG",AL:"ALB",AM:"ARM",AO:"AGO",AQ:"ATA",AR:"ARG",AT:"AUT",AU:"AUS",AW:"ABW",AZ:"AZE",BA:"BIH",BB:"BRB",BD:"BGD",BE:"BEL",BF:"BFA",BG:"BGR",BH:"BHR",BI:"BDI",BJ:"BEN",BM:"BMU",BN:"BRN",BO:"BOL",BR:"BRA",BS:"BHS",BT:"BTN",BW:"BWA",BY:"BLR",BZ:"BLZ",CA:"CAN",CD:"COD",CF:"CAF",CG:"COG",CH:"CHE",CI:"CIV",CL:"CHL",CM:"CMR",CN:"CHN",CO:"COL",CR:"CRI",CU:"CUB",CV:"CPV",CY:"CYP",CZ:"CZE",DE:"DEU",DJ:"DJI",DK:"DNK",DM:"DMA",DO:"DOM",DZ:"DZA",EC:"ECU",
EE:"EST",EG:"EGY",EH:"ESH",ER:"ERI",ES:"ESP",ET:"ETH",FI:"FIN",FJ:"FJI",FM:"FSM",FO:"FRO",FR:"FRA",GA:"GAB",GB:"GBR",GD:"GRD",GE:"GEO",GF:"GUF",GH:"GHA",GM:"GMB",GN:"GIN",GP:"GLP",GQ:"GNQ",GR:"GRC",GT:"GTM",GW:"GNB",GY:"GUY",HN:"HND",HR:"HRV",HT:"HTI",HU:"HUN",IC:"ESC",ID:"IDN",IE:"IRL",IL:"ISR",IN:"IND",IO:"IOT",IQ:"IRQ",IR:"IRN",IS:"ISL",IT:"ITA",JE:"JEY",JM:"JAM",JO:"JOR",JP:"JPN",KE:"KEN",KG:"KGZ",KH:"KHM",KI:"KIR",KM:"COM",KN:"KNA",KP:"PRK",KR:"KOR",KW:"KWT",KZ:"KAZ",LA:"LAO",LB:"LBN",LC:"LCA",
LI:"LIE",LK:"LKA",LR:"LBR",LS:"LSO",LT:"LTU",LU:"LUX",LV:"LVA",LY:"LBY",MA:"MAR",MC:"MCO",MD:"MDA",ME:"MNE",MG:"MDG",MK:"MKD",ML:"MLI",MM:"MMR",MN:"MNG",MO:"MAC",MQ:"MTQ",MR:"MRT",MS:"MSR",MU:"MUS",MV:"MDV",MW:"MWI",MX:"MEX",MY:"MYS",MZ:"MOZ",NA:"NAM",NE:"NER",NG:"NGA",NI:"NIC",NL:"NLD",NO:"NOR",NP:"NPL",NZ:"NZL",OM:"OMN",PA:"PAN",PE:"PER",PG:"PNG",PH:"PHL",PK:"PAK",PL:"POL",PS:"PSE",PT:"PRT",PW:"PLW",PY:"PRY",QA:"QAT",RE:"REU",RO:"ROU",RS:"SRB",RU:"RUS",RW:"RWA",SA:"SAU",SB:"SLB",SC:"SYC",SD:"SDN",
SE:"SWE",SH:"SHN",SI:"SVN",SK:"SVK",SL:"SLE",SM:"SMR",SN:"SEN",SO:"SOM",SR:"SUR",ST:"STP",SV:"SLV",SY:"SYR",SZ:"SWZ",TD:"TCD",TF:"ATF",TG:"TGO",TH:"THA",TJ:"TJK",TL:"TLS",TM:"TKM",TN:"TUN",TR:"TUR",TT:"TTO",TW:"TWN",TZ:"TZA",UA:"UKR",UG:"UGA",US:"USA",UY:"URY",UZ:"UZB",VC:"VCT",VE:"VEN",VN:"VNM",VU:"VUT",YE:"YEM",ZA:"ZAF",ZM:"ZMB",ZW:"ZWE"};return"undefined"!=typeof b[a]?b[a]:a}
function crypto_atob(a){if(a&&17<=a.length&&"!"==a.charAt(0)){var b=a.indexOf("|");if(-1!=b)return"!"+atob(a.substring(1,b))+atob(a.substring(b+1))}return atob(a)}function crypto_btoa(a){return a&&33<=a.length&&1==a.length%16&&"!"==a.charAt(0)?"!"+btoa(a.substring(1,17))+"|"+btoa(a.substring(17)):btoa(a)}
function CompareLastPassVersions(a,b,c){var d=0,f=0,h=0,k=0,e=0,l=0,n=a.split(".");for(a=0;a<n.length;a++)0==a?d=parseInt(n[a]):1==a?f=parseInt(n[a]):2==a&&(h=parseInt(n[a]));b=b.split(".");for(a=0;a<b.length;a++)0==a?k=parseInt(b[a]):1==a?e=parseInt(b[a]):2==a&&(l=parseInt(b[a]));return d!=k?d>k?1:-1:f!=e?f>e?1:-1:c?0:h!=l?h>l?1:-1:0}function lpalert(a,b){"undefined"!=typeof LP&&"function"==typeof LP.lpgs?LP.alert(LP.lpgs(a),b):"function"==typeof alertfrombg?alertfrombg(gs(a)):alert(gs(a))}
function issharedfolder(a,b){if(!a||0==a.length||"undefined"==typeof b||null==b)return!1;0<b.indexOf("\\")&&(b=b.substr(0,b.indexOf("\\")));if(""==b)return!1;for(var c in a){var d=a[c];if("object"==typeof d&&"undefined"!=typeof d.decsharename){var f="0";"undefined"!==typeof d.linkedshare&&"1"==d.linkedshare&&(f="1");if(d.decsharename==b)return{id:d.id,sharekey:d.key,decsharename:d.decsharename,readonly:d.readonly,give:d.give,associative:d.associative,linkedshare:f}}}return!1}
function getsharekey(a,b){for(var c=0;"undefined"!=typeof a&&null!=a&&c<a.length;c++){var d=a[c];if(d.id==b)return d.key}return null}function lpmenc_acct(a,b,c,d){return"undefined"==typeof c.sharefolderid?lpmenc(a,b):(c=issharedfolder(d,c.group))?lpmenc(a,b,c.sharekey):lpmenc(a,b)}function lpmdec_acct(a,b,c,d){return"undefined"==typeof c.sharefolderid?lpmdec(a,b):(c=issharedfolder(d,c.group))?lpmdec(a,b,c.sharekey):lpmdec(a,b)}
function lpdec_acct(a,b,c){return"undefined"==typeof b.sharefolderid?lpdec(a):(b=issharedfolder(c,b.group))?lpdec(a,b.sharekey):lpdec(a)}function lpenc_acct(a,b,c){return"undefined"==typeof b.sharefolderid?lpenc(a):(b=issharedfolder(c,b.group))?lpenc(a,b.sharekey):lpenc(a)}function checkmove(a,b,c){return b&&!checkreadonly(b,!1,c)?!1:!0}function checkreadonly(a,b,c){return a&&"1"==a.readonly?(b||lpalert("Sorry, this shared folder is read-only.",c),!1):!0}
function checkUsernameHash(){if(null==lpusername_hash||""==lpusername_hash){var a=null;"string"==typeof g_username&&""!=g_username?a=g_username:"string"==typeof lpusername&&""!=lpusername&&(a=lpusername);null!=a&&("function"==typeof SHA256?lpusername_hash=SHA256(a):"function"==typeof lp_sha256&&(lpusername_hash=lp_sha256(a)))}}var g_lastattachreq="";
function checkAttach(){!("object"==typeof LP&&"undefined"!=typeof LP.isFennec&&LP.isFennec||"function"==typeof canSaveAttach&&!canSaveAttach())&&0<lp_server_attach_version&&(checkUsernameHash(),ReadFileGeneric(lpusername_hash+"_version.att",25,function(a){a||(a=0);lp_local_attach_version=a;a<lp_server_attach_version&&lpusername_hash+a!=g_lastattachreq&&(g_lastattachreq=lpusername_hash+a,lplog("checkAttach : calling getattach.php lp_local_attach_version="+lp_local_attach_version+" lp_server_attach_version="+
lp_server_attach_version),a="version="+LP.en(a)+"&b64=1&chunked=1",LP.lpMakeRequest(("string"==typeof base_url?base_url:LP.lp_base)+"getattach.php",a,lpSaveAttach))}))}
function lpSaveAttach(a,b){4==a.readyState&&200==a.status&&(a=atob(a.responseText),lp_local_attach_version=get_version(a,"LPAT"),lplog("lpSaveAttach : lp_local_attach_version="+lp_local_attach_version+" lp_server_attach_version="+lp_server_attach_version),WriteFileGeneric(lpusername_hash+"_version.att",lp_local_attach_version),parseAttachData(a,!0),!isNaN(parseInt(lp_local_attach_version))&&isFinite(lp_local_attach_version)&&parseInt(lp_local_attach_version)<lp_server_attach_version&&(lplog("lpSaveAttach : calling checkAttach since there are still more chunks"),
LP.mostRecent().setTimeout(function(){checkAttach()},1E3)))}function lpReadAttach(a,b,c){checkUsernameHash();if(b)ReadFileGeneric(lpusername_hash+"_"+a+".att",null,function(a){a?b(b64_to_utf8_safe(a)):b(null)});else{var d=ReadFileGeneric(lpusername_hash+"_"+a+".att");if(!d){idparts=a.split("-");if(d=get_attach_info(a))LP.get_record(idparts[0]),get_individual_attachment(d.storagekey,a,c,null);return null}return b64_to_utf8_safe(d)}}
function parseAttachData(a){if(a&&a.length&&0==a.indexOf("LPAT"))for(var b=a.length,c=unserialize_num(a.substring(4,8))+8;c<b;){var d=unserialize_num(a.substring(c,c+4)),f=c+4,h=unserialize_num(a.substring(f,f+4)),k=a.substring(f+4,f+4+h);f+=4+h;h=unserialize_num(a.substring(f,f+4));f=a.substring(f+4,f+4+h);"delete"==f?DeleteFileGeneric(lpusername_hash+"_"+k+".att"):(k=lpusername_hash+"_"+k+".att",lplog("parseAttachData : writing file="+k),WriteFileGeneric(k,utf8_to_b64(f)));c+=4+d}}
function applyattacharraychanges(a){if("undefined"!=typeof a.add)for(var b in a.add)if(a.add.hasOwnProperty(b)){var c={};c.id=a.add[b].id;c.parent=a.add[b].parent;c.mimetype=a.add[b].mimetype;c.filename=a.add[b].filename;c.size=a.add[b].size;c.storagekey=a.add[b].storagekey;lp_attaches.push(c)}if("undefined"!=typeof a.remove)for(b in a.remove)for(c=0;c<lp_attaches.length;c++)a.remove[b]==lp_attaches[c].id&&lp_attaches.splice(c,1)}
function rollbackattacharrayadds(a){if("undefined"!=typeof a.add)for(var b in a.add)if(a.add.hasOwnProperty(b))for(var c=0;c<lp_attaches.length;c++)if(lp_attaches[c].id==a.add[b].id){lp_attaches.splice(c,1);break}}function get_attach_info(a){for(var b in lp_attaches)if(lp_attaches.hasOwnProperty(b)&&lp_attaches[b].id==a)return lp_attaches[b];return null}
function get_individual_attachment(a,b,c,d){a="getattach="+encodeURIComponent(a);c&&c.length&&(a+="&sharedfolderid="+encodeURIComponent(c));LP.lpMakeRequest(("string"==typeof base_url?base_url:LP.lp_base)+"getattach.php",a,function(a){if(4==a.readyState&&200==a.status){a=a.responseText;var c=lpusername_hash+"_"+b+".att";lplog("parseAttachData : writing file="+c);WriteFileGeneric(c,utf8_to_b64(a));d&&"function"==typeof d&&d(a)}})}function utf8_to_b64(a){return btoa(a)}
function b64_to_utf8_safe(a){return a&&a.length&&"!"==a[0]?a:b64_to_utf8(a)}function b64_to_utf8(a){return atob(a)}function is_encrypted_field(a){return"text"==a||"password"==a||"textarea"==a||"email"==a||"tel"==a||"url"==a}
function clear_filled_fields(a,b,c){"undefined"==typeof c&&(c=1);if(10<c)return null;if(a&&"object"==typeof a.lp_filled_fields){for(var d=0;d<a.lp_filled_fields.length;d++){var f=a.lp_filled_fields[d].value;a.lp_filled_fields[d].value="";""!=f&&fire_onchange(a.lp_filled_fields[d])}a.lp_filled_fields=[]}if(a&&"object"==typeof a.formfillfields){d=a.formfillfields;for(var h in d){var k=d[h].field;f=k.value;k.value="";""!=f&&fire_onchange(k)}a.formfillfields=[]}if(b&&b.frames)for(a=b.frames.length,10<
a&&(a=10),d=0;d<a;d++)b.frames[d].document&&clear_filled_fields(b.frames[d].document,b.frames[d].window,c+1)}function get_sitepwlen(a){return"undefined"!=typeof LP&&"undefined"!=typeof LP.sitepwlen&&"undefined"!=typeof LP.sitepwlen[a]?LP.sitepwlen[a]:"undefined"!=typeof g_sitepwlen&&"undefined"!=typeof g_sitepwlen[a]?g_sitepwlen[a]:"undefined"!=typeof calllptoolband?parseInt(calllptoolband(["getsitepwlens",a])):1}
function fix_url_host(a){if("string"==typeof a){if(27<a.length&&-1!=a.indexOf("logmein.com",a.length-11)){var b=a.match(/^(.*)-[a-z]{10}(\.app).*(\.logmein\.com)$/);if(b)return b[1]+b[2]+b[3]}if(24<a.length&&-1!=a.indexOf("logme.in",a.length-8)&&(b=a.match(/^(.*)-[a-z]{10}(\.app).*(\.logme\.in)$/)))return b[1]+b[2]+b[3]}return a}function is_watermark(a){return!1}function is_watermark_password(a){return!1}
function updateAndEncryptData(a,b,c,d,f,h){f="";var k="undefined"==typeof g_shares?lpshares:g_shares;a="undefined"!=typeof a?a.split("\n"):[];for(var e=0;e<a.length;e++){var l=a[e].split("\t");if(4==l.length||5==l.length){var n=decodeURIComponent(l[1]),t=decodeURIComponent(l[2]);l=l[3];var r=!1,p=t,y=!1;var q=null;"select-one"!=l||"temp_id"!=n&&"userId-select"!=n||""==t||t!=h.username||"fidelity.com"!=d.tld||"undefined"==typeof h.fromiframe||""==h.new_username||(l="text");if("email"==l||"tel"==l||
"text"==l||"password"==l||"hidden"==l||"textarea"==l||"url"==l)c&&c.push(t),h?"email"!=l&&"tel"!=l&&"text"!=l&&"url"!=l||t!=h.username||""===t&&("undefined"==typeof h.fromiframe||""==h.new_username)?"password"==l&&t==h.password&&(""!==t||"undefined"!=typeof h.fromiframe&&""!=h.new_password)&&(q=lpenc_acct(h.new_password,d,k)):q=lpenc_acct(h.new_username,d,k):q="undefined"!=typeof d.username&&""!=d.username&&t==lpmdec_acct(d.username,!0,d,k)?crypto_btoa(d.username):"undefined"!=typeof d.password&&
""!=d.password&&t==lpmdec_acct(d.password,!0,d,k)?crypto_btoa(d.password):lpenc_acct(t,d,k),null==q?"function"==typeof verbose_log&&verbose_log("updateAndEncryptData ERROR: field="+n):f+="0\t"+LP.en(n)+"\t"+LP.en(q)+"\t"+LP.en(l)+"\n","hidden"!=l&&null!=q&&(r=!0,p=crypto_atob(q));else if("action"==l)f+="0\taction\t"+LP.en(t)+"\taction\n";else if("method"==l)f+="0\tmethod\t"+LP.en(t)+"\tmethod\n";else{if(h&&0===h.save_all)continue;f+="0\t"+LP.en(n)+"\t"+LP.en(t)+"\t"+LP.en(l)+"\n";if("radio"==l||"checkbox"==
l){if(y="-1"==t.substring(t.length-2),"radio"!=l||y)r=!0,p=t.substring(0,t.length-2)}else"select-one"==l&&(r=!0)}r&&(t={otherfield:!1},t.name=n,t.type=l,t.value=p,t.checked=y,t.formname="",t.urid="0",t.otherlogin="0",t.url="",b[b.length]=t)}}return f}function lp_ofa(a){return ofa.apply(this,arguments)}function lp_of(a){return of.apply(this,arguments)}function lp_ofja(a){return ofja.apply(this,arguments)}function lp_es(a){return es.apply(this,arguments)}
function fill_field_via_keys(a,b){a.value="";a.focus();for(var c=0;c<b.length;c++)send_simulated_key(a,b.charCodeAt(c),0,!1)}function LP_decimate_children(a){if(!a)return!1;try{for(;a.firstChild;)a.removeChild(a.firstChild)}catch(b){return!1}return!0}function csv_encode(a){if("string"!=typeof a)return"";a.match(/^[=+-]/)&&!a.match(/^[=+-][0-9.]+$/)&&(a=" "+a);a.match(/,|\r|\n|"/)&&(a='"'+a.replace(/"/g,'""')+'"');return a}
function parse_emailaddress(a){var b={username:"",hostname:""};if(!a||"string"!=typeof a)return b;a=a.trim();if(0===a.indexOf("@"))b.hostname=a.substring(1);else if(0<a.indexOf("@")){var c=a.substring(0,a.lastIndexOf("@"));a=a.substring(a.lastIndexOf("@")+1);b.username=c;b.hostname=a}else b.username=a;return b}
function is_equivalent_email(a,b,c,d){if(!(a&&b&&c&&d))return!1;var f=function(){return!1};"undefined"!=typeof compare_tlds&&(f=compare_tlds);"undefined"!=typeof compare_equiv_domains&&(f=compare_equiv_domains);"undefined"!=typeof LP_compare_tlds&&(f=LP_compare_tlds);c=lp_gettld_url(c);d=lp_gettld_url(d);if(!f(c,d))return!1;a=parse_emailaddress(a);b=parse_emailaddress(b);return""===a.hostname&&""===b.hostname?a.username===b.username:a.username===b.username&&!b.hostname&&(f(c,"gmail.com")&&f(a.hostname,
"gmail.com")&&f(d,"gmail.com")||f(c,"yahoo.com")&&f(a.hostname,"yahoo.com")&&f(d,"yahoo.com"))||a.username===b.username&&a.hostname&&b.hostname&&f(c,d)&&f(a.hostname,d)&&f(b.hostname,d)?!0:!1};var g_punycodecache=[],g_punycodecache2=[];function isipv6url(a){return a.match(/\[.*\]/)?!0:!1}
var punycode=new function(){function a(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function b(a,b,c){a=c?Math.floor(a/700):a>>1;a+=Math.floor(a/b);for(b=0;455<a;b+=36)a=Math.floor(a/35);return Math.floor(b+36*a/(a+38))}function c(a,b){a-=(26>a-97)<<5;return a+((!b&&26>a-65)<<5)}this.utf16={decode:function(a){for(var b=[],c=0,d=a.length,e,l;c<d;){e=a.charCodeAt(c++);if(55296===(e&63488)){l=a.charCodeAt(c++);if(55296!==(e&64512)||56320!==(l&64512))throw new RangeError("UTF-16(decode): Illegal UTF-16 sequence");
e=((e&1023)<<10)+(l&1023)+65536}b.push(e)}return b},encode:function(a){for(var b=[],c=0,d=a.length,e;c<d;){e=a[c++];if(55296===(e&63488))throw new RangeError("UTF-16(encode): Illegal UTF-16 value");65535<e&&(e-=65536,b.push(String.fromCharCode(e>>>10&1023|55296)),e=56320|e&1023);b.push(String.fromCharCode(e))}return b.join("")}};this.decode=function(a,c){var d=[],f=[],e=a.length,l,n;var t=128;var r=0;var p=72;var y=a.lastIndexOf("-");0>y&&(y=0);for(l=0;l<y;++l){c&&(f[d.length]=26>a.charCodeAt(l)-
65);if(128<=a.charCodeAt(l))throw new RangeError("Illegal input >= 0x80");d.push(a.charCodeAt(l))}for(y=0<y?y+1:0;y<e;){l=r;var q=1;for(n=36;;n+=36){if(y>=e)throw RangeError("punycode_bad_input(1)");var x=a.charCodeAt(y++);x=10>x-48?x-22:26>x-65?x-65:26>x-97?x-97:36;if(36<=x)throw RangeError("punycode_bad_input(2)");if(x>Math.floor((2147483647-r)/q))throw RangeError("punycode_overflow(1)");r+=x*q;var A=n<=p?1:n>=p+26?26:n-p;if(x<A)break;if(q>Math.floor(2147483647/(36-A)))throw RangeError("punycode_overflow(2)");
q*=36-A}q=d.length+1;p=b(r-l,q,0===l);if(Math.floor(r/q)>2147483647-t)throw RangeError("punycode_overflow(3)");t+=Math.floor(r/q);r%=q;c&&f.splice(r,0,26>a.charCodeAt(y-1)-65);d.splice(r,0,t);r++}if(c)for(r=0,a=d.length;r<a;r++)f[r]&&(d[r]=String.fromCharCode(d[r]).toUpperCase().charCodeAt(0));return this.utf16.encode(d)};this.encode=function(d,f){var h,k,e;f&&(e=this.utf16.decode(d));d=this.utf16.decode(d.toLowerCase());var l=d.length;if(f)for(k=0;k<l;k++)e[k]=d[k]!=e[k];var n=[];var t=128;var r=
0;var p=72;for(k=0;k<l;++k)128>d[k]&&n.push(String.fromCharCode(e?c(d[k],e[k]):d[k]));var y=h=n.length;for(0<h&&n.push("-");y<l;){var q=2147483647;for(k=0;k<l;++k){var x=d[k];x>=t&&x<q&&(q=x)}if(q-t>Math.floor((2147483647-r)/(y+1)))throw RangeError("punycode_overflow (1)");r+=(q-t)*(y+1);t=q;for(k=0;k<l;++k){x=d[k];if(x<t&&2147483647<++r)return Error("punycode_overflow(2)");if(x==t){q=r;for(x=36;;x+=36){var A=x<=p?1:x>=p+26?26:x-p;if(q<A)break;n.push(String.fromCharCode(a(A+(q-A)%(36-A),0)));q=Math.floor((q-
A)/(36-A))}n.push(String.fromCharCode(a(q,f&&e[k]?1:0)));p=b(r,y+1,y==h);r=0;++y}}++r;++t}return n.join("")};this.get_host=function(a,b){var c=a;if(isipv6url(a)&&b&&(a=a.match(/\[.*\](:\d+)/)))return a[0];a=c.indexOf("://");-1!=a&&(c=c.substring(a+3));a=c.indexOf("/");-1!=a&&(c=c.substring(0,a));a=c.indexOf("?");-1!=a&&(c=c.substring(0,a));a=c.indexOf("@");-1!=a&&(c=c.substring(a+1));a=c.indexOf(":");-1!=a&&(c=c.substring(0,a));-1!=c.indexOf(".",c.length-1)&&(c=c.substring(0,c.length-1));return c};
this.URLToASCII=function(a){if("string"!=typeof a)return a;"undefined"==typeof g_punycodecache&&(g_punycodecache=[]);if("undefined"!=typeof g_punycodecache[a])return g_punycodecache[a];var b=!1;isipv6url(a)&&(b=!0);var c=this.get_host(a,b);b=this.ToASCII(c,b);if(b==c)return g_punycodecache[a]=a;c=a.replace(c,b);return g_punycodecache[a]=c};this.ToASCII=function(a,b){var c=a.split(".");b&&(c=[a]);a=[];var d=/[^A-Za-z0-9-]/;b&&(d=/[^\[\]A-Za-z0-9:.-]/);for(b=0;b<c.length;++b){var e=c[b];a.push(e.match(d)?
"xn--"+punycode.encode(e):e)}return a.join(".")};this.URLToUnicode=function(a){if("string"!=typeof a)return a;"undefined"==typeof g_punycodecache2&&(g_punycodecache2=[]);if("undefined"!=typeof g_punycodecache2[a])return g_punycodecache2[a];var b=this.get_host(a),c=this.ToUnicode(b);if(c==b)return g_punycodecache2[a]=a;b=a.replace(b,c);return g_punycodecache2[a]=b};this.ToUnicode=function(a){a=a.split(".");for(var b=[],c=0;c<a.length;++c){var d=a[c];b.push(d.match(/^xn--/)?punycode.decode(d.slice(4)):
d)}return b.join(".")}};function lpCreatePass(a,b,c,d,f,h,k,e){"undefined"==typeof a&&(a=8+get_random(0,1));256<a&&(a=256,document.getElementById("length").value=256);256<h&&(h=256);"undefined"==typeof b&&(b=!0);"undefined"==typeof c&&(c=!0);"undefined"==typeof d&&(d=!0);"undefined"==typeof f&&(f=!1);"undefined"==typeof h&&(h=0);"undefined"==typeof k&&(k=!1);"undefined"==typeof e&&(e=!0);var l=0,n=0,t=0;e&&(l=n=t=1);e=[];if(c&&0<l)for(var r=0;r<l;r++)e[e.length]="L";if(b&&0<n)for(r=0;r<n;r++)e[e.length]="U";if(d&&0<h)for(r=
0;r<h;r++)e[e.length]="D";if(f&&0<t)for(r=0;r<t;r++)e[e.length]="S";for(;e.length<a;)e[e.length]="A";e.sort(function(){return 2*get_random(0,1)-1});h="";l="abcdefghjkmnpqrstuvwxyz";k||(l+="ilo");c&&(h+=l);c="ABCDEFGHJKMNPQRSTUVWXYZ";k||(c+="ILO");b&&(h+=c);b="23456789";k||(b+="10");d&&(h+=b);f&&(h+="!@#$%^&*");d="";for(f=0;f<a;f++){switch(e[f]){case "L":var p=l;break;case "U":p=c;break;case "D":p=b;break;case "S":p="!@#$%^&*";break;case "A":p=h}r=get_random(0,p.length-1);d+=p.charAt(r)}return d}
function dogenerate(){var a=document.getElementById("length").value,b=document.getElementById("upper").checked,c=document.getElementById("lower").checked,d=document.getElementById("digits").checked,f=document.getElementById("special").checked,h=document.getElementById("mindigits").value,k=document.getElementById("ambig").checked,e=document.getElementById("reqevery").checked;document.getElementById("password").style.fontFamily="courier";document.getElementById("password").value=lpCreatePass(a,b,c,
d,f,h,k,e);"function"==typeof UpdatePasswordMeter&&UpdatePasswordMeter("","password","meterfront3")};Interfaces=function(){var a=function(a,b){this.type=a;if(this.options=b)this.options.include&&(this.options.include=[].concat(this.options.include)),this.options.exclude&&(this.options.exclude=[].concat(this.options.exclude))},b=function(a,b){b=[].concat(b);for(i=0;i<b.length;++i)for(j=0;j<a.length;++j)if(a[j]===b[i])return!0;return!1};a.prototype.requiredBy=function(a){if(a&&this.options){if(this.options.include)return b(this.options.include,a);if(this.options.exclude)return!b(this.options.include,
a)}return!0};a.prototype.isSyncronized=function(){return this.options&&!0===this.options.sync};a.prototype.isSyncronousFunction=function(){return this.type===Interfaces.TYPE_SYNC_FUNCTION};a.prototype.isFunction=function(){return this.type===Interfaces.TYPE_FUNCTION||this.type===Interfaces.TYPE_SYNC_FUNCTION};a.prototype.isConstructor=function(){return this.type===Interfaces.TYPE_CONSTRUCTOR};a.prototype.isPrimitive=function(){return!this.isFunction()&&!this.isConstructor()};a.prototype.shouldSendIndirect=
function(){return this.isPrimitive()?this.options&&"undefined"!==typeof this.options.sendIndirect?this.options.sendIndirect:!0:this.options&&!0===this.options.sendIndirect};a.prototype.allowWrite=function(){return this.options&&!0===this.options.write};a.prototype.addIncludes=function(a){this.options=this.options||{};this.options.include=this.options.include.concat(a)};var c=function(){var b=function(a,b){return function(c){if(b.hasOwnProperty(c))return a[c];throw c+" is not defined in the interface.";
}},c=function(a,b,c,d){var e=function(b,d,e){if(!b.allowWrite())throw c.concat(d)+" is not writeable.";if(b&&typeof e===b.type)a[d]=e;else throw d+" is not defined in the interface.";};return d.direct?function(a,c){e(b[a],a,c)}:function(a,f){var l=b[a];e(l,a,f);l.shouldSendIndirect()&&d.requestFunction({cmd:"LPData.setValue",args:[c.concat(a),f]})}},d=function(a,b,c,d){return function(){var e=arguments;if(d.cloneObjects&&!a.isSyncronousFunction()){var f=function(a){if(!a)return null;if(Array.isArray(a)){var b=
[];a.forEach(function(a){"object"===typeof a?b.push(f(a)):b.push(a)})}else b={},Object.keys(a).forEach(function(c){b[c]=a[c]&&"object"===typeof a[c]?f(a[c]):a[c]});return b};e=Array.prototype.map.call(e,function(a){return"object"===typeof a?f(a):a})}return c.apply(b,e)}},e=function(a,b,c){if("function"===typeof c.requestFunction)return function(){for(var d=[],e=0,f=arguments.length;e<f;++e)d.push(arguments[e]);return c.requestFunction({cmd:0<a.length?a.concat(b):b,args:d})};throw"requestFunction must be specified for this interface since it is not direct access.";
},l=function(a,b,c){return function(){"function"===typeof b&&b.apply(a,arguments);"function"===typeof c&&c.apply(a,arguments)}},n=function(f,h,k,y,q,x){var t=!1,r=[],p;for(p in y){var L=y[p];L instanceof a?L.isFunction()?!L.requiredBy(x.context)||L.isSyncronousFunction()&&x.asyncOnly||(x.direct||L.isSyncronousFunction()?h&&"function"===typeof h[p]?(f[p]=d(L,h,h[p],x),!x.direct&&L.shouldSendIndirect()&&(f[p]=l(f,f[p],e(q,p,x)))):r.push(L.type+": "+q.concat(p).join(".")):f[p]=e(q,p,x)):L.isConstructor()?
L.requiredBy(x.context)&&!x.asyncOnly&&(h&&"function"===typeof h[p]?f[p]=h[p]:r.push(L.type+": "+q.concat(p).join("."))):t=!0:(f.hasOwnProperty(p)||(f[p]={}),n(f[p],h?h[p]:h,k?k[p]:k,y[p],q.concat(p),x))}t&&(f.get=b(k,y),f.set=c(k,y,q,x));if(0<r.length&&x.checkMissing)throw"Background instance does not support the following:\n"+r.join("\n");return f};return function(a,b){return n(b.instance||{},b.source||b.sourceFunctions,b.source||b.sourceData,a,[],b)}}(),d=function(){var b={},c={},d=function(b,
c,f,h){var e=[],l;for(l in b){var k=h?h.concat(l):[l],n=b[l];n instanceof a?n.isPrimitive()&&n.requiredBy(c)&&(!f||n.isSyncronized())&&e.push({sourceFunction:n.options&&n.options.sourceFunction,path:k}):e=e.concat(d(n,c,f,k))}return e};return function(a,f){var e=[];a=[].concat(a);for(var l=0;l<a.length;++l){var h=a[l];if(f.syncronizedOnly){var k=c[h];"undefined"===typeof k&&(k=c[h]=d(f.interface,h,!0))}else k=b[h],"undefined"===typeof k&&(k=b[h]=d(f.interface,h,!1));e=e.concat(k)}return e}}();return{TYPE_CONSTRUCTOR:"contsructor",
TYPE_SYNC_FUNCTION:"synchronous function",TYPE_FUNCTION:"function",TYPE_STRING:"string",TYPE_BOOLEAN:"boolean",TYPE_NUMBER:"number",TYPE_OBJECT:"object",Definition:a,extend:function(a,b){for(var c in b){var d=b[c];switch(typeof d){case "object":a.hasOwnProperty(c)?Interfaces.extend(a[c],d):a[c]=d;break;default:a[c]=d}}},createInstance:c,getPrimitives:function(a){var b={};if(a.context)for(var c=d(a.context,a),e=0,f=c.length;e<f;++e){var n=c[e];var t=n.sourceFunction?"function"===typeof n.sourceFunction?
n.sourceFunction():LPReflection.callFunction(null,n.sourceFunction,[],{context:a.source}):LPReflection.getValue(a.interface,n.path,{context:a.source});LPReflection.setValue(null,n.path,t,{context:b})}return b},clearPrimitives:function(a){if(a.context)for(var b=d(a.context,a),c=0;c<b.length;++c)LPReflection.setValue(null,b[c].path,null,{context:a.source})},getName:function(a){for(var b in this)if(a===this[b])return b;throw Error("Could not find interface name.");}}}();Interfaces.BackgroundInterface=function(a){var b=a.TYPE_FUNCTION,c=a.TYPE_SYNC_FUNCTION,d=a.TYPE_STRING,f=a.TYPE_BOOLEAN,h=a.TYPE_OBJECT,k=a.TYPE_NUMBER,e=a.Definition;return{base_url:new e(d),FILENAME_FRAGMENT_BAD_CONTROL_CHARS:new e(d,{include:["vault","note"]}),FILENAME_FRAGMENT_BAD_SHELL_CHARS:new e(d,{include:["vault","note"]}),g_bigicons:new e(h,{include:["vault","extensionDropdown","vaultItemSelect"],sendIndirect:!1,write:!0}),g_icons:new e(h,{include:["vault","extensionDropdown","vaultItemSelect"]}),
g_applications:new e(h,{include:["vault","extensionDropdown","application"]}),g_emer_sharees:new e(h,{include:"vault"}),g_emer_sharers:new e(h,{include:"vault"}),g_enterpriseuser:new e(k,{sync:!0}),g_enterprisemodel:new e(k,{sync:!0}),g_enterpriseuserrole:new e(d,{sync:!0}),g_formfills:new e(h,{include:["vault","extensionDropdown","formFill","chooseProfile","preferences"]}),g_genpws:new e(h,{include:["vault","extensionDropdown"],write:!0}),g_identities:new e(h,{include:["vault","extensionDropdown"]}),
g_identity:new e(d,{include:["vault","extensionDropdown"],sync:!0}),g_iscompanyadmin:new e(f,{sync:!0}),g_is_premium_as_a_perk:new e(f,{sync:!0}),g_local_accts_version:new e(d,{include:["vault","extensionDropdown"],sync:!0}),g_local_key:new e(d),g_pendings:new e(h,{include:"vault"}),g_prefoverrides:new e(h),gRecovery:new e(d),g_premium_exp:new e(h),g_is_premium_trial:new e(h),g_is_legacy_premium:new e(k,{sync:!0}),g_is_families_trial_started:new e(k,{sync:!0}),g_predates_families:new e(k,{sync:!0}),
g_seen_vault_post_families:new e(k,{sync:!0}),g_prompts:new e(h),g_securenotes:new e(h,{include:["vault","extensionDropdown","note","vaultItemSelect"]}),g_shares:new e(h),g_showcredmon:new e(f,{include:"vault",sync:!0}),g_sites:new e(h,{include:"vault extensionDropdown site note formFill contentScriptSite".split(" ")}),g_pending_shares:new e(h,{include:["vault"]}),g_note_templates:new e(h,{include:["vault","note","addItem","extensionDropdown"]}),g_uid:new e(k),g_username:new e(d),g_username_hash:new e(d,
{include:"vault"}),g_reminders:new e(h,{include:["vault"],write:!0}),g_one_minute_inbox_importer_dialog_enabled:new e(f,{include:"vault"}),g_one_minute_signup_enabled:new e(f,{include:"vault"}),g_one_minute_signup_menu_enabled:new e(f,{include:"vault"}),g_first_time_login:new e(f,{include:"vault"}),g_onemin_advert_enabled:new e(f,{include:"vault"}),g_new_settings_enabled:new e(f,{include:"vault"}),g_nofolder_feature_enabled:new e(h,{include:"vault preferences extensionDropdown contentScript siteDialog site note formFill contentScriptSite".split(" ")}),
g_basicauth_feature_enabled:new e(h,{include:"vault preferences extensionDropdown contentScript siteDialog site note formFill contentScriptSite".split(" ")}),g_onemin_advert_app_threshold:new e(k,{include:"vault"}),g_blob_version:new e(k,{include:"vault"}),g_family_shared_folders_enabled:new e(f,{include:"vault"}),lp_attaches:new e(h,{include:["vault","note"]}),lploggedin:new e(f,{sync:!0}),lpversion:new e(d,{include:"vault"}),rsaprivatekeyhex:new e(d,{include:"vault",write:!0,sourceFunction:function(){return lp_rsaprivatekeyhex}}),
siteCats:new e(h,{include:["vault","site"]}),LPContentScriptFeatures:new e(h),g_bigsquareicons:new e(h,{include:["vault"]}),RecordTypeConfig:new e(h,{include:["vault","note","site","addItem","extensionDropdown"]}),addAttach:new e(b),addeditformfill:new e(b),addEmptyGroup:new e(b),LPServer:{ajax:new e(b),xmlRequest:new e(b),textRequest:new e(b),jsonRequest:new e(b)},LPRavenTransport:new e(b),BackgroundServer:{emergencyAccess:{acceptOffer:new e(b),addRecipient:new e(b),declineOffer:new e(b),denyAccess:new e(b),
getRecipientInfo:new e(b),getSharerInfo:new e(b),removeRecipient:new e(b),requestAccess:new e(b),unlinkAccount:new e(b),updateRecipient:new e(b),updateShareeKey:new e(b)},identities:{add:new e(b),remove:new e(b),update:new e(b)},vault:{history:{revertPasswordChange:new e(b),getPasswordHistory:new e(b),getUsernameHistory:new e(b),getNoteHistory:new e(b)}},sharing:{individual:{shareItems:new e(b),unshareItem:new e(b),acceptShare:new e(b),rejectShare:new e(b),inviteFriends:new e(b),getSentShareData:new e(b),
getReceivedShareData:new e(b)},folder:{getFolders:new e(b),getPublicKeys:new e(b),create:new e(b),rename:new e(b),remove:new e(b),accept:new e(b),reject:new e(b),addMembers:new e(b),getMembers:new e(b),removeMember:new e(b),reinviteMember:new e(b),updateMemberPermissions:new e(b),getRestrictions:new e(b),updateRestrictions:new e(b),startDownloading:new e(b),stopDownloading:new e(b),restoreDeleted:new e(b),purgeDeleted:new e(b),convertToEnterprise:new e(b),convertToLegacy:new e(b)}},sitesAndNotes:{saveCustomNoteTemplate:new e(b),
deleteCustomNoteTemplate:new e(b)},transact:{sendReminder:new e(b)},families:{getMembers:new e(b),existingUserTrial:new e(b),getInvitations:new e(b)},invitation:{acceptInvitation:new e(b),dismissInvitation:new e(b),getMembers:new e(b)}},changePassword:new e(b),deleteAid:new e(b),deleteformfill:new e(b),deleteGroup:new e(b),editAid:new e(b),fastEncryptAttachments:new e(b),generateSharingKeysFromVault:new e(b),generate_key:new e(b),get_securityChallengeScore:new e(b),gotourl:new e(b),launch:new e(b),
launchApp:new e(b),loggedOut:new e(b),loglogin:new e(b),lpReportError:new e(b),make_lp_hash_iterations:new e(b),make_lp_key_hash:new e(b),make_lp_key_iterations:new e(b),moveIntoSharedFolder:new e(b),moveSelectedToGroup:new e(b),openAllSites:new e(b),openAttach:new e(b),openexport:new e(b),openentconsole:new e(b),openFamilyConsole:new e(b),openfavorites:new e(b),openimport:new e(b),openseccheck:new e(b),openURL:new e(b),processCS:new e(b),refreshGroupNames:new e(b),refreshsites:new e(b),renameGroup:new e(b),
saveFields:new e(b),saveSite:new e(b),singlefactor_reprompt:new e(b),switch_identity:new e(b),unlock_plug2web:new e(b),exportAttachment:new e(b),install_binary:new e(b),increment_local_accts_version:new e(b),AES:{bin2hex:new e(c),Decrypt:new e(c),Encrypt:new e(c),hex2bin:new e(c),hex2url:new e(c),url2hex:new e(c)},reorderOnURL:new e(c),can_copy_to_clipboard:new e(c),canLaunchApplication:new e(c),check_filename_badchars:new e(c),crypto_btoa:new e(c),db_prepend:new e(c),dec:new e(c),enc:new e(c),enccbc:new e(c),
encode_private_key:new e(c),encode_public_key:new e(c),fix_username:new e(c),get_last_reprompt_time:new e(c),get_mimetype_from_filename:new e(c),get_personal_linked:new e(c),removeLinkedAccount:new e(c),get_random_password:new e(c),getbigicon:new e(c),geticonurlfromrecord:new e(c),gs:new e(c),have_binary:new e(c),isOffline:new e(c),localStorage_getItem:new e(c),localStorage_setItem:new e(c),lp_gettld_url:new e(c),lpCreatePass:new e(c),lpdec:new e(c),lpenc:new e(c),lpevent:new e(c),lpmdec:new e(c),
lpmenc:new e(c),parse_public_key:new e(c),parse_private_key:new e(c),parsemobile:new e(c),punycode:{URLToASCII:new e(c)},RSAKey:new e(a.TYPE_CONSTRUCTOR),set_last_reprompt_time:new e(c),SHA256:new e(c),hostof:new e(c),StringUtils:{translate:new e(c)},Preferences:{get:new e(c),set:new e(c,{sendIndirect:!0})},PreferencesAsync:{get:new e(b),set:new e(b)},rsa_encrypt_privatekey:new e(c),sendLpImprove:new e(b),sendTimingEvent:new e(b),Provisioning:{provisioning:{checkUserState:new e(b,{include:"provisioning"}),
sendApiCalls:new e(b,{include:"provisioning"}),getLocalKey:new e(b,{include:"provisioning"})}},ExtensionPreferences:{getConst:new e(b),getDefault:new e(b),read:new e(b),write:new e(b),getUnavailablePreferences:new e(b)},LPPlatform:{getUILanguage:new e(c),fill:new e(b)},get_method_async:new e(b),MigrationBackground:{getBlobVersion:new e(b),getLinkedUsername:new e(b),getLinkedBlobVersion:new e(b),subscribeToState:new e(b),subscribeToStateOnce:new e(b),wasMigration:new e(b),publishState:new e(b),saveBlobVersion:new e(b),
saveLinkedBlobVersion:new e(b),sendSegmentEvent:new e(b)},FormfillMigrationBackground:{isEnabled:new e(b),getFormfills:new e(b),getLinkedFormfills:new e(b),createCustomNoteType:new e(b),saveNote:new e(b)},Feature:{isEnabled:new e(b)},Policies:{logNameEnabled:new e(b,{include:"vault preferences extensionDropdown contentScript siteDialog site note formFill contentScriptSite".split(" "),appendAdditionalArguments:!0}),logUserNameEnabled:new e(b,{include:"vault preferences extensionDropdown contentScript siteDialog site note formFill contentScriptSite".split(" "),
appendAdditionalArguments:!0}),logUrlEnabled:new e(b,{include:"vault preferences extensionDropdown contentScript siteDialog site note formFill contentScriptSite".split(" "),appendAdditionalArguments:!0}),getSaveSiteToPersonal:new e(b,{include:"vault preferences extensionDropdown contentScript siteDialog site note formFill contentScriptSite".split(" "),appendAdditionalArguments:!0}),getAccountSelectionBasedOnEmail:new e(b,{include:"vault preferences extensionDropdown contentScript siteDialog site note formFill contentScriptSite".split(" "),
appendAdditionalArguments:!0}),showSecureNotes:new e(b,{include:"vault preferences extensionDropdown contentScript siteDialog site note formFill contentScriptSite".split(" "),appendAdditionalArguments:!0})},FederatedLogin:{isFederated:new e(b,{include:"login acctsiframe update_phone misc_challenge enterprise_options delete_account otp misc_login enterprise_users".split(" ")}),getPassword:new e(b,{include:"acctsiframe update_phone misc_challenge enterprise_options delete_account otp misc_login enterprise_users".split(" ")})},
getVersion:new e(b),LPPartner:{getPartnerInfo:new e(b)},onSettingsIframeClose:new e(b,{include:["vault"],appendAdditionalArguments:!0}),closeSettingsIframe:new e(b,{include:["acctsiframe","contentScript","vault"],appendAdditionalArguments:!0}),GenPassHistory:{add:new e(b),clear:new e(b),getWithDate:new e(b),getWithReadableDate:new e(b),getWithoutDate:new e(b)}}}(Interfaces);LPPlatform="undefined"===typeof LPPlatform?{}:LPPlatform;(function(){LPPlatform.isMac=function(){return"undefined"!=typeof navigator&&-1!=navigator.appVersion.indexOf("Mac")};LPPlatform.getUILanguage=function(){return parent.LPTools.getURLParams().lplanguage||"en-US"}})();(function(a){a.getBackgroundInterface=function(){var a=null;return function(b){null===a&&(b=b||{},b.source=window,b.direct=!0,a=Interfaces.createInstance(Interfaces.BackgroundInterface,b));return a}}();a.getUILanguage=function(){return"en-US"};a.fill=function(a){lpevent("m_mf");fillaid(a,!0,"notrack")}})(LPPlatform);(function(a){a.logException=function(b){var c=b.message;b.stack&&(c+="\n"+b.stack);a.logError(c)};a.logError=function(a){a="Page: "+window.location.href+" Error: "+a;try{console.error(a),lpReportError("VAULT_4_0: "+a)}catch(c){}};a.ajax=function(a){LPServer.ajax(a)};a.translate=function(a){if("undefined"!==typeof translations){if(translations.hasOwnProperty("newvault_"+a))return translations["newvault_"+a];if(translations.hasOwnProperty(a))return translations[a]}return a};a.getUILanguage=function(){return g_language||
"en-US"};(function(){var b=function(a){return(a=localStorage.getItem(a))?JSON.parse(a):{}},c=b("userprefs"),d=b("gblprefs");a.adjustPreferenceDefaults=function(a){};a.getPreference=function(a){return c.hasOwnProperty(a)?c[a]:d[a]};a.setUserPreference=function(a,b){c[a]=b};a.setGlobalPreference=function(a,b){d[a]=b};a.writePreferences=function(){try{localStorage.setItem("userprefs",JSON.stringify(c)),localStorage.setItem("gblprefs",JSON.stringify(d))}catch(f){}}})()})(LPPlatform);StringUtils={};
(function(a){a.translate=function(a){if(a){var b=a.trim();if(0<b.length){var d=LPPlatform.translate(b);if(b.length!==a.length){var f=a.indexOf(b);d=a.substring(0,f)+d+a.substring(f+b.length)}if(1<arguments.length)for(b=1,f=arguments.length;b<f;++b){var h=arguments[b];"object"!==typeof h&&(d=d.replace("%"+b,h.toString()))}else if(-1===b.indexOf(" "))switch(b.toUpperCase()===b?1:b.toLowerCase()===b?2:b.charAt(0).toUpperCase()===b.charAt(0)?3:null){case 1:d=d.toUpperCase();break;case 2:d=d.toLowerCase();
break;case 3:d=d.charAt(0).toUpperCase()+d.substring(1).toLowerCase()}return d}}return a}})(StringUtils);PreferencesAsync=function(){return{set:function(a,b){Preferences.set(a,b)},get:function(a,b,c){a=Preferences.get(a,b);c(a)}}}();
Preferences=function(){var a={},b=function(a,b){var c=LPPlatform.getPreference(a);b=void 0===b?f[a]:b;if(void 0===c)return b;if(typeof c!==typeof f[a])switch(typeof f[a]){case "boolean":return"true"===c||1===parseInt(c);case "number":return c=-1===c.indexOf(".")?parseInt(c):parseFloat(c),isNaN(c)?b:c;case "object":return JSON.parse(c)}return c},c=function(a){switch(typeof a){case "object":return JSON.stringify(a);case "boolean":return a?1:0;default:return a.toString()}},d={logoffWhenCloseBrowser:!0,
logoffWhenCloseBrowserVal:!0,showvault:!0,hideContextMenus:!0,notificationsBottom:!0,usepopupfill:!0,openloginstart:!0,storeLostOTP:!0,enablenamedpipes:!0,enablenewlogin:!0,htmlindialog:!0,language:!0,Icon:!0,generateHkKeyCode:!0,generateHkMods:!0,recheckHkKeyCode:!0,recheckHkMods:!0,searchHkKeyCode:!0,searchHkMods:!0,nextHkKeyCode:!0,nextHkMods:!0,prevHkKeyCode:!0,prevHkMods:!0,homeHkKeyCode:!0,homeHkMods:!0,openpopoverHkKeyCode:!0,openpopoverHkMods:!0,rememberpassword:!0,dialogSizePrefs:!0},f={logoffWhenCloseBrowser:!1,
logoffWhenCloseBrowserVal:0,idleLogoffEnabled:!1,idleLogoffVal:"",openpref:"tabs",htmlindialog:!1,highlightFields:!0,automaticallyFill:!0,showvault:!1,showAcctsInGroups:!0,hideContextMenus:!1,defaultffid:"0",donotoverwritefilledfields:!1,showNotifications:!0,showGenerateNotifications:!1,showFormFillNotifications:!1,showSaveSiteNotifications:!1,notificationsBottom:!1,showNotificationsAfterClick:!1,showFillNotificationBar:!1,showSaveNotificationBar:!0,showChangeNotificationBar:!0,usepopupfill:!0,showmatchingbadge:!0,
autoautoVal:25,warninsecureforms:!1,infieldPopupEnabled:!1,dontfillautocompleteoff:!1,pollServerVal:15,clearClipboardSecsVal:60,recentUsedCount:10,searchNotes:!0,openloginstart:!1,storeLostOTP:!0,enablenamedpipes:!0,enablenewlogin:!1,clearfilledfieldsonlogoff:!1,toplevelmatchingsites:!1,language:"",Icon:1,generate_length:12,generate_upper:!0,generate_lower:!0,generate_digits:!0,generate_special:!1,generate_mindigits:1,generate_ambig:!1,generate_reqevery:!0,generate_pronounceable:!1,generate_allcombos:!0,
generate_advanced:!1,gridView:!0,compactView:!1,"seenVault4.0":!1,leftMenuMaximize:!0,disablepasswordmanagerasked:!0,rememberemail:!0,rememberpassword:!1,dialogSizePrefs:{},tempID:0,lastreprompttime:0,identity:"",alwayschooseprofilecc:!1,showIntroTutorial:!0};LPPlatform.adjustPreferenceDefaults(f);LPPlatform.isMac()?(f.generateHkKeyCode=0,f.generateHkMods="",f.recheckHkKeyCode=0,f.recheckHkMods="",f.searchHkKeyCode=76,f.searchHkMods="shift meta",f.nextHkKeyCode=33,f.nextHkMods="meta",f.prevHkKeyCode=
34,f.prevHkMods="meta",f.homeHkKeyCode=0,f.homeHkMods="",f.openpopoverHkKeyCode=220,f.openpopoverHkMods="meta"):(f.generateHkKeyCode=71,f.generateHkMods="alt",f.recheckHkKeyCode=73,f.recheckHkMods="alt",f.searchHkKeyCode=87,f.searchHkMods="alt",f.nextHkKeyCode=33,f.nextHkMods="alt",f.prevHkKeyCode=34,f.prevHkMods="alt",f.homeHkKeyCode=72,f.homeHkMods="control alt",f.openpopoverHkKeyCode=220,f.openpopoverHkMods="alt");var h=function(b,c){LPPlatform.setUserPreference(b,c);d[b]&&LPPlatform.setGlobalPreference(b,
c);(a[b]||[]).forEach(function(a){a(c)})};return{getDefault:function(a){switch(typeof a){case "object":var b={},c;for(c in a)b[c]=f[c];return b;case "string":return f[a];default:return null}},get:function(a,c){switch(typeof a){case "object":var d={},e;for(e in a)d[e]=b(e,c?c[e]:void 0);return d;case "string":return b(a,c);default:return null}},set:function(a,b){switch(typeof a){case "object":for(var d in a)h(d,c(a[d]));break;default:h(a,c(b))}LPPlatform.writePreferences()},addListener:function(b,
c){var d=a[b]||[];d.push(c);a[b]=d},removeListener:function(b,c){a[b]=(a[b]||[]).filter(function(a){return a!==c})}}}();var Provisioning;
(function(a){var b=function(){function a(a,b){this.platform=a;this.global=b}a.prototype.checkUserState=function(a){!this.global.lploggedin&&this.global.shouldOpenLogin()?(a({error:"User is not logged in."}),this.platform.openLoginPopover()):a({result:"OK."})};a.prototype.sendApiCalls=function(a,b,c){var d=this;this.platform.openTab({url:this.urlToCall(a),inactive:!0,loadHandler:function(a){var e={global:!1,type:b.action_type||"GET",cache:!1,url:b.url,data:b.params,success:function(b){d.handleResponseFromThridParty(a,c,
b)},error:function(b,e,f){d.handleResponseFromThridParty(a,c,{error:e})}};if(b.header){e.headers={};for(var f=0;f<b.header.length;f++)e.headers[b.header[f].key]=b.header[f].value}if("json"!==b.dataType){f=[];for(var h in b.data)f.push(h+"="+encodeURIComponent(b.data[h]));e.data=f.join("&")}else e.data=JSON.stringify(b.data);a.getTop().jQuery.ajax(e);d.cstimeout=setTimeout(function(){d.handleResponseFromThridParty(a,c,{error:"timeout"})},1E4)}})};a.prototype.handleResponseFromThridParty=function(a,
b,c){clearTimeout(this.cstimeout);b(c);a.close()};a.prototype.getLocalKey=function(a){a({key:g_local_key,hash:g_local_key_hash,hex:g_local_key_hex})};a.prototype.urlToCall=function(a){a=lpParseUri(a);return a.protocol?a.protocol+"://"+a.host:a.host};return a}();a.ProvisioningService=b;a.provisioning=new b(LPPlatform,window)})(Provisioning||(Provisioning={}));LPServer=function(){var a=null,b=null,c=function(a,b){a&&a.error&&a.error(b)},d=function(){var a=function(b,c){var d={};for(l in b){var e=b[l];if(null===e||void 0===e)e="";if("object"===typeof e)for(var f in e)e.hasOwnProperty(f)&&(d[l+"["+f+"]"]=e[f]);else d[l]=e}b=d;c=c||"";var l=[];for(var h in b)f=b[h],"object"===typeof f?l=l.concat(a(f,h)):(c&&(h=c+"["+h+"]"),l.push(h+"="+encodeURIComponent(f)));return l};return function(b){return a(b).join("&")}}(),f=function(a){var b=new XMLHttpRequest,c=a.contentType||
"application/x-www-form-urlencoded";a.success&&(b.onload=function(){if(4===b.readyState)if(200===b.status)switch(a.dataType){case "xml":a.success(b.responseXML,b.responseText);break;case "json":var c=null;try{c=JSON.parse(b.responseText)}catch(Y){}a.success(c,b.responseText);break;default:a.success(b.responseText)}else a.error&&a.error(b,b.statusText)});a.error&&(b.onerror=function(){a.error(b,b.statusText)});var e=function(b){if("application/json"===c){if("GET"===b)return"";try{return JSON.parse(a.data),
a.data}catch(Y){return JSON.stringify(a.data)}}else return d(a.data)},f=a.url;"GET"===a.type&&(f=e(a.type),f=a.url+(0<f.length?"?"+f:""));b.open(a.type||"GET",f,!0);if(a.headers)for(var l in a.headers)a.headers.hasOwnProperty(l)&&b.setRequestHeader(l,a.headers[l]);"POST"===a.type?(b.setRequestHeader("Content-Type",c),a.beforeSend&&a.beforeSend(b,a),b.send(e())):(a.beforeSend&&a.beforeSend(b,a),b.send())},h=function(b,c){z.ajax({type:"POST",url:z.getBaseURL()+"getCSRFToken.php",success:function(c){a=
c||null;b(a)},error:k(c)})},k=function(a){return function(b,c,d){"function"===typeof a?a():console.error(d)}},e=function(a,b,d,e){l(a,b,d,e)||c(b,d)},l=function(){var a=function(a,b,c,d){return a&&(a=a[c],"function"===typeof a)?(a(d,b),!0):!1};return function(b,c,d,e){b=a(b,c,d,e);return b=a(c.callbacks,c,d,e)||b}}(),n=function(a,b){try{z.logException(a)}catch(O){}a instanceof I?c(b,a.message):c(b);if(LPServer.throwExceptions)throw a;},t=function(a,b){return function(d,e){try{if(!l(a,b,e)){if(null===
d&&e&&"undefined"!==typeof DOMParser)try{d=(new DOMParser).parseFromString(e,"application/xml")}catch(P){}null===d?c(b,"invalidxml"):y(d,a,b)}}catch(P){n(P,b)}}},r=function(a,b){a=a.getElementsByTagName(b);return 0<a.length?a[0]:null},p=function(a,b){return(a=r(a,b))?a.textContent:""},y=function(a,b,d){var f=r(a,"result"),h=r(a,"ok"),k=r(a,"error"),n=r(a,"failed");if(f){h=f.getAttribute("rc");k=f.getAttribute("msg");n=f.getAttribute("success");var q=f.getAttribute("ok");if(h){e(b,d,h,f);return}if(k){e(b,
d,k,f);return}if(n){e(b,d,n,f);return}if(q){e(b,d,"ok");return}f=f.textContent.trim();if("ok"===f){l(b,d,"ok")||e(b,d,p(a,"status"));return}if("bad"===f){c(d,p(a,"message"));return}}else{if(h){e(b,d,"ok",h);return}if(k){l(b,d,k.getAttribute("cause"),k)||e(b,d,k.getAttribute("message"),k);return}if(n){e(b,d,n.getAttribute("reason"),n);return}}c(d)},q=function(a,b){return function(d,e){try{if(null===d&&e)c(b,"invalidjson");else{if(d.error){l(a,b,d.error,d)||c(b,d.errortxt||d.error);return}if(d.hasOwnProperty("success")){if(d.success&&
l(a,b,"success",d))return;if(!d.success){c(b);return}}else if(d.res)if("success"===d.res){if(l(a,b,d.res,d))return}else{l(a,b,d.res,d)||c(b,d.errortxt);return}else if(l(a,b,d.reason,d)||l(a,b,d.status,d)||l(a,b,d.cmd,d))return}if(a&&"function"===typeof a["default"])a["default"](d,b);else"function"===typeof b.success&&b.success(d)}catch(P){n(P,b)}}},x=function(a,b){return function(d,e){try{var f=JSON.parse(d.responseText)}catch(X){c(b,"invalidjson");return}l(a,b,f.code,f)||c(b,f.message)}},A=function(b){b.userSupplied=
b.userSupplied||{};b.type=void 0===b.type?"POST":b.type;b.url=z.getBaseURL()+b.url;b.data=N(b.data,b.userSupplied.requestArgs);b.data&&void 0===b.data.lpversion&&"undefined"!==typeof lpversion&&(b.data.lpversion=lpversion);"undefined"===typeof b.error&&b.userSupplied.error&&(b.error=k(b.userSupplied.error));b.data&&void 0===b.data.token&&(void 0===b.CSRFToken||b.CSRFToken)&&null===a?h(function(){z.ajax(b)},b.userSupplied.error):z.ajax(b)},B=function(a,b){var c={},d=b.userSupplied;"object"!==typeof d&&
(d=b.userSupplied={});switch(typeof b.success){case "string":return c[b.success]=d.success,a(c,d);case "function":return c["default"]=b.success,a(c,d);default:if(b.callbacks||d.success||d.callbacks)return a(b.callbacks,d)}return null},J=function(b,c){c.data&&void 0===c.data.token&&(void 0===c.CSRFToken||c.CSRFToken)&&(c.data.token=a)},L=function(a,b,c){c=c||[];for(var d in b){var e=a[d],f=b[d];if("object"===typeof f)L(e,f,c.concat(d));else if(typeof e!==f)throw c.push(d),"Extension is missing the following property: "+
c.join(".")+" ("+f+")";}},F=function(a,b,c){a=a.getAttribute(b);return void 0===a?c:a},N=function(a){a=a||{};for(var b=1,c=arguments.length;b<c;++b){var d=arguments[b],e;for(e in d)a[e]=d[e]}return a},H=function(a,b){return a?function(){var c=b.apply(window,arguments);a.apply(window,c||arguments)}:b},G={StringUtils:{translate:"function"},AES:{Encrypt:"function",Decrypt:"function",hex2bin:"function",bin2hex:"function"},enc:"function",dec:"function",RSAKey:"function",createRandomHexString:"function",
parse_public_key:"function",parse_private_key:"function",enccbc:"function",make_lp_key_iterations:"function",make_lp_hash_iterations:"function",get_random_password:"function"},R={RSAKey:!0},z={ajax:f,translate:function(){return b.StringUtils.translate.apply(b.StringUtils,arguments)},logException:function(){},hex2bin:function(){return b.AES.hex2bin.apply(b.AES,arguments)},bin2hex:function(){return b.AES.bin2hex.apply(b.AES,arguments)},encryptAES:function(a,c){return b.enc(a,c)},decryptAES:function(a,
c){return b.dec(a,c)},encrypt:function(a,c){return b.enc(a,c)},decrypt:function(a,c){try{return b.dec(a,c)}catch(O){return""}},createRandomHexString:function(){return b.createRandomHexString.apply(b,arguments)},parsePublicKey:function(){return b.parse_public_key.apply(b,arguments)},parsePrivateKey:function(a,c){c=c||b.rsaprivatekeyhex;if(!c)throw"rsaprivatekeyhex required for this action.";return b.parse_private_key(a,c)},extractPrivateKey:function(a,c){return b.rsa_extract_privatekey(a,c)},encryptCBC:function(){return b.enccbc.apply(b,
arguments)},makeKey:function(){return b.make_lp_key_iterations.apply(b,arguments)},makeHash:function(){return b.make_lp_hash_iterations.apply(b,arguments)},makeRandomPassword:function(){return b.get_random_password.apply(b,arguments)},getBaseURL:function(){return b.base_url||""},getLocalKey:function(){return b.g_local_key},setLocalKey:function(a){b.g_local_key=a}},I=function(a){this.message=a;this.stack=Error().stack};I.prototype=Object.create(Error.prototype);I.prototype.name="ClientException";I.prototype.constructor=
I;var u=function(){var b=function(b){b.setRequestHeader("X-CSRF-TOKEN",a)};return{jsonRequest:function(a){a.dataType="json";a.contentType="application/json";a.beforeSend=H(a.beforeSend,b);a.error=x(a.callbacks,a.userSupplied||{});A(a)}}}();return{ajax:f,getRecordsFromResponse:function(a,b,c){for(var d=[],e=0;e<c;++e)d.push(F(a,b+e));return d},jsonRequest:function(a){a.dataType="json";a.beforeSend=H(a.beforeSend,J);a.success=B(q,a);A(a)},xmlRequest:function(a){a.dataType="xml";a.beforeSend=H(a.beforeSend,
J);a.success=B(t,a);A(a)},textRequest:function(a){a.dataType="text";a.beforeSend=H(a.beforeSend,J);A(a)},initialize:function(a,c){L(a,G);for(var d in c)z[d]=c[d];for(var e in R)z[e]=a[e];b=a},ext:z,getNodes:function(a,b){return a.getElementsByTagName(b)},getNode:r,getNodeText:p,getAttr:F,getAttrInt:function(a,b,c){a=parseInt(F(a,b,c));return isNaN(a)?c:a},extend:N,extendCallback:H,ClientException:I,clearCSRFToken:function(){a=null},getCSRFToken:h,callback:function(a,b){a.callbacks&&"function"===typeof a.callbacks[b]&&
a.callbacks[b].apply(window,Array.prototype.slice.call(arguments,2))},lmiapi:u}}();LPServer.sharing=LPServer.sharing||{};
LPServer.sharing.individual=function(){var a=function(){var a={noemailspecified:function(a,b){b.error(LPServer.ext.translate("Please enter at least one email and try again."))},usernameisnotvalidemail:function(a,b){a=LPServer.getRecordsFromResponse(a,"email",LPServer.getAttrInt(a,"numinvalid",0));b.error(LPServer.ext.translate("The following emails are invalid: %1",a.join(", ")))},toomanyemails:function(a,b){a=LPServer.getAttrInt(a,"numexcess");"1"===a?b.error(LPServer.ext.translate("You are trying to share with too many people.  Please remove at least %1 email and try again.",a)):
b.error(LPServer.ext.translate("You are trying to share with too many people.  Please remove at least %1 emails and try again.",a))},cantsharewithself:function(a,b){b.error(LPServer.ext.translate("You can not share with yourself."))}},b=function(a,b,c){this.email=a;this.pubkey=b;this.encpass=c},c=function(a,b){this.aid=a.getAttribute("aid");this.username=LPServer.ext.decrypt(a.getAttribute("username"),b);this.password=LPServer.ext.decrypt(a.getAttribute("password"),b);this.name=LPServer.ext.decrypt(a.getAttribute("name"),
b);this.grouping=LPServer.ext.decrypt(a.getAttribute("grouping"),b);this.extra=LPServer.ext.decrypt(a.getAttribute("extra"),b);this.attachkey=LPServer.ext.decrypt(a.getAttribute("attachkey"),b);this.afids=this.parseFields(a.getAttribute("afids"),b);this.otherafids=this.parseFields(a.getAttribute("otherafids"),b);this.accts_notes=this.parseFields(a.getAttribute("accts_notes"),b);this.accts_usernames=this.parseFields(a.getAttribute("accts_usernames"),b);this.accts_passwords=this.parseFields(a.getAttribute("accts_passwords"),
b);this.template=a.getAttribute("template")};c.prototype.parseFields=function(a,b){var c=[];if(a){a=a.split("^");for(var d=0,e=a.length;d<e;++d){var f=a[d];""!==f&&(f=a[d].split("&"),c.push({name:f[0],value:LPServer.ext.decrypt(f[1],b)}))}}return c};c.prototype.encrypt=function(){var a=function(a,b){return a?LPServer.ext.encryptCBC(a,b):""},b=function(b,c){b=JSON.parse(JSON.stringify(b));for(var d=0,e=b.length;d<e;++d)b[d].value=a(b[d].value,c);return b};return function(c){return{username:a(this.username,
c),password:a(this.password,c),name:a(this.name,c),grouping:a(this.grouping,c),extra:a(this.extra,c),attachkey:a(this.attachkey,c),afids:b(this.afids,c),otherafids:b(this.otherafids,c),accts_notes:b(this.accts_notes,c),accts_usernames:b(this.accts_usernames,c),accts_passwords:b(this.accts_passwords,c)}}}();var d=function(a,b,c,d){for(var e=0,f=c.length;e<f;++e)a[b+d+e+"name"]=c[e].name,a[b+d+e+"value"]=c[e].value;a[b+"num"+d]=c.length},f=function(a,b){var c=LPServer.getAttrInt(a,"numemails",0);1===
c?b.success(LPServer.ext.translate("Share sent to %1.",LPServer.getAttr(a,"email0",""))):b.success(LPServer.ext.translate("Share sent to %1 recipients.",c))},h=function(a,b){for(var c=[],d=0,e=a.length;d<e;++d){var f=a[d];f&&c.push({email:f,reason:b})}return c},p=function(a,e){var l=LPServer.getAttrInt(a,"numsharesok",0);if(0<l){for(var k=[],n=0;n<l;++n){var t=LPServer.getAttr(a,"emailok"+n,""),p=LPServer.getAttr(a,"emailokpubkeyhex"+n,""),r=LPServer.getAttr(a,"emailencp"+n,"");k.push(new b(t,p,r))}t=
e.params.key;n=[];p=LPServer.getNodes(a,"encdata");r=0;for(var q=p.length;r<q;++r)n.push(new c(p[r],t));t={cmd:"share",sharemessage:"",giveshare:e.params.giveshare?1:0,numemails:k.length,numaids:n.length,fromrole:0,sharesyncpush:0,shareautopull:0,reportname:[]};p=0;for(r=k.length;p<r;++p){var H=k[p];q=LPServer.ext.createRandomHexString(64);q=LPServer.ext.hex2bin(q);var G=new LPServer.ext.RSAKey;LPServer.ext.parsePublicKey(G,H.pubkey);var y=G.encrypt(q);G="email"+p;t[G]=H.email;t["sharekeyenchex"+
p]=y;t["sharekeyenchexsig"+p]="";H.encpass&&(t["encpass"+p]=H.encpass);for(H=0;H<n.length;++H){y=n[H];var z=y.encrypt(q);1==e.params.logname&&t.reportname.push({aid:y.aid,name:y.name});var I=G+"aid"+H;t[I]=y.aid;t[I+"username"]=z.username;t[I+"password"]=z.password;t[I+"name"]=z.name;t[I+"grouping"]=z.grouping;t[I+"extra"]=z.extra;t[I+"attachkey"]=z.attachkey;t[I+"template"]=y.template;d(t,I,z.afids,"afid");d(t,I,z.otherafids,"otherafid");d(t,I,z.accts_notes,"accts_notes");d(t,I,z.accts_usernames,
"accts_usernames");d(t,I,z.accts_passwords,"accts_passwords")}}LPServer.xmlRequest({url:"showshare.php",data:t,callbacks:{shareok:f},userSupplied:e})}k=LPServer.getAttrInt(a,"numsharesdne",0);0<k&&e.callbacks&&e.callbacks.invite&&e.callbacks.invite({emails:LPServer.getRecordsFromResponse(a,"emaildne",k)});r=LPServer.getAttr(a,"sharingwithself","");k=LPServer.getAttrInt(a,"numsharesinv",0);n=LPServer.getAttrInt(a,"numsharesuns",0);t=LPServer.getAttrInt(a,"numsharesspa",0);p=LPServer.getAttrInt(a,"numsharesres",
0);(r||0<k||0<n||0<t||0<p)&&e.callbacks&&e.callbacks.problems&&(r=h([r],LPServer.ext.translate("You can not share with yourself.")),r=r.concat(h(LPServer.getRecordsFromResponse(a,"emailinv",k),LPServer.ext.translate("Invalid email address."))),r=r.concat(h(LPServer.getRecordsFromResponse(a,"emailuns",n),LPServer.ext.translate("The user must login to LastPass at least once to permit sharing."))),r=r.concat(h(LPServer.getRecordsFromResponse(a,"emailspa",t),LPServer.ext.translate("The user does not want to receive emails from LastPass."))),
r=r.concat(h(LPServer.getRecordsFromResponse(a,"emailres",p),LPServer.ext.translate("Sharing is restricted by a LastPass Enterprise policy."))),e.callbacks.problems(r));0===l&&e.error()};return function(b){b.callbacks=LPServer.extend(b.callbacks,a);for(var c={cmd:"getclientdata",shareeusername:b.params.emails,numaids:b.params.aids.length},d=0,e=b.params.aids.length;d<e;++d)c["aid"+d]=b.params.aids[d];LPServer.xmlRequest({url:"showshare.php",data:c,callbacks:{getclientdataack:p},userSupplied:b})}}(),
b=function(){var a=function(a,b){b.success(LPServer.ext.translate("Share revoked from %1",b.params.email))};return function(b){LPServer.xmlRequest({url:"showshare.php",data:{cmd:"unshare",aid:b.params.id,username:b.params.email},callbacks:{unshareok:a},userSupplied:b})}}(),c=function(){var a=function(a,b){b.success(LPServer.ext.translate("Share accepted."))},b=function(a,b,c){return(a=LPServer.ext.decrypt(a,b))?LPServer.ext.encryptCBC(a,c):""},c=function(c){var d=c.params.key,e=c.params.pendingShareKey,
f=c.params.pendingShare,l={cmd:"acceptshare",msgtosharer:"",aid:f.id,newgroup:LPServer.ext.encryptCBC(c.params.group,d),name:b(f.sharename,e,d),grouping:b(f.sharegroup,e,d),username:b(f.username,e,d),password:b(f.password,e,d),extra:b(f.extra,e,d),attachkey:b(f.attachkey,e,d)};l.newname=c.params.name?LPServer.ext.encryptCBC(c.params.name,d):l.name;var h=f.save_all?"otherafid":"afid",k;for(k in f.shareafids){var n=f.shareafids[k];n&&(n=b(n,e,d));l[h+k]=n}LPServer.xmlRequest({url:"showacceptshare.php",
data:l,callbacks:{acceptshareok:a},userSupplied:c})};return function(a){a.params.pendingShare?c(a):a.params.id&&h(LPServer.extend({},a,{params:{id:a.params.id},success:function(b){a.params.pendingShare=b.pendingShare;var d=new LPServer.ext.RSAKey;LPServer.ext.parsePrivateKey(d,LPServer.ext.extractPrivateKey(b.privateKey,a.params.key));a.params.pendingShareKey=d.decrypt(a.params.pendingShare.sharekeyenchex);c(a)}}))}}(),d=function(){var a=function(a,b){b.success(LPServer.ext.translate("Share rejected."))};
return function(b){LPServer.xmlRequest({url:"showacceptshare.php",data:{cmd:"rejectshare",aid:b.params.id},callbacks:{rejectshareok:a},userSupplied:b})}}(),f=function(){var a=function(a,b){if(b.callbacks&&b.callbacks.problems){var c=[],d=LPServer.getAttrInt(a,"numalready",0);0<d&&(d=LPServer.getRecordsFromResponse(a,"emailalready",d).join(", "),c.push(LPServer.ext.translate("You have already invited the following friends: %1. Please send them a reminder using your personal email as the email invitation sent by LastPass might not have reached them.",
d)));d=LPServer.getAttrInt(a,"numspam",0);0<d&&(d=LPServer.getRecordsFromResponse(a,"emailspam",d).join(", "),c.push(LPServer.ext.translate("The following friends have marked your invitations as spam: %1.",d)));0<c.length&&b.callbacks.problems(c)}c=LPServer.getAttrInt(a,"numsent",0);1===c?b.success(LPServer.ext.translate("%1 was invited. We will send you a notification email when they join LastPass so you can retry sharing your data with them.",LPServer.getAttr(a,"emailsent0",""))):1<c?b.success(LPServer.ext.translate("%1 friends were invited. We will send you a notification email when any of them join LastPass so you can retry sharing your data with them.",
c)):b.error()};return function(b){for(var c={cmd:"invite",numemails:b.params.emails.length},d=0,e=b.params.emails.length;d<e;++d)c["email"+d]=b.params.emails[d];LPServer.xmlRequest({url:"showshare.php",data:c,callbacks:{inviteack:a},userSupplied:b})}}(),h=function(a){var b=a.params&&a.params.id?{aid:a.params.id}:{};if(a.params.url&&a.params.url.match(/acceptshare=/gi)){b.from="acceptshare";var c=(c=a.params.url.match(/confirm_token=[^&]*/gi))?c[0].split("=")[1]:"";b.confirm_token=c}LPServer.jsonRequest({url:"getReceivedShareInfo.php",
data:b,userSupplied:a})};return{shareItems:a,unshareItem:b,acceptShare:c,rejectShare:d,inviteFriends:f,getSentShareData:function(a){LPServer.jsonRequest({url:"getSentShareInfo.php",data:a.params&&a.params.id?{aid:a.params.id}:null,userSupplied:a})},getReceivedShareData:h}}();LPServer.sharing=LPServer.sharing||{};
LPServer.sharing.folder=function(){var a=function(a,b){b.success(a,{sharedFolder:b.params.sharedFolder,shareInfo:b.params.shareInfo})},b=function(a,b,c){if(0<b.length){a.adminuidcnt=b.length;for(var d=0,e=b.length;d<e;++d){var f=b[d],l=new LPServer.ext.RSAKey;LPServer.ext.parsePublicKey(l,f.key);a["adminsharekey"+d]=l.encrypt(LPServer.ext.bin2hex(c));a["adminuid"+d]=f.uid}}},c=function(){var a=function(a,b){if(a.success){for(var c={},d=0;void 0!==a["pubkey"+d];)c[a["username"+d]]={uid:a["uid"+d],
cgid:a["cgid"+d],pubkey:a["pubkey"+d]},++d;d=[];if(a.groupname){a=a.groupname.split(",");for(var e=0,f=a.length;e<f;++e)d.push(a[e])}0<d.length&&LPServer.callback(b,"emptyGroups",d);b.success(c)}else b.error()},b={nouser:function(a,b){b.error&&b.error("");LPServer.callback(b,"invite",{emails:a.unknownusers.split(",")})},"default":a,emptygroup:a,noshareerr:function(a,b){b.error(LPServer.ext.translate("Sorry, company policy prohibits use of this feature."))}};return function(a){LPServer.jsonRequest({url:"share.php",
data:{getpubkey:1,uid:"string"===typeof a.params.userInfo?a.params.userInfo:JSON.stringify(a.params.userInfo),jsonr:1},callbacks:b,userSupplied:a})}}(),d=function(){var a=function(a,b){var c=new LPServer.ext.RSAKey;LPServer.ext.parsePublicKey(c,b);return c.encrypt(LPServer.ext.bin2hex(a))},b=function(a,b){for(var c in b){var d=b[c];if("group"===d.type&&a.cgid===d.uid)return c}return null},d=function(c,d){var e={id:d.params.shareInfo.id,update:1,add:1,sharename:d.params.shareInfo.sharename,name:d.params.shareInfo.name,
readonly:d.params.readonly?1:0,give:d.params.hidePasswords?0:1,notify:d.params.notify?1:0,canadminister:d.params.can_administer?1:0,xmlr:1},f=d.params.newMembers?d.params.newMembers:{},l=0,h=0,k=[],n={},t;for(t in c){var r=c[t];f[t]&&"undefined"!==typeof f[t]||(f[t]={});r.readOnly="object"===typeof f&&f[t].readOnly?1:e.readonly;r.canAdminister="object"===typeof f&&f[t].canAdminister?1:e.canadminister;r.give="object"!==typeof f||f[t].hidePasswords||"undefined"===typeof f[t].hidePasswords?e.give:1;
r.pubkey?(e["sharekey"+l]=a(d.params.shareInfo.key,r.pubkey),e["uid"+l]=r.uid,e["cgid"+l]=r.cgid,e["readonly"+l]=r.readOnly,e["canadminister"+l]=r.canAdminister,e["give"+l]=r.give,++l):(e["msfuser"+h]=r.uid,e["msfcgid"+h]=r.cgid,e["msfreadonly"+h]=r.readOnly,e["msfcanadminister"+h]=r.canAdminister,e["msfgive"+h]=r.give,k.push(t),++h);n[b(r,f)||t]=!0}var p=l+h;0<p?LPServer.xmlRequest({url:"share.php",data:e,callbacks:{useradded:function(a,b){6>=p&&0<k.length&&LPServer.callback(b,"noSharingKeyUsers",
k);b.success(LPServer.ext.translate("%1 users/groups were invited.",Object.keys(n).length),n)}},userSupplied:d}):d.error()};return function(a){c(LPServer.extend({},a,{params:{userInfo:a.params.newMembers},success:function(b){d(b,a)}}))}}(),f=function(){var d={ok:function(b,c){var d=LPServer.getAttr(b,"id");c.params.sharedFolder.aid=d;c.params.shareInfo.id=d;c.params.shareInfo.shareid=d;c.params.shareInfo.uid=LPServer.getAttr(b,"uid");a(LPServer.ext.translate("Shared Folder %1 created.",c.params.sharedFolder.group),
c)},exceededlimit:function(a,b){b.error(LPServer.ext.translate("Sorry, as a LastPass Premium user, you are limited to one Shared Folder. Please consider using LastPass Enterprise if you would like more."))},premiumrequired:function(a,b){b.error(LPServer.ext.translate("Sorry, LastPass Premium is required to create a Shared Family Folder"))},alreadyexists:function(a,b){b.error(LPServer.ext.translate("That group already exists."))}},e=function(a,e){var f={};f[e.params.username]={uid:e.params.uid,type:"companyuser"};
e.params.superusers=a;c(LPServer.extend({},e,{params:{userInfo:f},success:function(a){if(a=a[e.params.username].pubkey){var c=e.params.sharedFolder,f=e.params.shareInfo=e.params.shareInfo||{},l={id:0,update:1,newusername:e.params.username+"-"+c.group,name:0===c.group.indexOf("Shared-")?c.group.substring(7):c.group,xmlr:1},h=LPServer.ext.makeRandomPassword(),k=f.key=LPServer.ext.makeKey(l.newusername,h,5E3);l.newhash=LPServer.ext.makeHash(k,h,5E3);h=new LPServer.ext.RSAKey;LPServer.ext.parsePublicKey(h,
a);l.sharekey=f.sharekey=h.encrypt(LPServer.ext.bin2hex(k));l.sharename=f.sharename=LPServer.ext.encryptCBC(c.group,k);b(l,e.params.superusers,k);LPServer.xmlRequest({url:"share.php",data:l,callbacks:d,userSupplied:e})}else LPServer.callback(e,"sharingkeyrequired"),e.error&&e.error("")}}))};return function(a){LPServer.jsonRequest({url:"getSuperUserInfo.php",success:e,userSupplied:a})}}(),h=function(){var b={ok:function(b,c){a(LPServer.ext.translate("Shared Folder %1 was renamed.",c.params.shareInfo.name),
c)}};return function(a){a.params.shareInfo.name=a.params.sharedFolder.group.substring(7);a.params.shareInfo.sharename=LPServer.ext.encryptCBC(a.params.sharedFolder.group,a.params.shareInfo.key);LPServer.xmlRequest({url:"share.php",data:{update:1,rename:1,id:a.params.shareInfo.id,name:a.params.shareInfo.name,sharename:a.params.shareInfo.sharename,xmlr:1},callbacks:b,userSupplied:a})}}(),k=function(){var b=function(b,c){c.params.shareInfo.deleted="1";a(LPServer.ext.translate("Shared Folder deleted."),
c)};return function(a){LPServer.xmlRequest({url:"share.php",data:{id:a.params.shareInfo.id,"delete":1,xmlr:1},callbacks:{deleted:b},userSupplied:a})}}(),e=function(){var a=function(a,b){b.success(LPServer.ext.translate("Member removed."))};return function(b){var c={id:b.params.shareid,xmlr:1};b.params.msfuser?(c.msfdelete=1,c.msfuser=b.params.uid):(c.update=1,c.delete=1,c.uid=b.params.uid);LPServer.xmlRequest({url:"share.php",data:c,callbacks:{ok:a},userSupplied:b})}}(),l=function(){var a=function(a,
b){b.success(LPServer.ext.translate("Permissions saved."))};return function(b){LPServer.xmlRequest({url:"editSharedFolderUsers.php",data:{cmd:"edit",xml:1,shareid:b.params.shareInfo.id,request:JSON.stringify(b.params.updatedPermissions)},callbacks:{ok:a},userSupplied:b})}}(),n=function(a,b,c){var d={id:b.params.shareInfo.id,xmlr:1};d[a]=1;LPServer.xmlRequest({url:"share.php",data:d,callbacks:c,userSupplied:b})},t=function(){var b=function(b,c){c.params.shareInfo.download="1";a(LPServer.ext.translate("Shared Folder will now be downloaded."),
c)};return function(a){n("startdownloading",a,{ok:b})}}(),r=function(){var b=function(b,c){c.params.shareInfo.download="0";a(LPServer.ext.translate("Shared Folder will no longer be downloaded."),c)};return function(a){n("stopdownloading",a,{ok:b})}}(),p=function(){var b={undeleted:function(b,c){c.params.shareInfo.deleted="0";a(LPServer.ext.translate("Shared Folder restored."),c)}};return function(a){LPServer.xmlRequest({url:"share.php",data:{id:a.params.shareInfo.id,undelete:1,xmlr:1},callbacks:b,
userSupplied:a})}}(),y=function(){var a={purged:function(a,b){b.success(LPServer.ext.translate("Shared Folder purged."))}};return function(b){LPServer.xmlRequest({url:"share.php",data:{id:b.params.shareInfo.id,purge:1,xmlr:1},callbacks:a,userSupplied:b})}}(),q=function(){var a=function(a,b){b.success(a.folders)};return function(b){LPServer.jsonRequest({url:"getSharedFolderInfo.php",success:a,userSupplied:b})}}(),x=function(){var b={success:function(b,c){c.params.shareInfo.accepted="1";a(LPServer.ext.translate("Shared Folder accepted."),
c)}};return function(a){LPServer.jsonRequest({url:"share.php",data:{folder:a.params.shareInfo.id,acceptfolder:1,jsonr:1},callbacks:b,userSupplied:a})}}(),A=function(){var a={success:function(a,b){b.success(LPServer.ext.translate("Shared Folder rejected."))}};return function(b){LPServer.jsonRequest({url:"share.php",data:{id:b.params.shareInfo.id,rejectfolder:1,jsonr:1},callbacks:a,userSupplied:b})}}(),B=function(){var a={success:function(a,b){b.success(LPServer.ext.translate("Shared Folder member reinvited."))}};
return function(b){var c={reinvite:1,invitee:b.params.uid,folder:b.params.shareid,jsonr:1};"1"===b.params.ent&&(c.ent="on");LPServer.jsonRequest({url:"share.php",data:c,callbacks:a,userSupplied:b})}}(),J=function(){var c={success:function(b,c){c.params.shareInfo.cid=LPServer.getAttr(b,"cid");c.params.shareInfo.outside_enterprise=LPServer.getAttr(b,"outside_enterprise");a(LPServer.ext.translate("Personal Shared Folder moved into Enterprise. You can now adminster the folder."),c)}},d=function(a,d){var e=
{id:d.params.shareInfo.id,moveintoenterprise:1,xmlr:1};b(e,a,d.params.shareInfo.key);LPServer.xmlRequest({url:"share.php",data:e,callbacks:c,userSupplied:d})};return function(a){LPServer.jsonRequest({url:"getSuperUserInfo.php",success:d,userSupplied:a})}}();return{SHARED_FOLDER_NAME_PREFIX:"Shared-",getFolders:q,getPublicKeys:c,create:f,rename:h,remove:k,accept:x,reject:A,addMembers:d,getMembers:function(a){LPServer.jsonRequest({url:"getSharedFolderMembers.php",data:{shareid:a.params.shareid},userSupplied:a})},
removeMember:e,reinviteMember:B,updateMemberPermissions:l,getRestrictions:function(a){LPServer.jsonRequest({url:"getSharedFolderRestrictions.php",data:a.params,userSupplied:a})},updateRestrictions:function(a){LPServer.textRequest({url:"share.php",data:{id:a.params.shareid,edit:1,limit:1,aids:a.params.aids,numaids:0<a.params.aids.length?a.params.aids.split(",").length:0,additionaluids:a.params.additionaluids,hidebydefault:a.params.hidebydefault?1:0,uid:a.params.uid,xmlr:1},success:function(){a.success(LPServer.ext.translate("Access restrictions updated."))},
userSupplied:a})},startDownloading:t,stopDownloading:r,restoreDeleted:p,purgeDeleted:y,convertToEnterprise:J}}();LPServer.identities=function(){var a=function(a,c){var b={iid:a.params.identity.iid,iname:a.params.identity.iname,edit:"1",aids:a.params.identity.aids,ffids:a.params.identity.ffids,appaids:a.params.identity.appaids};a.params.identity.pw_prompt&&(b.pwprotect="on");LPServer.xmlRequest({url:"identity.php",data:b,success:c,userSupplied:a})};return{add:function(b){a(b,"identadded")},remove:function(a){LPServer.xmlRequest({url:"identity.php",data:{src:"website",deleteext:1,iid:a.params.id},success:"identdeleted",
userSupplied:a})},update:function(b){a(b,"identupdated")}}}();LPServer.emergencyAccess=function(){var a=function(a){var b=new LPServer.ext.RSAKey;LPServer.ext.parsePublicKey(b,a.params.recipient.publickey);b=b.encrypt(LPServer.ext.bin2hex(LPServer.ext.getLocalKey()));LPServer.jsonRequest({url:"legacy_helper.php",data:{action:"update_sharee",semail:a.params.recipient.username,enc_key:b,prio:1,hours:a.params.recipient.hours_to_override},userSupplied:a})},b=function(){var b=function(b,c){b.errors instanceof Array&&0<b.errors.length?c.callbacks&&c.callbacks.nosharingkeys?
c.callbacks.nosharingkeys(b,c):c.error("nosharingkeys"):b.noemail instanceof Array&&0<b.noemail.length?(c.callbacks&&c.callbacks.invite&&c.callbacks.invite({emails:b.noemail}),c.error("")):b[c.params.recipient.username]?(c.params.recipient.publickey=b[c.params.recipient.username],a(c)):c.error()};return function(a){LPServer.jsonRequest({url:"legacy_helper.php",data:{action:"get_pubkey",emails:a.params.recipient.username},success:b,userSupplied:a})}}(),c=function(){var a=function(a,b){b.callbacks&&
b.callbacks.successGranted&&b.callbacks.successGranted(a,b)},b=function(a,b){b.callbacks&&b.callbacks.successLinked&&b.callbacks.successLinked(a,b)},c=function(a,c){var d=new LPServer.ext.RSAKey;LPServer.ext.parsePrivateKey(d);d=d.decrypt(a.enc_key);LPServer.xmlRequest({url:"legacy_helper.php",data:{action:"link",name:c.params.sharer.username,legacy:1,sharekey:a.enc_key,sharename:LPServer.ext.encrypt(c.params.sharer.username,LPServer.ext.hex2bin(d))},callbacks:{ok:b},userSupplied:c})};return function(b){LPServer.jsonRequest({url:"legacy_helper.php",
data:{action:"confirm",lemail:b.params.sharer.username},callbacks:{success:a,allowed:c},userSupplied:b})}}(),d=function(a){if(!a||!a.length||!g_uid)return!1;LPServer.lmiapi.jsonRequest({url:"lmiapi/emergency-access/sharees",method:"POST",data:a})},f=function(a,b){LPServer.lmiapi.jsonRequest({url:"lmiapi/emergency-access/sharees",type:"GET",contentType:"application/json",dataType:"json",success:function(b){a&&a(b)},error:function(a){"undefined"!==typeof Raven&&Raven.captureException(a,{extra:{uid:g_uid}});
b&&b()}})};return{updateRecipient:a,addRecipient:b,removeRecipient:function(a){LPServer.jsonRequest({url:"legacy_helper.php",data:{action:"revoke_offer",email:a.params.email},userSupplied:a})},getRecipientInfo:function(a){LPServer.jsonRequest({url:"legacy_helper.php",data:{action:"get_sharees",lemail:a.params.email},userSupplied:a})},getSharerInfo:function(a){LPServer.jsonRequest({url:"legacy_helper.php",data:{action:"get_sharers"},userSupplied:a})},acceptOffer:function(a){LPServer.jsonRequest({url:"legacy_helper.php",
data:{action:"accept_offer",email:a.params.sharer.username},userSupplied:a})},declineOffer:function(a){LPServer.jsonRequest({url:"legacy_helper.php",data:{action:"decline_offer",email:a.params.email},userSupplied:a})},requestAccess:c,denyAccess:function(a){LPServer.jsonRequest({url:"legacy_helper.php",data:{action:"deny_access",email:a.params.email},userSupplied:a})},unlinkAccount:function(a){LPServer.jsonRequest({url:"legacy_helper.php",data:{action:"unlink",lemail:a.params.email},userSupplied:a})},
updateShareeKey:d,getEmergencyAccessShareeData:f,checkEmergencyAccessHealth:function(){f(function(a){if(a){var b=[];a.forEach(function(a){var c=a.publicSharingKey;if(c&&a.updateRequired){var d=new RSAKey;parse_public_key(d,c)&&(c=d.encrypt(LPServer.ext.bin2hex(LPServer.ext.getLocalKey())),b.push({userId:a.userId,encryptedVaultKey:c}))}});b.length&&d(b)}})}}}();LPServer.sitesAndNotes=function(){return{saveCustomNoteTemplate:function(a){LPServer.lmiapi.jsonRequest({url:"lmiapi/note-templates",data:a.params,success:function(b){a.success(LPServer.ext.translate("Custom Note Template: %1 created.",b.title),b)},userSupplied:a})},deleteCustomNoteTemplate:function(a){var b=g_note_templates.filter(function(b){return b.id===a.params.id});b&&0<b.length&&LPServer.lmiapi.jsonRequest({url:"lmiapi/note-templates/"+a.params.id+"/delete",success:function(c){a.success(LPServer.ext.translate("Custom Note Template: %1 deleted.",
b[0].title),c)},userSupplied:a})}}}();LPServer.transact=function(){return{sendReminder:function(a){LPServer.lmiapi.jsonRequest({url:"lmiapi/transact/cross-device-reminder",data:a.params,userSupplied:a})}}}();BackgroundServer=function(a){LPServer.initialize(a,{ajax:function(a){a.data&&(a.data.method=get_method());LPPlatform.ajax(a)}});var b=function(a){return function(){a.apply(this,arguments);increment_local_accts_version();rewritelocalfile()}},c=function(a,b,c){b instanceof Array?b.push(a):b[a[c]]=a},d=b(c),f=function(a,b,c){if(b instanceof Array)for(var d=0,e=b.length;d<e;++d){if(a[c]===b[d][c]){b[d]=a;break}}else b[a[c]]=a},h=b(f),k=function(a,b,c){if(a instanceof Array)for(var d=0,e=a.length;d<e;++d){if(c===
a[d][b]){a.splice(d,1);break}}else delete a[b]},e=b(k);return{emergencyAccess:{updateRecipient:function(a){var b=a.success;a.success=function(c){h(a.params.recipient,g_emer_sharees,"username");b(a.params.recipient)};LPServer.emergencyAccess.updateRecipient(a)},addRecipient:function(a){var b=a.success;a.success=function(c){d(a.params.recipient,g_emer_sharees,"username");b(a.params.recipient)};LPServer.emergencyAccess.addRecipient(a)},removeRecipient:function(a){a.success=LPServer.extendCallback(a.success,
function(){e(g_emer_sharees,"username",a.params.id)});LPServer.emergencyAccess.removeRecipient(a)},getRecipientInfo:function(a){LPServer.emergencyAccess.getRecipientInfo(a)},getSharerInfo:function(a){LPServer.emergencyAccess.getSharerInfo(a)},acceptOffer:function(a){var b=a.success;a.success=function(){var c=a.params.sharer;c.accepted="1";h(c,g_emer_sharers,"username");b(c)};LPServer.emergencyAccess.acceptOffer(a)},declineOffer:function(a){a.success=LPServer.extendCallback(a.success,function(){e(g_emer_sharers,
"username",a.params.email)});LPServer.emergencyAccess.declineOffer(a)},requestAccess:function(a){a.callbacks=a.callbacks||{};var b=a.callbacks.successLinked;a.callbacks.successLinked=function(a,c){a=c.params.sharer;a.confirmed="1";a.allowed_access="1";a.linked="1";a.override_date=new Date;refreshsites();b&&b(a,c)};var c=a.callbacks.successGranted;a.callbacks.successGranted=function(a,b){a=b.params.sharer;a.confirmed="1";a.override_date=new Date;a.override_date.setTime(a.override_date.getTime()+36E5*
a.hours_to_override);c&&c(a,b)};LPServer.emergencyAccess.requestAccess(a)},denyAccess:function(a){a.success=LPServer.extendCallback(a.success,function(){a:if(g_emer_sharees instanceof Array){var b=0;for(var c=g_emer_sharees.length;b<c;++b)if(a.params.email===g_emer_sharees[b].username){b=g_emer_sharees[b];break a}b=void 0}else b=g_emer_sharees.username;b.confirmed="0";b.allowed_access="0"});LPServer.emergencyAccess.denyAccess(a)},unlinkAccount:function(a){a.success=LPServer.extendCallback(a.success,
b(function(){if(a.params.folderID)delete g_sites[a.params.folderID];else for(var b in g_sites){var c=g_sites[b];if("http://group"===c.url&&c.group===a.params.email){delete g_sites[b];break}}}));LPServer.emergencyAccess.unlinkAccount(a)},updateShareeKey:function(a,b){if(!a)throw Error("No sharee ID was provided!");LPServer.emergencyAccess.updateShareeKey([{userId:a,encryptedVaultKey:b,keyUpdated:""}])}},identities:{add:function(a){var b=a.success;a.success=function(c){var e=a.params.identity;e.iid=
LPServer.getAttr(c,"iid","");d(e,g_identities,"iid");b(e)};LPServer.identities.add(a)},remove:function(a){a.success=LPServer.extendCallback(a.success,function(){e(g_identities,"iid",a.params.id)});LPServer.identities.remove(a)},update:function(a){var b=a.success;a.success=function(){var c=a.params.identity;h(c,g_identities,"iid");b(c)};LPServer.identities.update(a)}},vault:{history:{revertPasswordChange:function(){LPServer.vault.history.revertPasswordChange.apply(this,arguments)},getPasswordHistory:function(){LPServer.vault.history.getPasswordHistory.apply(this,
arguments)},getUsernameHistory:function(){LPServer.vault.history.getUsernameHistory.apply(this,arguments)},getNoteHistory:function(){LPServer.vault.history.getNoteHistory.apply(this,arguments)}}},sharing:{individual:{shareItems:function(a){LPServer.sharing.individual.shareItems(a)},unshareItem:function(a){LPServer.sharing.individual.unshareItem(a)},acceptShare:function(a){a.success=LPServer.extendCallback(a.success,function(){refreshsites()});LPServer.sharing.individual.acceptShare(a)},rejectShare:function(a){a.success=
LPServer.extendCallback(a.success,function(){e(g_pendings,"id",a.params.id)});LPServer.sharing.individual.rejectShare(a)},inviteFriends:function(a){LPServer.sharing.individual.inviteFriends(a)},getSentShareData:function(a){LPServer.sharing.individual.getSentShareData(a)},getReceivedShareData:function(a){LPServer.sharing.individual.getReceivedShareData(a)}},folder:{getFolders:function(a){LPServer.sharing.folder.getFolders(a)},getPublicKeys:function(a){LPServer.sharing.folder.getPublicKeys(a)},create:function(a){a.success=
LPServer.extendCallback(a.success,b(function(a,b){b.shareInfo.sharekeyaes=lpmenc(AES.bin2hex(b.shareInfo.key),!0,g_local_key);b.sharedFolder.sharefolderid=b.sharedFolder.aid;c(b.shareInfo,g_shares,"id");c(b.sharedFolder,g_sites,"aid")}));a.params.username=g_username;LPServer.sharing.folder.create(a)},rename:function(a){a.success=LPServer.extendCallback(a.success,b(function(a,b){f(b.shareInfo,g_shares,"id");f(b.sharedFolder,g_sites,"aid")}));LPServer.sharing.folder.rename(a)},remove:function(a){a.success=
LPServer.extendCallback(a.success,b(function(a,b){f(b.shareInfo,g_shares,"id");for(var c in g_sites)g_sites[c].sharefolderid===b.shareInfo.id&&delete g_sites[c]}));LPServer.sharing.folder.remove(a)},accept:function(a){a.success=LPServer.extendCallback(a.success,function(){k(g_pending_shares,"id",a.params.shareInfo.id);refreshsites()});LPServer.sharing.folder.accept(a)},reject:function(a){a.success=LPServer.extendCallback(a.success,b(function(){k(g_pending_shares,"id",a.params.shareInfo.id)}));LPServer.sharing.folder.reject(a)},
addMembers:function(a){LPServer.sharing.folder.addMembers(a)},getMembers:function(a){LPServer.sharing.folder.getMembers(a)},removeMember:function(a){LPServer.sharing.folder.removeMember(a)},reinviteMember:function(a){LPServer.sharing.folder.reinviteMember(a)},updateMemberPermissions:function(a){LPServer.sharing.folder.updateMemberPermissions(a)},getRestrictions:function(a){LPServer.sharing.folder.getRestrictions(a)},updateRestrictions:function(a){LPServer.sharing.folder.updateRestrictions(a)},startDownloading:function(a){a.success=
LPServer.extendCallback(a.success,function(a,b){refreshsites()});LPServer.sharing.folder.startDownloading(a)},stopDownloading:function(a){a.success=LPServer.extendCallback(a.success,b(function(a,b){f(b.shareInfo,g_shares,"id");for(var c in g_sites)g_sites[c].sharefolderid===b.shareInfo.id&&delete g_sites[c]}));LPServer.sharing.folder.stopDownloading(a)},restoreDeleted:function(a){a.success=LPServer.extendCallback(a.success,b(function(a,b){f(b.shareInfo,g_shares,"id");refreshsites()}));LPServer.sharing.folder.restoreDeleted(a)},
purgeDeleted:function(a){a.success=LPServer.extendCallback(a.success,b(function(){k(g_shares,"id",a.params.shareid);k(g_sites,"aid",a.params.shareid)}));LPServer.sharing.folder.purgeDeleted(a)},convertToEnterprise:function(a){a.success=LPServer.extendCallback(a.success,b(function(a,b){f(b.shareInfo,g_shares,"id");f(b.sharedFolder,g_sites,"aid")}));LPServer.sharing.folder.convertToEnterprise(a)}}},sitesAndNotes:{saveCustomNoteTemplate:function(a){a.success=LPServer.extendCallback(a.success,b(function(a,
b){c(b,g_note_templates,"id")}));LPServer.sitesAndNotes.saveCustomNoteTemplate(a)},deleteCustomNoteTemplate:function(a){a.success=LPServer.extendCallback(a.success,b(function(b,c){k(g_note_templates,"id",a.params.id)}));LPServer.sitesAndNotes.deleteCustomNoteTemplate(a)}},transact:{sendReminder:function(a){LPServer.transact.sendReminder(a)}},families:{getMembers:function(a){LPServer.jsonRequest({url:"typeahead_remote.php",method:"GET",success:a.success,error:a.error})},existingUserTrial:function(a){LPServer.lmiapi.jsonRequest({url:"lmiapi/families/trial/existing-user",
method:"POST",data:a.params,userSupplied:{error:a.error},success:function(){refreshsites()}})},getInvitations:function(a){LPServer.lmiapi.jsonRequest({url:"lmiapi/families/invitations",type:"GET",success:a.success,userSupplied:a})}},invitation:{acceptInvitation:function(a){LPServer.lmiapi.jsonRequest({url:"lmiapi/invitations/"+a.params.invitationId+"/accept",type:"POST",success:function(){refreshsites()},userSupplied:a})},dismissInvitation:function(a){LPServer.lmiapi.jsonRequest({url:"lmiapi/invitations/"+
a.params.invitationId+"/dismiss",type:"POST",success:a.success,userSupplied:a})}}}}(this);var rsa_extract_privatekey=function(){return function(a,b){if(!a)return"";a="!"==a.charAt(0)?lpdec(a,b):AES.Decrypt({pass:b+b.substring(0,16),data:btoa(AES.hex2bin(a)),b64:!0,bits:256,mode:"cbc"});return!a||42>=a.length||0!==a.indexOf("LastPassPrivateKey<")||a.indexOf(">LastPassPrivateKey")!==a.length-19?"":a.substring(19,a.length-19)}}();
function rsa_encrypt_privatekey_v1(a,b){a="LastPassPrivateKey<"+a+">LastPassPrivateKey";return AES.bin2hex(atob(AES.Encrypt({pass:b+b.substring(0,16),data:a,b64:!0,bits:256,mode:"cbc"}))).toUpperCase()}function rsa_encrypt_privatekey_v2(a,b){return enccbc("LastPassPrivateKey<"+a+">LastPassPrivateKey",b)}function rsa_encrypt_privatekey(a,b){return rsa_encrypt_privatekey_v1(a,b)};function postacctsload(){var a,b={};for(a=0;a<g_sites.length;a++)g_sites[a].url=AES.hex2url(g_sites[a].url),"undefined"!=typeof g_sites[a].username&&(g_sites[a].unencryptedUsername=lpmdec_acct(g_sites[a].username,!0,g_sites[a],g_shares)),g_SUPPORTSINGLE||(g_sites[a].pwch=!1),b[g_sites[a].aid]=g_sites[a];g_sites=b;b={};for(a=0;a<g_securenotes.length;a++)g_securenotes[a].url=AES.hex2url(g_securenotes[a].url),b[g_securenotes[a].aid]=g_securenotes[a];g_securenotes=b;b={};for(a=0;a<g_applications.length;a++)g_applications[a].appname=
AES.hex2url(g_applications[a].appname),b[g_applications[a].appaid]=g_applications[a];g_applications=b;for(a=0;a<g_identities.length;a++)g_identities[a].deciname=lpdec(g_identities[a].iname);"function"==typeof get_data_handler&&get_data_handler();if("undefined"!=typeof foundmsfi){postdata="";b=0;for(a in msfids)if(msfids.hasOwnProperty(a)){for(var c=msfids[a].shareid,d="",f=null,h=0;h<g_shares.length;h++)if(g_shares[h].id==c){d=AES.bin2hex(g_shares[h].key);f=g_shares[h].decsharename;break}c=new RSAKey;
parse_public_key(c,msfids[a].key)&&f&&(d=c.encrypt(d),h=lpenc(f,g_shares[h].key),postdata+="&sharekey"+b+"="+encodeURIComponent(d)+"&uid"+b+"="+encodeURIComponent(msfids[a].uid),postdata+="&shareid"+b+"="+encodeURIComponent(msfids[a].shareid),postdata+="&decsharename"+b+"="+encodeURIComponent(f),postdata+="&encsharename"+b+"="+encodeURIComponent(h),b++)}postdata+="&token="+g_token;b=0;$.ajax({type:"POST",url:base_url+"process_msf.php",data:postdata,failure:function(a){console.log(a)}})}}
lploggedin=!0;g_server_accts_version=g_local_accts_version=-1;g_identities=[];g_formfills=[];g_pendings=[];base_url="";g_sites={};g_securenotes={};g_enterprisemodel=g_enterpriseuser=0;g_enterpriseuserrole=null;g_premium_trial=g_premium_exp=g_iscompanyadmin=0;g_applications={};g_shares=[];g_username_hash=lp_username=g_username=null;g_prompts={};g_maxid=[];g_groups={};g_prefoverrides={};lp_attaches=[];g_attachversion=[];g_emer_sharers=[];g_emer_sharees=[];g_note_templates=[];g_reminders=[];
lpversion="4.0";g_uid=null;g_icons=[];g_bigicons=[];g_identity="undefined"!==typeof iid&&iid?iid:Preferences.get("identity");g_basicauth_feature_enabled=g_nofolder_feature_enabled=!1;g_blob_version={};
function get_accts(){$.ajax({type:"POST",url:base_url+"getaccts.php",data:"mobile=1&b64=1&shap=1&includependingsharedfolders=1&includesharedfolderformfillprofiles=1&includeemergencyaccess=1&requestsrc=newvault&hasplugin="+encodeURIComponent(lpversion)+"&u="+encodeURIComponent(g_username_hash),dataType:"text",success:function(a){a=atob(a);g_sites=[];g_securenotes=[];g_prompts=[];g_formfills=[];g_identities=[];g_pendings=[];g_maxid=[];g_groups=[];g_prefoverrides=[];g_shares=[];g_applications=[];lp_attaches=
[];g_attachversion=[];g_emer_sharers=[];g_emer_sharees=[];g_note_templates=[];g_reminders=[];g_pending_shares=[];g_blob_version={};parsemobile(a,a.length,100,0,postacctsload,g_sites,g_securenotes,g_prompts,g_formfills,g_identities,null,null,!0,!1,null,g_pendings,null,g_maxid,null,g_groups,g_prefoverrides,lp_rsaprivatekeyhex,g_shares,null,null,null,g_applications,lp_attaches,g_attachversion,null,null,null,g_emer_sharers,g_emer_sharees,null,g_note_templates,g_pending_shares,g_reminders,null,null,null,
g_blob_version)}})}function process_icons(a,b){if(a&&(a=a.split(":"),a.length))for(var c=a[0],d=0,f=a.length;d+1<f;d+=2){var h=parseInt(a[d+1]);if(0===c.indexOf("lp")&&0<h){c=c.substring(2);var k=a[d+2].substring(0,h);b?g_bigicons[AES.hex2bin(c)]=k:g_icons[c]=k;c=a[d+2].substring(h)}}}
function get_icons(a){$.ajax({type:"POST",url:base_url+"geticon.php",data:"big=1&versionchrome=1&username="+encodeURIComponent(g_username)+"&domain=all",dataType:"text",success:function(b){"latest"!=b&&"nodata"!=b&&process_icons(b,!0);a&&a()}})}get_personal_linked=function(){for(var a=0;a<g_shares.length;a++)if("undefined"!=typeof g_shares[a].associative&&1==g_shares[a].associative)return g_shares[a].id;return""};get_securityChallengeScore=function(a){a(null)};
getbigicon=function(a){a=lp_gettld_url(a);return"undefined"!=typeof g_bigicons[a]?"data:image/png;base64,"+g_bigicons[a]:null};get_method_async=function(a){a()};geticonurlfromrecord=function(a,b){return is_application(a)?"lps lpapp"+a.fiid:"lps lp"+a.aid};unlock_plug2web=function(){g_plug2web_last_initiated=parseInt((new Date).getTime()/1E3)};get_last_reprompt_time=function(){"undefined"==typeof last_reprompt_time&&(last_reprompt_time=Preferences.get("lastreprompttime"));return last_reprompt_time};
set_last_reprompt_time=function(){last_reprompt_time=(new Date).getTime();Preferences.set("lastreprompttime",last_reprompt_time)};get_key_iterations=function(){return 5E3};(function(){var a={};lpevent=function(b){b="w"+b;a[b]=a.hasOwnProperty(b)?a[b]+1:1};setInterval(function(){if(g_prompts.improve){var b=!1,c;for(c in a){b=!0;break}b&&LPServer.xmlRequest({url:"poll_server.php",data:a});a={}}},1E4)})();
processCS=function(a,b,c){"ipcgetdata"==b.cmd&&"undefined"!=typeof g_plug2web_last_initiated&&g_plug2web_last_initiated>=parseInt((new Date).getTime()/1E3)-20&&(c=lpParseUri(b.url),a=c.directory.replace(/^\/~[^/]*/,""),c=c.file.replace(/#/,""),"/"==a&&"acctsiframe.php"==c&&(a={cmd:"ipcgotdata",username:g_username,key:btoa(g_local_key),version:lpversion,identity:g_identity,iterations:get_key_iterations(g_username)},b.callback(a)))};openimport=function(){window.open(base_url+"import.php")};
openexport=function(){window.open(base_url+"export.php")};openseccheck=function(){window.open(base_url+"?securitychallenge=1&lpnorefresh=1")};openentconsole=function(){window.open(base_url+"company/#/dashboard")};openFamilyConsole=function(){window.open(base_url+"family/")};loggedOut=function(){send_website_event("logoff");setTimeout(function(){top.location.href=base_url+"logout.php?token="+g_token},500)};get_saved_logins=function(){};have_binary=function(){return canopensaveattach};
install_binary=function(){window.open(base_url+"installer/")};addAttach=function(a){addattach_callback=a;attachkey=SHA256(get_random_password());send_website_event("getattach",attachkey)};
openAttach=function(a,b,c){for(var d=0;d<lp_attaches.length;d++)if(lp_attaches[d].id==b){if("undefined"===typeof lp_attaches[d].data||""===lp_attaches[d].data){var f={getattach:lp_attaches[d].storagekey};"undefined"!=typeof g_securenotes[a].sharefolderid&&(f.sharedfolderid=g_securenotes[a].sharefolderid);$.ajax({global:!1,type:"POST",cache:!1,dataType:"json",url:"show_website.php",data:f,success:function(f){""!=f&&(lp_attaches[d].data=f,openAttach(a,b,c))},failure:function(a){alert("error")}});break}send_website_event("openattach",
lpdec_acct(g_securenotes[a].attachkey,g_securenotes[a],g_shares),lp_attaches[d].data,lp_attaches[d].mimetype)}};
exportAttachment=function(a,b,c){for(var d=0;d<lp_attaches.length;d++)if(lp_attaches[d].id==b){if("undefined"===typeof lp_attaches[d].data||""===lp_attaches[d].data){var f={getattach:lp_attaches[d].storagekey};"undefined"!=typeof g_securenotes[a].sharefolderid&&(f.sharedfolderid=g_securenotes[a].sharefolderid);$.ajax({global:!1,type:"POST",cache:!1,dataType:"json",url:"show_website.php",data:f,success:function(f){""!=f&&(lp_attaches[d].data=f,exportAttachment(a,b,c))},failure:function(a){alert("error")}});
break}send_website_event("saveattach",lpdec_acct(g_securenotes[a].attachkey,g_securenotes[a],g_shares),lp_attaches[d].data,lp_attaches[d].mimetype)}};can_copy_to_clipboard=function(){return!1};fastEncryptAttachments=function(a,b,c){var d=[],f;for(f in b)b.hasOwnProperty(f)&&"undefined"!=typeof b[f]&&d.push({id:b[f].id,data:enccbc(b[f].bytes,a)});c(d)};gotourl=function(a){g_sites[a].url&&(a=g_sites[a].url,a.match(/^[a-z]+?:\/\//i)||(a="http://"+a),window.open(a))};increment_local_accts_version=function(){g_local_accts_version++};
refreshsites=function(){get_accts()};request_native_messaging=function(){send_website_event("request_native_messaging")};rewritelocalfile=function(){};editAid=function(a,b,c,d){d&&send_website_event("auto_pwchg",a,"0")};switch_identity=function(a){send_website_event("switchidentity",a);g_identity=""+a;Preferences.set("identity",g_identity);document.cookie="iid="+encodeURIComponent(g_identity)};
launch=function(a){g_hasplugin?(document[g_manualformname].aid.value=a,document[g_manualformname].submitbtn.click()):pa(function(){window.open(base_url+"launch.php?id="+encodeURIComponent(a)+"&shareid="+encodeURIComponent("undefined"!=typeof g_sites[a].sharefolderid?g_sites[a].sharefolderid:0)+"&method=web&token="+g_token)},g_prompts.login_site_prompt||g_sites[a].pwprotect)};launchApp=function(a){launch("app"+a)};
check_ident_aid=function(a){if(""===g_identity)return!0;for(var b=0;b<g_identities.length&&g_identities[b].iid!=g_identity;b++);if(b>=g_identities.length)return!1;b=g_identities[b];"undefined"==typeof b.aidarr&&(b.aidarr=b.aids.split(","));return lp_in_array(a,b.aidarr)};
check_ident_appaid=function(a){if(""===g_identity)return!0;for(var b=0;b<g_identities.length&&g_identities[b].iid!=g_identity;b++);if(b>=g_identities.length)return!1;b=g_identities[b];"undefined"==typeof b.appaidarr&&(b.appaidarr=b.appaids.split(","));return lp_in_array(a,b.appaidarr)};
openall=function(a,b){var c=[],d=!1,f;for(f in g_sites)if(check_ident_aid(f)){var h=g_sites[f];h.group==a&&"http://group"!=h.url&&(c.push(h),d=d||h.pwprotect)}if(0!==c.length)if(b||!d&&!g_prompts.login_site_prompt)for(b=0;b<c.length;b++)window.open(c[b].url);else pa(function(){openall(a,!0)},!0)};openAllSites=function(a){for(var b=0;b<a.length;b++)window.open(a[b].url)};
openfavorites=function(a,b){var c=[],d=!1,f;for(f in g_sites){var h=g_sites[f];check_ident_aid(f)&&"1"==h.fav&&(c.push(h),d=d||h.pwprotect)}if(0===c.length)alert(StringUtils.translate("You do not have any Favorites yet."));else if(a||!d&&!g_prompts.login_site_prompt){for(a=0;a<c.length;a++)window.open(c[a].url);c={};"undefined"!==typeof b&&(c={source:b});sendLpImprove("openfavorites",c)}else pa(function(){openfavorites(!0)},!0)};
createNewAcct=function(){return{aid:"",name:"",group:"",url:"",tld:"",extra:"",fav:"0",sharedfromuid:"",username:"",unencryptedUsername:"",password:"",pwprotect:0,genpw:0,sn:0,last_touch:lp_get_gmt_timestamp(),autologin:0,never_autofill:0,realm_data:"",fiid:"",custom_js:"",submit_id:"",captcha_id:"",urid:"0",basic_auth:"0",method:"",action:"",individualshare:!1,fields:[]}};
addEmptyGroup=function(a,b,c){var d=issharedfolder(g_shares,a);if(checkreadonly(d)){var f=!1===d?g_local_key:d.sharekey,h=a;if(d){if(!checkreadonly(d))return;h=a.substr(d.decsharename.length+1)}var k=createNewAcct();k.url="http://group";k.group=a;k.aid="0";a="ajax=1&extjs=1&name=&url="+encodeURIComponent(AES.url2hex(k.url))+"&grouping="+encodeURIComponent(lpenc(h,f))+"&username=&password=&extra=&aid=0&openid_url=&isbookmark=0";a+=!1===d?"":"&sharedfolderid="+en(d.id);a+=get_identity_param();a+="&token="+
g_token;$.ajax({type:"POST",url:base_url+"show_website.php",data:a,dataType:"text",success:function(a){a=$(jQuery.parseXML(a)).find("result");a.length&&(k.aid=a.attr("aid"),add_ident_aid(k.aid),b(k),g_sites[k.aid]=k)},failure:c})}};
checkmultiplefolders=function(a){for(var b=!1,c=null,d=!0,f=0;f<a.length;f++){var h=get_record(a[f]);if(h)if(h=issharedfolder(g_shares,h.group))if(b){d=!1;break}else if(null===c)c=h.decsharename;else{if(c!=h.decsharename){d=!1;break}}else if(null!==c){d=!1;break}else b=!0}d||alert(StringUtils.translate("Sorry, you cannot perform this operation on a mix of shared and non-shared folders, or multiple shared folders at once."));return d};
get_record=function(a){return"undefined"==typeof a?null:is_application(a)?g_applications[a.substring(3)]:"undefined"!==typeof g_sites&&"undefined"!==typeof g_sites[a]?g_sites[a]:"undefined"!==typeof g_securenotes&&"undefined"!==typeof g_securenotes[a]?g_securenotes[a]:null};
deleteAid=function(a,b,c,d,f){c=a.split(",");if(!checkmultiplefolders(c))return!1;d="";a=0;b={};for(var h=0;h<c.length;h++){var k=c[h];if(is_application(id)){if(!check_ident_appaid(k))continue}else if(!check_ident_aid(k))continue;var e=get_record(k);if(e){d+=(""===d?"":",")+k;if("undefined"!=typeof e.sharefolderid){a=e.sharefolderid;var l=issharedfolder(g_shares,e.group);if(!checkreadonly(l))return!1}is_application(e)&&"undefined"!=typeof g_applications[e.appaid]?delete g_applications[e.appaid]:"undefined"!=
typeof g_sites[k]?delete g_sites[k]:"undefined"!=typeof g_securenotes[k]&&delete g_securenotes[k];Policies.logNameEnabled()&&"http://sn"==e.url&&(b[k]=e.name)}}if(""===d)return!1;c="ajax=1&extjs=1&delete=1&aid="+en(d);Policies.logNameEnabled()&&"http://sn"==e.url&&(c+="&deletedobjects="+AES.url2hex(JSON.stringify(b)));c+=get_identity_param();0!==a&&(c+="&sharedfolderid="+en(a));c+="&token="+g_token;$.ajax({type:"POST",url:base_url+"show_website.php",data:c,dataType:"text"});f&&f();return!0};
get_identity_param=function(){return"&iid="+encodeURIComponent(g_identity)};deleteGroup=function(a,b,c){var d=[],f;for(f in g_sites)g_sites[i].group===a&&d.push(f);for(f in g_securenotes)g_securenotes[i].group===a&&d.push(f);for(f in g_applications)g_applications[i].group===a&&d.push(f);return deleteAid(d.join(","),b,!1,!0,c)};
deleteformfill=function(a,b,c,d,f,h,k){b=!1;for(c=0;c<g_formfills.length;c++)if(g_formfills[c].ffid==a){b=issharedfolder(g_shares,"undefined"!=typeof g_formfills[c].group?g_formfills[c].group:"");g_formfills.splice(c,1);break}a="deleteext=1&ffid="+encodeURIComponent(a);a+=!1===b?"":"&sharedfolderid="+encodeURIComponent(b.id);a+=get_identity_param();a+="&method="+encodeURIComponent(getBG().get_method());a+="&token="+g_token;a+="&src=website";k&&(a+="&source="+encodeURIComponent(k));$.ajax({type:"POST",
url:base_url+"formfill.php",data:a,dataType:"text",success:f,failure:h});return!0};
moveSelectedToGroup=function(a,b,c,d,f){c=c||{};c.successCallback=d;c.errorCallback=f;var h=void 0!==c.skipConfirm?c.skipConfirm:!1;b=b.split(",");d=issharedfolder(g_shares,a);var k=null;if(checkreadonly(d)){var e=!1;for(f=0;f<b.length;f++){k=get_record(b[f]);k=issharedfolder(g_shares,k.group);if(!checkreadonly(k)||!checkmove(d,k))return;!d&&!k||d&&k&&d.id===k.id||(e=!0)}if(e){e=[];for(f=0;f<b.length;f++)e[b[f]]=a;moveIntoSharedFolder(d,k,b,e,!1,!1,h,c)}else{h=[];k=[];if(a===StringUtils.translate("favorites"))for(f=
0;f<b.length;f++)(e=get_record(b[f]))&&"0"==e.fav&&(h[h.length]=b[f]);(0<b.length||0<h.length||0<k.length)&&changeGroupAndFavorites(b,h,k,a,d,c)}}};
changeGroupAndFavorites=function(a,b,c,d,f,h){for(var k=c="",e="",l=0;l<a.length;l++){var n=a[l],t=get_record(n);t&&d!=StringUtils.translate("favorites")&&(t.group=d,c+=e+n,e=",")}e="";for(l=0;l<b.length;l++)if(n=b[l],t=get_record(n))t.fav="1",k+=e+n,e=",";g_local_accts_version++;g_server_accts_version++;rewritelocalfile();h&&h.successCallback&&h.successCallback();a=!1===f?g_local_key:f.sharekey;b=d;f&&(b=d.substr(f.decsharename.length+1));d="aids="+encodeURIComponent(c)+"&newfavaids="+encodeURIComponent(k)+
"&oldfavaids="+encodeURIComponent("")+"&newgrp="+encodeURIComponent(lpenc(b,a))+"&xml=1";d+=0==f?"":"&sharedfolderid="+en(f.id);g_token&&(d+="&token="+g_token);$.ajax({type:"POST",url:base_url+"groups.php",data:d,dataType:"text"})};
renameGroup=function(a,b){if(a!=StringUtils.translate("favorites")){var c=issharedfolder(g_shares,a);if(0!=c&&c.decsharename==a)alertfrombg("You cannot rename a top level Shared folder");else{var d=issharedfolder(g_shares,b);if(checkmove(d,c)&&checkreadonly(d)&&checkreadonly(c)){var f=0==d?g_local_key:d.sharekey;d&&b.substr(d.decsharename.length+1);if(d||c){f=[];var h=[],k=[g_sites,g_securenotes,g_applications];d&&b.substr(d.decsharename.length+1);for(var e in k){var l=k[e],n;for(n in l)if(l.hasOwnProperty(n)){var t=
l[n];if(t.group==a||0==t.group.indexOf(a+"\\\\")){f[f.length]=get_record_id(t);var r=b;t.group!=a&&0<t.group.indexOf("\\\\")&&(r=b+t.group.substr(t.group.indexOf("\\\\")));h[get_record_id(t)]=r}}}moveIntoSharedFolder(d,c,f,h,!1,!1,!1)}else{k=[g_sites,g_securenotes,g_applications];c=[];h=[];r=[];for(e in k)for(n in l=k[e],l)if(l.hasOwnProperty(n))if(t=l[n],t.group==a)t.group=b,"undefined"==typeof c[a]?(r[r.length]=a,h[a]=get_record_id(t)):h[a]+=","+get_record_id(t),t=b,d&&(t=t.substr(d.decsharename.length+
1)),c[a]=t;else if(0==t.group.indexOf(a+"\\\\")){var p=t.group;t.group=t.group.replace(a+"\\\\",b+"\\\\");"undefined"==typeof c[p]?(r[r.length]=p,h[p]=get_record_id(t)):h[p]+=","+get_record_id(t);t=t.group;d&&(t=t.substr(d.decsharename.length+1));c[p]=t}g_local_accts_version++;rewritelocalfile();a="xml=1";for(b=0;b<r.length;b++)a+="&ids"+b+"="+encodeURIComponent(h[r[b]])+"&newgrp"+b+"="+encodeURIComponent(lpenc(c[r[b]],f));a+=0==d?"":"&sharedfolderid="+en(d.id);g_token&&(a+="&token="+g_token);$.ajax({type:"POST",
url:base_url+"groups.php",data:a,dataType:"text"})}}}}};get_record_id=function(a){return is_application(a)?"app"+a.appaid:a.aid};is_application=function(a){return"string"==typeof a?0===a.indexOf("app"):a&&"undefined"!=typeof a.appaid};
function moveIntoSharedFolder(a,b,c,d,f,h,k,e){f="undefined"!=typeof a&&a?a.sharekey:g_local_key;h="undefined"!=typeof b&&b?b.sharekey:g_local_key;k="undefined"!=typeof a&&a?a.id:g_uid;for(var l="cmd=uploadaccounts&username="+en(g_username),n="",t=[],r={},p=0;p<c.length;++p){if("object"===typeof c[p]){var y=!1;var q=c[p]}else q=getacct(c[p]),y=!0;var x=q.aid;if(null==q)return e.errorCallback(gs("Error: This folder has already been moved?")),!1;var A={};for(B in q)q.hasOwnProperty(B)&&(A[B]=q[B]);
var B=a?d[x].substr(a.decsharename.length+1):d[x];A.group=a?a.decsharename:"";""!=A.group&&""!=B&&(A.group+="\\");A.group+=B;y&&(A.extra=lpmenc(lpmdec(q.extra,!0,h),!0,f));if(is_application(q))var J="&appname"+p+"="+en(q.appname)+"&name"+p+"="+en(lpenc(q.name,f))+"&type"+p+"="+en("cr")+"&group"+p+"="+en(lpenc(B,f))+"&extra"+p+"="+en(crypto_btoa(A.extra))+"&script"+p+"="+en(q.script)+"&pwprotect"+p+"="+en(q.pwprotect?1:0)+"&wininfo"+p+"="+en(q.wininfo)+"&wintitle"+p+"="+en(q.wintitle)+"&exeversion"+
p+"="+en(q.exeversion)+"&exehash"+p+"="+en(q.exehash)+"&fiid"+p+"="+en(q.fiid);else y&&(A.username=lpmenc(lpmdec(q.username,!0,h),!0,f)),y&&(A.password=lpmenc(lpmdec(q.password,!0,h),!0,f)),y&&(A.realm_data=lpmenc(lpmdec(q.realm_data,!0,h),!0,f)),J="&url"+p+"="+en(AES.url2hex(q.url))+"&username"+p+"="+en(crypto_btoa(A.username))+"&password"+p+"="+en(crypto_btoa(A.password))+"&name"+p+"="+en(lpenc(q.name,f))+"&type"+p+"="+en("cr")+"&grouping"+p+"="+en(lpenc(B,f))+"&extra"+p+"="+en(crypto_btoa(A.extra))+
"&pwprotect"+p+"="+en(q.pwprotect?1:0)+"&realm"+p+"="+en(crypto_btoa(A.realm_data)),q.save_all&&(J+="&save_all"+p+"=1"),"undefined"!=typeof q.basic_auth&&"1"==q.basic_auth&&(J+="&basic_auth"+p+"=1"),"undefined"!=typeof q.notetype&&q.notetype&&q.notetype.length&&(J+="&notetype"+p+"="+en(q.notetype)),"undefined"!=typeof q.template&&q.template&&q.template.length&&(J+="&template"+p+"="+en(q.template));k!=g_uid?A.sharefolderid=k:"undefined"!=typeof A.sharefolderid&&delete A.sharefolderid;"undefined"!=
typeof q.attachkey&&""!=q.attachkey&&(y&&(A.attachkey=lpenc(lpdec(q.attachkey,h),f)),J+="&attachkey"+p+"="+en(A.attachkey));J+="&origaid"+p+"="+en(x);var L="";A.fields=[];for(B=0;B<q.fields.length;B++){A.fields[B]={};for(var F in q.fields[B])q.fields[B].hasOwnProperty(F)&&(A.fields[B][F]=q.fields[B][F]);var N=q.fields[B].value,H=q.fields[B].type;if(is_application(q)||"text"==H||"email"==H||"tel"==H||"password"==H||"textarea"==H||"hidden"==H)y&&(A.fields[B].value=lpmenc(lpmdec(N,!0,h),!0,f)),N=crypto_btoa(A.fields[B].value);
else if("checkbox"==H||"radio"==H)N+=q.fields[B].checked?"-1":"-0";L=is_application(q)?L+("&fields"+p+"id"+B+"="+en(q.fields[B].id)+"&fields"+p+"type"+B+"="+en(q.fields[B].type)+"&fields"+p+"value"+B+"="+en(N)):L+("&fields"+p+"name"+B+"="+en(q.fields[B].name)+"&fields"+p+"type"+B+"="+en(q.fields[B].type)+"&fields"+p+"value"+B+"="+en(N)+"&fields"+p+"formname"+B+"="+en("undefined"==typeof q.fields[B].formname?"":q.fields[B].formname))}r[x]=A;l+=J;l+=L;n+=en(x)+",";t[t.length]=x}l+="&sharedfolderid="+
en(k);l+="&todelete="+n;b&&(l+="&origsharedfolderid="+en(b.id));4===(g_loglogins&4)&&(l+="&reportname="+en(q.name));8===(g_loglogins&8)&&(l+="&reportusername="+en(q.unencryptedUsername));$.ajax({type:"POST",url:base_url+"lastpass/api.php",data:l,dataType:"xml",success:function(a){var b=a.documentElement.getElementsByTagName("result");if(0<b.length){a=!0;for(var d=0;d<c.length;++d){var f="object"===typeof c[d]?c[d]:getacct(c[d]),h=f.aid,k=r[h];k.attacharraychanges={add:[],remove:[]};if(f&&k)if(is_application(f)){lp_in_array(h,
t)&&delete g_applications[get_appaid(h)];k.appaid=b[0].getAttribute("aidmap"+h);if(!k.appaid){a=!1;break}k.appaid=get_appaid(k.appaid);g_applications[k.appaid]=k}else{lp_gettld_url(f.url);lp_in_array(h,t)&&("http://sn"==f.url?delete g_securenotes[h]:delete g_sites[h]);k.aid=b[0].getAttribute("aidmap"+h);if(!k.aid){a=!1;break}"http://sn"==k.url?g_securenotes[k.aid]=k:g_sites[k.aid]=k;for(var l in lp_attaches)if(lp_attaches.hasOwnProperty(l)&&lp_attaches[l].parent==h){f=lp_attaches[l];var n=[],p;for(p in f)f.hasOwnProperty(p)&&
(n[p]=f[p]);var q=f.id;n.id=b[0].getAttribute("attachidmap"+q);n.storagekey=b[0].getAttribute("storagekeymap"+q);if(!n.id||!n.storagekey){a=!1;break}k.attacharraychanges.add.push(n);k.attacharraychanges.remove.push(f.id);n.parent=k.aid;lp_in_array(h,t)?lp_attaches[l]=n:lp_attaches[lp_attaches.length]=n}if(!a)break}}a&&e&&e.successCallback&&e.successCallback(r)}else b=a.documentElement.getAttribute("rc"),b="SERVER_uploadfailed"==b?gs("Your Shared Folder action failed. Please check your permissions before trying again"):
"SERVER_sharedfolder_passwordsmustbehidden"==b?gs("Your do not have permission to view this account password so you cannot move it from the current Shared Folder."):gs("Your Shared Folder action failed."),e&&e.errorCallback&&e.errorCallback(b);get_accts()},error:function(){e&&e.errorCallback&&e.errorCallback(gs("An error occurred"))}});return!0}getBG=function(){return this};
saveSite=function(a,b,c,d){a+="&method="+encodeURIComponent(getBG().get_method());a+="&auto=1"+get_identity_param();a+="&token="+g_token;b.postdata=a;b.posturl=base_url+(is_application(b)?"addapp.php":"show_website.php");$.ajax({type:"POST",url:b.posturl,data:a,dataType:"text",success:function(a){a=$(jQuery.parseXML(a));var f=a.find("result");if(f.length){if(a=0==b.aid)b.aid=f.attr("aid"),add_ident_aid(b.aid);var k=f.attr("attacherror");k&&""!=k&&alert(k);for(var e=0,l=[];null!=f.attr("att_"+e);)l[f.attr("att_"+
e)]=[],l[f.attr("att_"+e)].storagekey=f.attr("attstorekey_"+e),l[f.attr("att_"+e)].size=f.attr("attsize_"+e),e++;f=f.attr("aid");if(!k&&b.attacharraychanges&&b.attacharraychanges.add){for(var n in b.attacharraychanges.add)b.attacharraychanges.add.hasOwnProperty(n)&&(k=b.attacharraychanges.add[n],a&&(k.id=f+"-"+k.id),l[k.id]&&(k.storagekey=l[k.id].storagekey,k.size=l[k.id].size));applyattacharraychanges(b.attacharraychanges)}b.sn?g_securenotes[b.aid]=b:g_sites[b.aid]=b;c(b)}else n=a.find("error"),
n.length&&d(n.attr("response"))},failure:d})};saveFields=function(a,b,c,d,f){b+="&method="+encodeURIComponent(getBG().get_method());b+="&token="+g_token;$.ajax({type:"POST",url:base_url+"fields.php?"+a,data:b,dataType:"text",success:d,failure:f})};
changePassword=function(a,b,c,d,f){for(var h=[],k=0,e=0;e<b.length;e++)if(g_sites[b[e]]){var l=lpmdec_acct(g_sites[b[e]].password,!0,g_sites[b[e]],g_shares);if(l!=a&&(h[h.length]=b[e],g_sites[b[e]].password=lpmenc_acct(a,!0,g_sites[b[e]],g_shares),g_sites[b[e]].fields))for(var n=0;n<g_sites[b[e]].fields.length;n++)"password"==g_sites[b[e]].fields[n].type&&lpmdec_acct(g_sites[b[e]].fields[n].value,!0,g_sites[b[e]],g_shares)==l&&(g_sites[b[e]].fields[n].value=g_sites[b[e]].password);"undefined"!=typeof g_sites[b[e]].sharefolderid&&
(k=g_sites[b[e]].sharefolderid)}b=h;if(0!==b.length){h="xml=1";l=[];for(e=0;e<b.length;e++){n=0<e?e:"";h+="&username"+n+"=dummy";h+="&password"+n+"="+encodeURIComponent(lpenc_acct(a,g_sites[b[e]],g_shares));h+="&id"+n+"="+encodeURIComponent(b[e]);try{lp_in_array(g_sites[b[e]].tld,l)||(l[l.length]=g_sites[b[e]].tld)}catch(t){}}try{for(e in g_sites)if(g_sites[e].genpw&&lp_in_array(g_sites[e].tld,l)&&lpmdec_acct(g_sites[e].password,!0,g_sites[e],g_shares)==a){h+="&delgenpwaid="+encodeURIComponent(e);
break}}catch(t){}0!=k&&(h+="&sharedfolderid="+en(k));"undefined"!=typeof c&&c&&(h+="&autochange=1");a={aid:0};a.postdata=h;a.url=base_url+"change_pw.php";a.handler=d;a.param={aid:a.aid,postdata:a.postdata,url:a.url,handler:a.handler};a.successCallback=d;$.ajax({type:"POST",url:a.url,data:a.postdata,dataType:"text",success:function(a){a=$(jQuery.parseXML(a)).find("ok");if(a.length)for(var b="";a.attr("id"+b);){var c=g_sites[a.attr("id"+b)],e=crypto_atob(a.attr("newpassword"+b)),f=crypto_atob(a.attr("oldpassword"+
b));c.password=e;if(c.fields)for(var h=0;h<c.fields.length;++h){var k=c.fields[h];"password"!=k.type||k.value!=f&&lpmdec_acct(k.value,!0,c,g_shares)!=lpmdec_acct(f,!0,c,g_shares)||(k.value=e)}b=""===b?1:++b}d()},failure:f})}};
addeditformfill=function(a,b,c,d){var f="&method="+encodeURIComponent(getBG().get_method());for(var h in a)f+=(""==f?"":"&")+h+"="+en(a[h]);a=!1;"undefined"!=typeof b.group&&""!=b.group&&(a=issharedfolder(g_shares,b.group));f+=0==a?"":"&sharedfolderid="+en(a.id);f+=get_identity_param();f+="&token="+g_token;$.ajax({type:"POST",url:base_url+"formfill.php",data:f+"&src=website",dataType:"text",success:function(a){var d=$(jQuery.parseXML(a)).find("result");if(d.length){d.attr("msg");a=d.attr("ffid");
add_ident_ffid(a);var f=d.attr("cfids");d.attr("accts_version");d=[];var h=""==f?[]:f.split(","),k=0;for(f=1;"undefined"!=typeof b["customfield"+f+"cfid"];++f){var r={};r.cfid=0!=b["customfield"+f+"cfid"]?b["customfield"+f+"cfid"]:k<h.length?h[k++]:0;r.text=b["customfield"+f+"text"];r.value=b["customfield"+f+"value"];r.alttext=b["customfield"+f+"alttext"];""==r.text&&""==r.value&&""==r.alttext||d.push(r)}h=b.cmd;delete b.cmd;delete b.deleteext;for(f=1;"undefined"!=typeof b["customfield"+f+"cfid"];++f)delete b["customfield"+
f+"cfid"],delete b["customfield"+f+"text"],delete b["customfield"+f+"value"],delete b["customfield"+f+"alttext"];b.custom_fields=d;if("add"==h)b.ffid=a,g_formfills.push(b);else for(f=0;f<g_formfills.length;++f)if(a==g_formfills[f].ffid){g_formfills[f]=b;break}c&&c(b)}},failure:d});return!0};add_ident_aid=function(a){if(g_identity){for(var b=null,c=0;c<g_identities.length;c++)if(g_identities[c].iid===g_identity){b=g_identities[c];break}b&&(b.aids&&(b.aids+=","),b.aids+=a,b.aidarr=b.aids.split(","))}};
add_ident_ffid=function(a){if(g_identity){for(var b=null,c=0;c<g_identities.length;c++)if(g_identities[c].iid==g_identity){b=g_identities[c];break}b&&(b.ffids&&(b.ffids+=","),b.ffids+=a,b.ffidarr=b.ffids.split(","))}};db_prepend=function(a){return a};localStorage_setItem=function(a,b){try{return localStorage.setItem(a,b),!0}catch(c){return!1}};localStorage_getItem=function(a){try{return localStorage.getItem(a)}catch(b){return null}};openURL=function(a){window.open(a)};canLaunchApplication=function(){return!1};
singlefactor_reprompt=function(a,b,c){FederatedLogin.isFederated(g_username,function(d){d?FederatedLogin.getPassword(g_username,function(a){g_local_key===make_lp_key_iterations(g_username,a,get_key_iterations(g_username))?b():c()},c):a()},c)};isOffline=function(){return!1};get_method=function(){return"web"};
lpReportError=function(){errorCount=0;return function(a){!0===g_prompts.improve&&(++errorCount,100<errorCount||$.ajax({url:base_url+"error.php",type:"POST",data:{msg:"error: website("+lpversion+") errors("+errorCount+"): "+a}}))}}();
loglogin=function(a){if(g_loglogins){var b=get_record(a);if(b){var c=issharedfolder(g_shares,b.group);c&&c.id===get_personal_linked()||(a={id:a,method:get_method()},c&&(a.sharedfolderid=c.id),b&&(Policies.logUrlEnabled()&&"http://sn"!==b.url&&(a.u=AES.url2hex(b.url)),Policies.logNameEnabled()&&(a.n=AES.url2hex(b.name)),Policies.logUserNameEnabled()&&b.unencryptedUsername&&(a.un=AES.url2hex(b.unencryptedUsername))),$.ajax({url:base_url+"loglogin.php",type:"POST",data:a}))}}};
function refreshGroupNames(){}sendLpImprove=function(a,b){"object"===typeof LastpassApiHelper&&"function"===typeof LastpassApiHelper.sendLpImprove&&LastpassApiHelper.sendLpImprove(a,g_lpImprove,b)};sendTimingEvent=function(a,b,c,d){"object"===typeof LastpassApiHelper&&"function"===typeof LastpassApiHelper.sendTimingEvent&&LastpassApiHelper.sendTimingEvent(a,b,c,d,g_lpImprove)};var RecordTypeConfig={TYPE:{Password:"Account",SecureNote:"Generic",Address:"Address",CreditCard:"Credit Card",BankAccount:"Bank Account",DriversLicense:"Driver's License",Passport:"Passport",SocialSecurity:"Social Security",Insurance:"Insurance",HealthInsurance:"Health Insurance",Membership:"Membership",Wifi:"Wi-Fi Password",EmailAccount:"Email Account",InstantMessenger:"Instant Messenger",Database:"Database",Server:"Server",SSHKey:"SSH Key",SoftwareLicense:"Software License",Custom:"Custom"},types:[{id:"Password",
name:"Password",recordType:"",isPrimaryItem:!0},{id:"SecureNote",name:"Secure note",recordType:"",isPrimaryItem:!0},{id:"Address",name:"Address",recordType:"",isPrimaryItem:!0},{id:"CreditCard",name:"Payment card",recordType:"",isPrimaryItem:!0},{id:"BankAccount",name:"Bank account",recordType:"",isPrimaryItem:!0},{id:"DriversLicense",name:"Driver's license",recordType:"",isPrimaryItem:!1},{id:"Passport",name:"Passport",recordType:"",isPrimaryItem:!1},{id:"SocialSecurity",name:"Social security number",
recordType:"",isPrimaryItem:!1},{id:"Insurance",name:"Insurance policy",recordType:"",isPrimaryItem:!1},{id:"HealthInsurance",name:"Health insurance",recordType:"",isPrimaryItem:!1},{id:"Membership",name:"Membership",recordType:"",isPrimaryItem:!1},{id:"Wifi",name:"Wi-fi password",recordType:"",isPrimaryItem:!1},{id:"EmailAccount",name:"Email account",recordType:"",isPrimaryItem:!1},{id:"InstantMessenger",name:"Instant messenger",recordType:"",isPrimaryItem:!1},{id:"Database",name:"Database",recordType:"",
isPrimaryItem:!1},{id:"Server",name:"Server",recordType:"",isPrimaryItem:!1},{id:"SSHKey",name:"SSH key",recordType:"",isPrimaryItem:!1},{id:"SoftwareLicense",name:"Software license",recordType:"",isPrimaryItem:!1},{id:"Custom",name:"Custom item",recordType:"",composite:!0}],views:[{id:"all",name:"All Items","default":!0,types:null},{id:"passwords",name:"Passwords","default":!0,types:["Password"]},{id:"notes",name:"Notes","default":!0,types:["SecureNote"]},{id:"addresses",name:"Addresses","default":!0,
types:["Address"]},{id:"payment-cards",name:"Payment Cards","default":!0,types:["CreditCard"]},{id:"bank-accounts",name:"Bank Accounts","default":!0,types:["BankAccount"]},{id:"drivers-license",name:"Driver's Licenses","default":!1,types:["DriversLicense"]},{id:"passports",name:"Passports","default":!1,types:["Passport"]},{id:"ssn",name:"Social Security Numbers","default":!1,types:["SocialSecurity"]},{id:"insurance",name:"Insurance Policies","default":!1,types:["Insurance"]},{id:"health-insurance",
name:"Health Insurance Policies","default":!1,types:["HealthInsurance"]},{id:"memberships",name:"Memberships","default":!1,types:["Membership"]},{id:"wifi",name:"Wi-Fi Passwords","default":!1,types:["Wifi"]},{id:"emails",name:"Email Accounts","default":!1,types:["EmailAccount"]},{id:"ims",name:"Instant Messenger Accounts","default":!1,types:["InstantMessenger"]},{id:"databases",name:"Databases","default":!1,types:["Database"]},{id:"servers",name:"Servers","default":!1,types:["Server"]},{id:"ssh",
name:"SSH Keys","default":!1,types:["SSHKey"]},{id:"software-keys",name:"Software Licenses","default":!1,types:["SoftwareLicense"]},{id:"custom-items",name:"Custom Items","default":!1,types:["Custom"]}],viewConfig:[["all"],["passwords","notes","addresses"],["payment-cards","bank-accounts"],["drivers-license","passports","ssn"],["insurance","health-insurance","memberships","wifi"],["emails","ims"],["databases","servers","ssh","software-keys","custom-items"]],icons:{all:"fa fa-home",CreditCard:"fa fa-credit-card-alt",
Password:"fa fa-lock",SecureNote:"fa fa-sticky-note",Address:"fa fa-address-book",BankAccount:"fa fa-bank",Database:"fa fa-database",DriversLicense:"fa fa-car",Folder:"fa fa-folder",Insurance:"fa fa-umbrella",HealthInsurance:"fa fa-heartbeat",Membership:"fa fa-barcode",Passport:"fa fa-globe",Server:"fa fa-server",SocialSecurity:"fa fa-balance-scale",SoftwareLicense:"fa fa-laptop",SSHKey:"fa fa-user-secret",Wifi:"fa fa-wifi",InstantMessenger:"fa fa-comments-o",EmailAccount:"fa fa-envelope",Custom:"fa fa-puzzle-piece"}},
i;for(i in RecordTypeConfig.types)if(RecordTypeConfig.types.hasOwnProperty(i)){var recordType=RecordTypeConfig.types[i];recordType.recordType=RecordTypeConfig.TYPE[recordType.id]};var ExtensionPreferences={getConst:function(a,b){b(window[a])},getDefault:function(a,b){b(Preferences.getDefault(a))},read:function(a,b){b(Preferences.get(a))},write:function(a,b,c){Preferences.set(a,b)},getUnavailablePreferences:function(a){a(LPPlatform.getUnavailablePreferences())}};LPServer.vault=LPServer.vault||{};
LPServer.vault.history=function(){var a=function(a,b){for(var c=[],d=0;d<a.length;d++){var f=a[d];c[d]={value:f[0],date:f[1],whom:2<f.length?f[2]:""}}b.success(c)},b=function(b){return function(c){if(!c||!c.params||!c.params.aid)throw Error("Missing parameter values.");var d={aid:c.params.aid};c.params.shareId&&(d.sharedfolderid=c.params.shareId);LPServer.jsonRequest({url:b,data:d,success:a,userSupplied:c})}},c=b("getPasswordHist.php"),d=b("getUsernameHist.php");b=b("getNoteHist.php");return{revertPasswordChange:function(a){if(!(a&&
a.params&&a.params.key&&a.params.aid))throw Error("Missing parameter values.");c({params:{aid:a.params.aid,shareId:a.params.shareId},success:function(b){0<b.length&&(b=dec(b[b.length-1].value,a.params.key),changePassword(b,[a.params.aid],!1,a.success,a.error))},error:a.error})},getPasswordHistory:c,getUsernameHistory:d,getNoteHistory:b}}();var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Migration=function(){return function(){}}(),Migrator=function(){function a(b){this.migrations=[];this.progress=0;this.hasLinkedAccount=!!a.migrationBackground.getLinkedUsername();
this.migrations=b.sort(function(a,b){if(a.version<b.version)return-1;if(a.version>b.version)return 1;throw Error("Duplicate migrations!");})}a.executeMigrations=function(b){var c=this,d=[];if(!a.migrationsRunning)if("loading"==document.readyState)document.addEventListener("DOMContentLoaded",function(){a.executeMigrations()});else{a.formfillMigrationBackground.isEnabled()&&d.push(new FormfillAndNotesMigration);var f=new a(d);this.migrationBackground.getLinkedBlobVersion(function(d){var h=c.migrationBackground.getBlobVersion();
null!==h&&(f.hasPendingMigrations(h)||null!==d&&f.hasPendingMigrations(d))&&(a.setMigrationInProgress(),b&&f.setProgressCallback(b),null!==d&&f.hasPendingMigrations(d)?f.migrateLinked(d,function(){f.hasPendingMigrations(h)?f.migrate(h,function(){a.setMigrationFinished()}):a.setMigrationFinished()}):f.migrate(h,function(){a.setMigrationFinished()}))})}};Object.defineProperty(a,"migrationBackground",{get:function(){return a.getBg().MigrationBackground},enumerable:!0,configurable:!0});a.getBg=function(){return"undefined"!==
typeof bg?bg:getBG()};a.setMigrationInProgress=function(){a.migrationsRunning=!0;this.migrationBackground.publishState(!0)};a.setMigrationFinished=function(){a.migrationsRunning=!1;this.migrationBackground.publishState(!1)};Object.defineProperty(a,"formfillMigrationBackground",{get:function(){return a.getBg().FormfillMigrationBackground},enumerable:!0,configurable:!0});a.prototype.setProgressCallback=function(a){this.progressCallback=a};a.prototype.hasPendingMigrations=function(a){for(var b=0,d=this.migrations;b<
d.length;b++)if(a<d[b].version)return!0;return!1};a.prototype.migrateLinked=function(b,c){var d=this;if(this.hasLinkedAccount){this.updateProgress();for(var f=function(a){if(b<a.version)return a.migrateLinked(function(){d.progress+=100;d.migrateLinked(a.version,c)},function(a,b){d.updateProgress(Math.floor(a/Math.max(b,1)*100))}),{value:void 0}},h=0,k=this.migrations;h<k.length;h++){var e=f(k[h]);if("object"===typeof e)return e.value}a.migrationBackground.saveLinkedBlobVersion(b,function(){c&&c(b)})}else c(b)};
a.prototype.migrate=function(b,c){var d=this;this.updateProgress();for(var f=function(a){if(b<a.version)return a.migrate(function(){d.progress+=100;d.migrate(a.version,c)},function(a,b){d.updateProgress(Math.floor(a/Math.max(b,1)*100))}),{value:void 0}},h=0,k=this.migrations;h<k.length;h++){var e=f(k[h]);if("object"===typeof e)return e.value}a.migrationBackground.saveBlobVersion(b,function(){c&&c(b)})};a.prototype.updateProgress=function(a){void 0===a&&(a=0);this.progressCallback&&this.progressCallback(this.progress+
Math.min(a,100),100*this.migrations.length*(this.hasLinkedAccount?2:1))};a.migrationsRunning=!1;return a}(),ObservableState=function(){function a(){this.stateSubscribers=[];this.temporarySubscribers=[];this._wasMigration=this.isRunning=!1}a.prototype.subscribeToState=function(a){a&&-1===this.stateSubscribers.indexOf(a)&&(this.stateSubscribers.push(a),this.isRunning&&a(this.isRunning))};a.prototype.subscribeToStateOnce=function(a){a&&-1===this.stateSubscribers.indexOf(a)&&this.temporarySubscribers.push(a)};
a.prototype.wasMigration=function(a){a(this._wasMigration)};a.prototype.publishState=function(a){this.isRunning&&!a&&(this._wasMigration=!0);this.isRunning=a;for(var b=0,d=this.stateSubscribers;b<d.length;b++)(0,d[b])(a);b=this.temporarySubscribers;this.temporarySubscribers=[];for(d=0;d<b.length;d++)(0,b[d])(a)};return a}(),MigrationBackgroundWeb=function(a){function b(){var b=a.call(this)||this;b.apiUrl="/lmiapi";"string"===typeof base_url&&(b.apiUrl=base_url.replace(/\/$/,"")+b.apiUrl);return b}
__extends(b,a);b.prototype.getBlobVersion=function(){return"undefined"!==typeof g_blob_version&&"undefined"!==typeof g_blob_version.version?Number(g_blob_version.version):null};b.prototype.getLinkedUsername=function(){for(var a=0,b=g_shares;a<b.length;a++){var f=b[a];if("undefined"!=typeof f.associative&&1==f.associative)return f.decsharename}return null};b.prototype.getLinkedBlobVersion=function(a){this.getLinkedUsername()?$.get(this.apiUrl+"/users/me/blobversion/linked",function(b){a(b.version)}):
a(null)};b.prototype.saveBlobVersion=function(a,b){this.saveVersionRequest(this.apiUrl+"/users/me/blobversion",a,b)};b.prototype.saveLinkedBlobVersion=function(a,b){this.saveVersionRequest(this.apiUrl+"/users/me/blobversion/linked",a,b)};b.prototype.sendSegmentEvent=function(a,b){sendLpImprove(a,b)};b.prototype.saveVersionRequest=function(a,b,f){this.getToken(function(c){$.ajax({url:a,method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({version:b}),headers:{"x-csrf-token":c},
success:function(){g_blob_version.version=b;f()}})})};b.prototype.getToken=function(a){$.post(this.apiUrl+"/csrf",function(b){a(b)})};return b}(ObservableState),MigrationBackgroundExtension=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);Object.defineProperty(b.prototype,"apiUrl",{get:function(){var a="/lmiapi";"string"===typeof base_url&&(a=base_url.replace(/\/$/,"")+a);return a},enumerable:!0,configurable:!0});b.prototype.getBlobVersion=function(){return"undefined"!==
typeof g_blob_version&&"undefined"!==typeof g_blob_version.version?Number(g_blob_version.version):null};b.prototype.getLinkedUsername=function(){for(var a=0,b=g_shares;a<b.length;a++){var f=b[a];if("undefined"!=typeof f.associative&&1==f.associative)return f.decsharename}return null};b.prototype.getLinkedBlobVersion=function(a){this.getLinkedUsername()?LP.lpMakeRequestReallyReal(this.apiUrl+"/users/me/blobversion/linked","",function(b){4===b.readyState&&200===b.status?(b=JSON.parse(b.responseText),
a(b.version)):4===b.readyState&&lpmakerequesterror("invalidresponse",{url:b.responseURL},!1)},void 0,{method:"GET"}):a(null)};b.prototype.saveBlobVersion=function(a,b){this.saveVersionRequest(this.apiUrl+"/users/me/blobversion",a,b)};b.prototype.saveLinkedBlobVersion=function(a,b){this.saveVersionRequest(this.apiUrl+"/users/me/blobversion/linked",a,b)};b.prototype.sendSegmentEvent=function(a,b){sendLpImprove(a,b)};b.prototype.saveVersionRequest=function(a,b,f){this.getToken(function(c){LP.lpMakeRequestReallyReal(a,
JSON.stringify({version:b}),function(a){4===a.readyState&&200===a.status?(g_blob_version.version=b,f()):4===a.readyState&&lpmakerequesterror("invalidresponse",{url:a.responseURL},!1)},void 0,{"x-csrf-token":c,"Content-Type":"application/json"})})};b.prototype.getToken=function(a){LP.lpMakeRequestReallyReal(this.apiUrl+"/csrf","",function(b){4===b.readyState&&200===b.status?a(JSON.parse(b.responseText)):4===b.readyState&&lpmakerequesterror("invalidresponse",{url:b.responseURL},!1)})};return b}(ObservableState),
FormfillStore=function(){function a(){}a.prototype.getLinkedFormfills=function(){this.useShareKey=!0;return this.decrypt(this.linkedEncryptedFormfills)};a.prototype.getFormfills=function(){this.useShareKey=!1;return this.decrypt(this.encryptedFormfills)};a.prototype.decrypt=function(a){for(var b=[],d=0;d<a.length;d++){var f=a[d],h=new FormFillType,k;for(k in f)if(f.hasOwnProperty(k)){var e=void 0;h[k]=f[k];if("custom_fields"===k){h[k]=[];for(var l in f[k]){h[k][l]=this.objectAssign({},f[k][l]);var n=
h[k][l],t;for(t in n)n[t]&&(e=this.decryptString(n[t],!0))&&(n[t]=e)}}else h[k]&&(e=this.decryptString(h[k],!0))&&(h[k]=e)}h.decprofilename||(h.decprofilename=h.profilename);b.push(h)}return b};a.prototype.objectAssign=function(a,c){for(var b=1;b<arguments.length;b++){var f=arguments[b];if(null!=f)for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(a[h]=f[h])}return a};return a}(),FormFillType=function(){function a(){this.monthNames=" January February March April May June July August September October November December".split(" ")}
a.prototype.hasSocialSecurityNumber=function(){return!!this.ssn};a.prototype.hasAddressData=function(){return!!(this.title||this.firstname||this.middlename||this.lastname||this.username||this.gender||this.birthday||this.company||this.address1||this.address2||this.address3||this.city||this.county||this.timezone||this.email||this.phone||this.mobilephone||this.evephone||this.fax||this.faxphone||this.eve3lcc||this.mobile3lcc||!this.hasSocialSecurityNumber()&&!this.hasPaymentCardData()&&!this.hasBankNoteData()&&
this.notes)};a.prototype.hasPaymentCardData=function(){return!!(this.ccname||this.ccnum||this.ccstart||this.ccexp||this.cccsc||this.ccissuenum)};a.prototype.hasBankNoteData=function(){return!!(this.bankname||this.bankroutingnum||this.bankacctnum)};a.prototype.hasCustomFields=function(){return!!this.custom_fields.length};a.prototype.getSerializedPhone=function(){return this.phone?JSON.stringify({num:this.phone,ext:this.phoneext,cc3l:this.phone3lcc}):""};a.prototype.getSerializedEveningPhone=function(){return this.evephone?
JSON.stringify({num:this.evephone,ext:this.eveext,cc3l:this.evephone3lcc||this.eve3lcc}):""};a.prototype.getSerializedMobilePhone=function(){return this.mobilephone?JSON.stringify({num:this.mobilephone,ext:this.mobileext,cc3l:this.mobilephone3lcc||this.mobile3lcc}):""};a.prototype.getSerializedFax=function(){return this.fax||this.faxphone?JSON.stringify({num:this.fax||this.faxphone,ext:this.faxext,cc3l:this.fax3lcc}):""};a.prototype.getBirthdayLastpassFormat=function(){var a=/([^-]*)-([^-]*)-([^-]*)/g.exec(this.birthday);
return a&&3<=a.length?this.monthNames[Number(a[2])]+","+a[3]+","+a[1]:",,"};a.prototype.getCreditCardStartLastpassFormat=function(){var a=/([^-]*)-([^-]*)/g.exec(this.ccstart);return a&&2<=a.length?this.monthNames[Number(a[2])]+","+a[1]:","};a.prototype.getCreditCardExpireLastpassFormat=function(){var a=/([^-]*)-([^-]*)/g.exec(this.ccexp);return a&&2<=a.length?this.monthNames[Number(a[2])]+","+a[1]:","};return a}(),NoteType=function(){return function(){}}(),FormfillAndNotesMigration=function(a){function b(){var b=
null!==a&&a.apply(this,arguments)||this;b.fieldMaxLength=50;b.migrationQueue=[];b.successCallback=function(){};b.progress=-1;b.startSegmentEventSent=!1;b.noteAdditionHandler=function(){b.executeNextMigration()};return b}__extends(b,a);Object.defineProperty(b.prototype,"version",{get:function(){return 20170404140712},enumerable:!0,configurable:!0});b.prototype.migrateLinked=function(a,b){this.successCallback=a;this.progressCallback=b;this.sendStartSegmentEventOnce();a=this.formfillMigrationBackground.getLinkedFormfills();
this.migrateFormfills(a);this.attachMigrationQueueExecutor()};b.prototype.migrate=function(a,b){this.successCallback=a;this.progressCallback=b;this.sendStartSegmentEventOnce();a=this.formfillMigrationBackground.getFormfills();this.migrateFormfills(a);this.attachMigrationQueueExecutor()};b.prototype.sendStartSegmentEventOnce=function(){this.startSegmentEventSent||(this.migrationBackground.sendSegmentEvent("migration::formfill::started"),this.startSegmentEventSent=!0)};b.prototype.migrateFormfills=
function(a){for(var b=this,c=function(a){a.hasSocialSecurityNumber()&&h.migrationQueue.push(function(){b.saveSocialSecurityNumberNote(a)});a.hasAddressData()&&h.migrationQueue.push(function(){b.saveAddressNote(a)});a.hasPaymentCardData()&&h.migrationQueue.push(function(){b.savePaymentCardNote(a)});a.hasBankNoteData()&&h.migrationQueue.push(function(){b.saveBankAccountNote(a)});a.hasCustomFields()&&h.migrationQueue.push(function(){b.saveCustomFields(a)})},h=this,k=0;k<a.length;k++)c(a[k])};b.prototype.saveSocialSecurityNumberNote=
function(a){a={group:a.group,name:a.decprofilename,notetype:this.getNoteTypes().SSN,pwprotect:a.pwprotect,fav:"0",language:a.profilelanguage,extra:{Name:a.firstname+" "+a.middlename+" "+a.lastname,Number:a.ssn,Notes:a.notes?""+a.notes:""}};this.saveNote(a)};b.prototype.saveAddressNote=function(a){a={group:a.group,name:a.decprofilename,notetype:this.getNoteTypes().ADDRESS,pwprotect:a.pwprotect,fav:"0",language:a.profilelanguage,extra:{Title:a.title,"First Name":a.firstname,"Middle Name":a.middlename,
"Last Name":a.lastname,Username:a.username,Gender:a.gender,Birthday:a.getBirthdayLastpassFormat(),Company:a.company,"Address 1":a.address1,"Address 2":a.address2,"Address 3":a.address3,"City / Town":a.city,County:a.county,State:a.state,"Zip / Postal Code":a.zip,Country:a.country,Timezone:a.timezone,"Email Address":a.email,Phone:a.getSerializedPhone(),"Evening Phone":a.getSerializedEveningPhone(),"Mobile Phone":a.getSerializedMobilePhone(),Fax:a.getSerializedFax(),Notes:a.notes?a.notes:""}};this.saveNote(a)};
b.prototype.savePaymentCardNote=function(a){a={group:a.group,name:a.decprofilename,notetype:this.getNoteTypes().CREDIT,pwprotect:a.pwprotect,fav:"0",language:a.profilelanguage,extra:{"Name on Card":a.ccname,Type:"",Number:a.ccnum,"Security Code":a.cccsc,"Start Date":a.getCreditCardStartLastpassFormat(),"Expiration Date":a.getCreditCardExpireLastpassFormat(),Notes:(a.notes?a.notes+"\n":"")+(a.ccissuenum?"Issue number: "+a.ccissuenum:"")}};this.saveNote(a)};b.prototype.saveBankAccountNote=function(a){a=
{group:a.group,name:a.decprofilename,notetype:this.getNoteTypes().BANK,pwprotect:a.pwprotect,fav:"0",language:a.profilelanguage,extra:{"Bank Name":a.bankname,"Account Type":"","Routing Number":a.bankroutingnum,"Account Number":a.bankacctnum,"SWIFT Code":"","IBAN Number":"",Pin:"","Branch Address":"","Branch Phone":"",Notes:a.notes}};this.saveNote(a)};b.prototype.saveCustomFields=function(a){for(var b=this,c=this.escape("Formfill "+a.decprofilename),h=[],k=[],e="",l={},n=0,t=a.custom_fields;n<t.length;n++){var r=
t[n],p=this.escape(r.text);p.length>this.fieldMaxLength&&(p=p.substring(0,this.fieldMaxLength));p||(p="empty");-1!==r.text.indexOf("\n")||-1!==r.value.indexOf("\n")?e+=r.text+":"+r.value+"\n":-1===k.indexOf(p)&&(h.push({text:p,type:"text",options:null}),l[p]=r.value,k.push(p))}""!==e&&(h.push({text:"Notes",type:"textarea",options:null}),l.Notes=e);this.formfillMigrationBackground.createCustomNoteType(c,h,function(d){d={group:a.group,name:a.decprofilename,notetype:"Custom_"+d,pwprotect:a.pwprotect,
fav:"0",language:a.profilelanguage,extra:l,template:JSON.stringify({id:d,title:c,fields:h})};b.saveNote(d)})};b.prototype.escape=function(a){return a.replace(/&/g,"").replace(/</g,"").replace(/>/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/;/g,"").replace(/:/g,"").replace(/~/g,"").replace(/`/g,"").replace(/"/g,"").replace(/'/g,"")};b.prototype.saveNote=function(a){"undefined"!==typeof Note?this.saveInForeground(a):this.saveInBackground(a)};b.prototype.saveInForeground=function(a){var b=a.group;
b||(b=Strings.Consts.NONE_GROUP);var c=LPProxy.getGroupByName(b);!c&&b&&(c=LPProxy.getExistingGroupParent(b),c=new DummyGroup(b,c?c.getSharedGroup():null));b=new Note;b.add=this.getNotePatchedAddFunction();b.addFromDialog(a,c,{source:"vault"})};b.prototype.saveInBackground=function(a){var b=this;this.formfillMigrationBackground.saveNote(a,function(){b.noteAdditionHandler()})};b.prototype.getNotePatchedAddFunction=function(){return function(a,b){(function(c,d){LPRequest.makeUpdateRequest(LPProxy.addNote,
{parameters:[c,a,b],success:function(b){c.update(b,a,d);LPProxy.addItem(c);Topics.get(Topics.NOTE_ADDED).publish(c,a)}})})(this,this._data.attacharraychanges)}};b.prototype.getNoteTypes=function(){return{ADDRESS:"Address",BANK:"Bank Account",CREDIT:"Credit Card",GENERIC:"Generic",SSN:"Social Security"}};b.prototype.attachMigrationQueueExecutor=function(){Topics.get(Topics.NOTE_ADDED).subscribe(this.noteAdditionHandler);this.progressMax=this.migrationQueue.length;this.executeNextMigration()};b.prototype.executeNextMigration=
function(){this.progress+=1;this.progressCallback&&this.progressCallback(this.progress,this.progressMax);this.migrationQueue.length?this.migrationQueue.pop()():(Topics.get(Topics.NOTE_ADDED).unsubscribe(this.noteAdditionHandler),Topics.get(Topics.REFRESH_DATA).publish(),this.migrationBackground.sendSegmentEvent("migration::formfill::completed"),this.successCallback())};b.prototype.getBg=function(){return"undefined"!==typeof bg?bg:getBG()};Object.defineProperty(b.prototype,"formfillMigrationBackground",
{get:function(){return this.getBg().FormfillMigrationBackground},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"migrationBackground",{get:function(){return this.getBg().MigrationBackground},enumerable:!0,configurable:!0});return b}(Migration),FormfillMigrationBackgroundWeb=function(a){function b(){var b=a.call(this)||this;b.apiUrl="/lmiapi";"string"===typeof base_url&&(b.apiUrl=base_url.replace(/\/$/,"")+b.apiUrl);return b}__extends(b,a);b.prototype.isEnabled=function(){return LPContentScriptFeatures.formfill_migration};
b.prototype.createCustomNoteType=function(a,b,f){var c=this;this.getToken(function(d){$.ajax({url:c.apiUrl+"/note-templates",type:"POST",dataType:"json",contentType:"application/json",headers:{"X-CSRF-TOKEN":d},data:JSON.stringify({title:a,method:"web",fields:b}),success:function(a){f(a.id)}})})};b.prototype.saveNote=function(a,b){throw Error("Migrate in the foreground!");};Object.defineProperty(b.prototype,"linkedEncryptedFormfills",{get:function(){return g_formfills.filter(function(a){return!!a.sharefolderid})},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"encryptedFormfills",{get:function(){return g_formfills.filter(function(a){return!a.sharefolderid})},enumerable:!0,configurable:!0});b.prototype.decryptString=function(a,b){var c=void 0;this.useShareKey&&(c=this.getShareKey());return lpmdec(a,b,c)};b.prototype.getToken=function(a){$.post(this.apiUrl+"/csrf",function(b){a(b)})};b.prototype.getShareKey=function(){for(var a=0,b=g_shares;a<b.length;a++){var f=b[a];if("undefined"!==typeof f.associative&&
1==f.associative)return f.key}};return b}(FormfillStore),FormfillMigrationBackgroundExtension=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);Object.defineProperty(b.prototype,"apiUrl",{get:function(){var a="/lmiapi";"string"===typeof base_url&&(a=base_url.replace(/\/$/,"")+a);return a},enumerable:!0,configurable:!0});b.prototype.isEnabled=function(){return LPContentScriptFeatures.formfill_migration};b.prototype.createCustomNoteType=function(a,b,f){var c=this;
this.getToken(function(d){LP.lpMakeRequestReallyReal(c.apiUrl+"/note-templates",JSON.stringify({title:a,method:"web",fields:b}),function(a){4===a.readyState&&200===a.status?f(JSON.parse(a.responseText).id):4===a.readyState&&lpmakerequesterror("invalidresponse",{url:a.responseURL},!1)},void 0,{"x-csrf-token":d,"Content-Type":"application/json"})})};b.prototype.saveNote=function(a,b){var c={action:"",aid:"0",basic_auth:"0",captcha_id:"",custom_js:"",extra:"",fields:[],group:"",fiid:"",getpw:!1,individualshare:!1,
last_touch:"0",method:"",newvalues:[],realm_data:"",sharedfromuid:"",submit_id:"",urid:"0",fav:"0",username:"",password:"",sn:1,url:"http://sn"},d=this.localKey;a.encname=lpmenc(a.name,!0,d);var k="NoteType:"+a.notetype+"\nLanguage:"+(a.language?a.language:"en-US"),e;for(e in a.extra)k+="\n"+e+":"+a.extra[e];a.extra=lpmenc(k,!0,d);for(var l in c)"undefined"===typeof a[l]&&(a[l]=c[l]);a.group&&(a.sharedfolderid=this.getShareId());this.saveSite(a,b)};Object.defineProperty(b.prototype,"linkedEncryptedFormfills",
{get:function(){return g_formfills.filter(function(a){return!!a.sharefolderid})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"encryptedFormfills",{get:function(){return g_formfills.filter(function(a){return!a.sharefolderid})},enumerable:!0,configurable:!0});b.prototype.decryptString=function(a,b){var c=void 0;this.useShareKey&&(c=this.getShareKey());return lpmdec(a,b,c)};b.prototype.saveSite=function(a,b){var c=this,d=this.createPostData(a);saveSite(this.serializePostData(d),
a,b,function(){setTimeout(function(){c.saveSite(a,b)},3E4)})};b.prototype.createPostData=function(a){var b={extjs:1,localupdate:1,ajax:1,source:"vault"};b.aid=a.aid;b.name=lpenc(a.name,this.localKey);b.extra=crypto_btoa(a.extra);a.pwprotect&&(b.pwprotect="on");"1"===a.fav&&(b.fav="on");a.sharedfolderid&&(b.sharedfolderid=a.sharedfolderid,b.grouping="");b.url=AES.url2hex(a.url);b.username="";b.password="";a.template&&(b.template=a.template);b.hexName=AES.url2hex(a.name);b.notetype=a.notetype;return b};
b.prototype.serializePostData=function(a){var b=[],c;for(c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&").replace(/%20/g,"+")};Object.defineProperty(b.prototype,"localKey",{get:function(){return this.useShareKey?this.getShareKey():g_local_key},enumerable:!0,configurable:!0});b.prototype.getToken=function(a){LP.lpMakeRequestReallyReal(this.apiUrl+"/csrf","",function(b){4===b.readyState&&200===b.status?a(JSON.parse(b.responseText)):4===b.readyState&&lpmakerequesterror("invalidresponse",
{url:b.responseURL},!1)})};b.prototype.getShareKey=function(){for(var a=0,b=g_shares;a<b.length;a++){var f=b[a];if("undefined"!==typeof f.associative&&1==f.associative)return f.key}return""};b.prototype.getShareId=function(){for(var a=0,b=g_shares;a<b.length;a++){var f=b[a];if("undefined"!==typeof f.associative&&1==f.associative)return f.id}return""};return b}(FormfillStore);MigrationBackground=new MigrationBackgroundWeb;FormfillMigrationBackground=new FormfillMigrationBackgroundWeb;Feature=function(){return{isEnabled:function(a,b,c,d){LPServer.lmiapi.jsonRequest({url:"lmiapi/feature-switch/is-enabled/"+a+"/"+b,type:"GET",data:{},success:function(a){c(a.enabled)},error:function(a){"function"===typeof d&&d(a)}})}}}();(function(a){var b={};a.onSettingsIframeClose=function(a,d){d?b[d.tabID]=a:b=a};a.closeSettingsIframe=function(a,d){if(d&&"function"===typeof b[d.tabID])b[d.tabID]();else"function"===typeof b&&b()}})(this);var generateSharingKeysFromVault=function(){function a(a){var c=new RSAKey;generate_key(c,function(c){b(c,a)})}function b(a,b){a||b("RSA generation failed.");g_local_key&&g_local_key&&base_url&&LPServer||b("Global dependencies missing.");var c=null!=document.getElementById("newvault"),d=encode_public_key(a);a=encode_private_key(a);a=rsa_encrypt_privatekey(a,g_local_key);a=a.toUpperCase();var k={};k.privatekeyenc=a;k.publickey=d;k.userkeyhexhash=SHA256(AES.bin2hex(g_local_key));k.privatekeyenchexhash=
SHA256(a);k.token=c?decodeURIComponent(g_token):g_token;k.from=c?"webvault":"vault";k.method=get_method();"undefined"!==typeof lpversion&&(k.lpversion=lpversion);LPServer.ajax({type:"POST",url:c?base_url+"uploadrsakeys_website.php":base_url+"uploadrsakeys.php",data:k,success:function(a,c){b(!1)},error:function(a,c){b(a)}})}return function(b){a(b)}}();var Policies=function(){function a(a){var b=g_prefoverrides;switch(a){case "showcredmon":a=bg.get("g_showcredmon");break;default:a=b&&b[a]}"boolean"===typeof a&&(a=a?"1":"0");return a}return{logNameEnabled:function(){return g_loglogins&&4===(g_loglogins&4)},logUserNameEnabled:function(){return g_loglogins&&8===(g_loglogins&8)},logUrlEnabled:function(){return g_loglogins&&2===(g_loglogins&2)},getSaveSiteToPersonal:function(){return a("savesitestopersonal")},getAccountSelectionBasedOnEmail:function(b){"function"===
typeof b&&b("1"===a("accountselectionbasedonemail"));return"1"===a("accountselectionbasedonemail")},showSecureNotes:function(){return"undefined"===typeof g_prefoverrides.show_notes||!!Number(g_prefoverrides.show_notes)}}}();var LPTools=LPTools||{};(function(a){a.createUrlPattern=function(a){var c=b.exec(a);if(!c)return null;a=c[1];if(!a)return null;c=c[2];var f="^";a&&("*"===a?f+="[^/]+?":(a.match(/^\*\./)&&(f+="[^/]*?",a=a.substring(2)),f+=a.replace(/\./g,"\\.")));c&&("*"===c?f+="(/.*)?":"/"!==c[0]&&(f=f+"/"+c.replace(/\*/g,".*?"),f+="/?"));return new RegExp(f+"$")};a.allUrls=function(){return/(http|https|file|ftp):\/\/.+/};var b=/^(\*|(?:\*\.)?(?:[^/*]+))?\/(.*)$/})(LPTools);var LPPartner=function(){function a(){}a.getPartnerInfo=function(a){var b=null;g_partner_type&&(b=this.partnerInfoAll[g_partner_type.toLowerCase()]);a&&a(b)};a.baseUrl="images/vault_4.0/partner/";a.partnerInfoAll={verizon:{logoUrl:a.baseUrl+"partner_verizon.svg",logoWhiteUrl:a.baseUrl+"partner_verizon_white.svg",class:"logo-verizon",classWhite:"logo-verizon-white"},verizoncloud:{logoUrl:a.baseUrl+"partner_verizon.svg",logoWhiteUrl:a.baseUrl+"partner_verizon_white.svg",class:"logo-verizon",classWhite:"logo-verizon-white"},
webroot:{logoUrl:a.baseUrl+"partner_webroot.svg",logoWhiteUrl:a.baseUrl+"partner_webroot_white.svg",class:"logo-webroot",classWhite:"logo-webroot-white"}};return a}();var GenPassHistory=function(){var a=[];return{add:function(b){a.unshift({password:b,date:new Date(Date.now())});20<a.length&&a.splice(20,a.length-20)},clear:function(){a=[]},getWithDate:function(b){b&&b(a)},getWithReadableDate:function(b){b&&b(a.map(function(a){var b=a.password,c=a.date;"number"===typeof c&&(c=new Date(c));a=c.toLocaleDateString("en-us",{month:"short",day:"numeric",year:"numeric"});c=c.toLocaleTimeString("en-us",{hour12:!0,hour:"numeric",minute:"numeric"});return{password:b,date:a+
" at "+c}}))},getWithoutDate:function(b){b&&b(a.map(function(a){return a.password}))}}}();var lp_sha2lib=SHA256lib();function SHA256(a,b){return lp_sha2lib.sha256(a,b)}function SHA256_crypt(a){var b=rand_str(16);return lp_sha2lib.crypt_sha256(a,b,5E3,null)}function ab2bin(a){return String.fromCharCode.apply(null,new Uint8Array(a))}function bin2ab(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d<a.length;++d)c[d]=a.charCodeAt(d);return b}
function lp_pbkdf2_sync(a,b,c,d,f){if("undefined"!=typeof document&&document.getElementById("lpplugin")&&"function"==typeof document.getElementById("lpplugin").pbkdf2){var h=document.getElementById("lpplugin").pbkdf2(btoa(a),btoa(b),c,d);"function"==typeof f&&f(AES.hex2bin(h),a,c);return h}if("undefined"!=typeof g_oldpbkdf2&&1==g_oldpbkdf2||"function"!=typeof lpusexpcomencrypt||!lpusexpcomencrypt()||"function"!=typeof lpxpcomobj.pbkdf2){if("undefined"!=typeof g_oldpbkdf2&&1==g_oldpbkdf2||"function"!=
typeof lpuseopensslpbkdf2||!lpuseopensslpbkdf2()||"function"!=typeof lpopensslpbkdf2){if("undefined"!=typeof g_oldpbkdf2&&1==g_oldpbkdf2||"function"!=typeof have_binary_function||!have_binary_function("pbkdf2")||"function"!=typeof f){if("undefined"!=typeof g_oldpbkdf2&&1==g_oldpbkdf2||"function"!=typeof have_nplastpass||!have_nplastpass()||"undefined"==typeof g_nplastpass||"function"!=typeof g_nplastpass.pbkdf2){if("undefined"!=typeof g_oldpbkdf2&&1==g_oldpbkdf2||"function"!=typeof have_pplastpass||
!have_pplastpass()||"function"!=typeof f){if("undefined"!=typeof lptoolband&&"undefined"!=typeof lptoolbandcall){h=lptoolbandcall(["lppbkdf2",btoa(a),btoa(b),parseInt(c),d]);if("string"!=typeof h||0==h.length)return lp_sha2lib.pbkdf2(a,b,c,d,f);"function"==typeof f&&f(AES.hex2bin(h),a,c);return h}return lp_sha2lib.pbkdf2(a,b,c,d,f)}return pplastpass_send_message({cmd:"pbkdf2",password:btoa(a),salt:btoa(b),num_iterations:parseInt(c),num_bytes:d},function(b){f(AES.hex2bin(b),a,c)})}h=g_nplastpass.pbkdf2(btoa(a),
btoa(b),c,d);"function"==typeof f&&f(AES.hex2bin(h),a,c);return h}return call_binary_function("pbkdf2",btoa(a),btoa(b),parseInt(c),d,function(b){f(AES.hex2bin(b),a,c)})}h=lpopensslpbkdf2(a,b,c,d);"function"==typeof f&&f(AES.hex2bin(h),a,c);return h}h=lpxpcomobj.pbkdf2(btoa(a),btoa(b),c,d);"function"==typeof f&&f(AES.hex2bin(h),a,c);return h}
function lp_pbkdf2(a,b,c,d,f){if(f&&"undefined"!==typeof crypto&&crypto.subtle&&crypto.subtle.importKey&&crypto.subtle.deriveKey&&crypto.subtle.exportKey)crypto.subtle.importKey("raw",bin2ab(a),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]).then(function(a){return crypto.subtle.deriveKey({name:"PBKDF2",salt:bin2ab(b),iterations:parseInt(c,10),hash:"SHA-256"},a,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}).then(function(a){return crypto.subtle.exportKey("raw",a)}).then(function(b){f(ab2bin(b),
a,c)}).catch(function(){lp_pbkdf2_sync(a,b,c,d,f)});else return lp_pbkdf2_sync(a,b,c,d,f)}
function SHA256lib(){function a(a){null==a&&(a="");a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var h=a.charCodeAt(c);128>h?b+=String.fromCharCode(h):(127<h&&2048>h?b+=String.fromCharCode(h>>6|192):(b+=String.fromCharCode(h>>12|224),b+=String.fromCharCode(h>>6&63|128)),b+=String.fromCharCode(h&63|128))}return b}function b(a,b,f,h){a=a<<16|b<<8|f;out="";for(b=0;b<h;b++)out+="./0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(a&63),a>>>=6;return out}return{sha256:function(b,
d){b=a(b);for(var c=[],h=0;h<b.length;h++)c[h]=b.charCodeAt(h);b=sjcl.codec.bytes.toBits(c);h=sjcl.hash.sha256.hash(b,8*b.length);if("undefined"!=typeof d&&1==d){d=sjcl.codec.bytes.fromBits(h);b=[];for(h=0;h<d.length/4;h++)b[h]=d[4*h]<<24|d[4*h+1]<<16|d[4*h+2]<<8|d[4*h+3];return b}return sjcl.codec.hex.fromBits(h)},sha512:function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a.charCodeAt(c);a=sjcl.codec.bytes.toBits(b);a=sjcl.hash.sha512.hash(a,8*a.length);return sjcl.codec.hex.fromBits(a)},crypt_sha256:function(a,
d,f,h){var c=[],e=[];16<d.length&&(d=d.substr(0,16));1E3>f&&(f=1E3);for(var l=0;l<a.length;l++)c[l]=a.charCodeAt(l);for(l=0;l<d.length;l++)e[l]=d.charCodeAt(l);password_bits=sjcl.codec.bytes.toBits(c);salt_bits=sjcl.codec.bytes.toBits(e);e=new sjcl.hash.sha256;e.update(password_bits);e.update(salt_bits);c=new sjcl.hash.sha256;c.update(password_bits);c.update(salt_bits);c.update(password_bits);l=c.finalize();for(c=a.length;32<c;c-=32)e.update(l);e.update(sjcl.bitArray.bitSlice(l,0,8*c));for(c=a.length;0<
c;c>>=1)0!==(c&1)?e.update(l):e.update(password_bits);e=e.finalize();l=new sjcl.hash.sha256;for(c=0;c<a.length;c++)l.update(password_bits);var n=l.finalize();l=[];for(c=a.length;32<=c;c-=32)l=sjcl.bitArray.concat(l,n);l=sjcl.bitArray.concat(l,sjcl.bitArray.bitSlice(n,0,8*c));a=new sjcl.hash.sha256;for(c=0;c<16+sjcl.bitArray.extract(e,0,8);c++)a.update(salt_bits);n=a.finalize();a=[];for(c=d.length;32<=c;c-=32)a=sjcl.bitArray.concat(a,n);a=sjcl.bitArray.concat(a,sjcl.bitArray.bitSlice(n,0,8*c));for(c=
0;c<f;c++)n=new sjcl.hash.sha256,1===(c&1)?n.update(l):n.update(e),0!==c%3&&n.update(a),0!==c%7&&n.update(l),1===(c&1)?n.update(e):n.update(l),e=n.finalize();a="$5$";5E3!=f&&(a+="rounds="+f+"$");a+=d+"$";d=sjcl.codec.bytes.fromBits(e);a+=b(d[0],d[10],d[20],4);a+=b(d[21],d[1],d[11],4);a+=b(d[12],d[22],d[2],4);a+=b(d[3],d[13],d[23],4);a+=b(d[24],d[4],d[14],4);a+=b(d[15],d[25],d[5],4);a+=b(d[6],d[16],d[26],4);a+=b(d[27],d[7],d[17],4);a+=b(d[18],d[28],d[8],4);a+=b(d[9],d[19],d[29],4);a+=b(0,d[31],d[30],
3);if("function"===typeof h)h(a);else return a},pbkdf2:function(a,b,f,h,k){for(var c=[],d=[],n=0;n<a.length;n++)c[n]=a.charCodeAt(n);for(n=0;n<b.length;n++)d[n]=b.charCodeAt(n);a=sjcl.codec.bytes.toBits(c);b=sjcl.codec.bytes.toBits(d);a=sjcl.misc.pbkdf2(a,b,f,8*h,null,k,null);if("function"!==typeof k)return sjcl.codec.hex.fromBits(a)},utf8encode:function(b){return a(b)}}};var LastpassApiHelper;
(function(a){function b(a,b){if(b){Object.keys(b).forEach(function(c){var d=b[c];if(d)if("domain"!==c&&"url"!==c||"string"!==typeof d)a[c]=d;else{var e;if((e=/^(?:(https?|ftp):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})(?:[\/\w \.-]*)/i.exec(d))&&e.length){var f=e.pop();e=e.pop()+"."+f}else e="";e!==d&&(a[c]=AES.url2hex(e))}});var c=window&&window.navigator?window.navigator.language:void 0;c&&(a["browser-language"]=c);(c="undefined"!==typeof LPPlatform&&"function"===typeof LPPlatform.getUILanguage?LPPlatform.getUILanguage():
void 0)&&(a["ui-language"]=c)}}function c(a){if("421c1788b658440afab93abac0e138a70f99da9dfe7250d92356bc13dbd2beba"===SHA256(a.substring(0,13)))return!0;switch(SHA256(a)){case "c0acc74991dc8b8988041f95980aac6f5130bd1b1b2dd0c1f6f15113a4d40df1":case "0208b68cb11b6e25b28ac67bdaa3c5fc496ccd123839d8de209a04b3b5f6a8e9":case "6c1ae082c3db49ff27e5bbae0dbbc6ff8a2884ae7d5ac750f52945a579197abb":case "e98d9302b43d3336f5bd4dc35dec406b87af0f1787c5ce93b8640bcb583f4fb5":case "71565bd34ef87e73fa8107e12f3ff921ddde09375ecb3e864561420da4e83c03":case "74f5c23513ebcd6236449d2b44a0bc5fe943a33fe9134a8d7cfa633493d27923":case "e9a0e7fcddda42963a6369f3fe6c66cfb09a15a6b436d2cae380e9278835eb87":case "b949e02851695dfd8ab7f64f9d80d3ba2c5e164e6a475eb16743f0ab11fc3c40":case "d4f3743427c440fe51a13ae997166d0286ea4763766c36b143aa7e181499bc46":case "430473329df5ca205e93d09d202c021d973044142fe20fc4abf555135c405c44":case "5a119eeea1a9b824a63752c52678013b0e502bc07bfa92aa4eb16493a008ca16":return!0;
default:if(a===window.location.origin)return!0;console.log("Prohibited url: "+a);return!1}}a.sendTimingEvent=function(a,b,c,d,l){void 0===d&&(d={});d.action=b;d.timestamp=c;d.allowReporting=l;storeAndResolveTimingEvents(a,d)};a.sendLpImprove=function(a,c,d){if(!0===c){var e=window.location.search.split("&");0===e[0].indexOf("?")&&(e[0]=e[0].substring(1));c={};for(var f=0;f<e.length;++f){var h=e[f].split("=");2===h.length&&(c[h[0]]=h[1])}e={cmd:"lpimprove"};e.event=a;e.method=c.method||"web";e.lpversion=
c.version||"";b(e,d);$.ajax({type:"POST",url:"lastpass/api.php",dataType:"json",data:e})}};var d=null;a.addSafeMessageHandler=function(a,b){a.addEventListener("message",function(a){c(a.origin)&&(d||(d=a.origin),b(a))})};a.postSafeMessage=function(a,b){d&&"file:"!==d?a.postMessage(b,d):a.postMessage(b,"*")}})(LastpassApiHelper||(LastpassApiHelper={}));var timingActions=["start","pause","resume","stop"],eventStore={};
function storeAndResolveTimingEvents(a,b){var c=null;if(0>timingActions.indexOf(b.action))console.log("Unknown timing event");else if(b.timestamp||(b.timestamp=Date.now()),b.allowReporting||(b.allowReporting=!1),null==eventStore[a]&&(eventStore[a]=[]),"stop"===b.action?(eventStore[a].push(b),c=resolveTimingStoreToParams(eventStore[a]),eventStore[a]=[]):("start"==b.action&&(eventStore[a]=[]),eventStore[a].push(b)),c){a={action:a};for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);LPContentScriptFeatures.health_monitoring&&
("object"===typeof LastpassApiHelper?LastpassApiHelper.sendLpImprove("health_monitoring",b.allowReporting,a):sendLpImprove("health_monitoring",a))}}
function resolveTimingStoreToParams(a){for(var b={},c=0,d=0,f=0,h=0,k,e=a.length,l=0;l<e;l++){var n=a[l].action,t=a[l].timestamp;void 0!==a[l].numberOfItems&&(k=a[l].numberOfItems);switch(n){case "start":c=t;break;case "pause":f=t;break;case "resume":0<f&&(h+=t-f);f=0;break;case "stop":d=t}}if(0!=c&&0!=d)return b.timeToComplete=d-c-h,void 0!==k&&(b.numberOfItems=k),b};
//# sourceMappingURL=newvault.js.map